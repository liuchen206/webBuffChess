System.register("chunks:///_virtual/bboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameMap.ts"],(function(t){var n,e,r,o,i,a,s,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,s=t.Component},function(t){c=t.gameMap}],execute:function(){var u,p,l,d,f,b;i._RF.push({},"24564zwVgpPu7Quj+soknuO","bboard",void 0);var g=a.ccclass,y=a.property;t("bboard",(u=g("bboard"),p=y(c),u(((b=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,r(n,"gmap",f,o(n)),n}e(n,t);var i=n.prototype;return i.onLoad=function(){n.ins&&n.ins.node.destroy(),n.ins=this},i.start=function(){},i.update=function(t){},n}(s)).ins=void 0,f=n((d=b).prototype,"gmap",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=d))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/com_status.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,c,n,r;return{setters:[function(t){o=t.inheritsLoose},function(t){c=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var s;c._RF.push({},"a8948IoB/BGHpcGN9Fr1/iP","com_status",void 0);var e=n.ccclass;n.property,t("com_status",e("com_status")(s=function(t){function c(){return t.apply(this,arguments)||this}o(c,t);var n=c.prototype;return n.start=function(){},n.update=function(t){},c}(r))||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/com_trans.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts","./toolGeo.ts","./toolIsometric.ts","./bboard.ts"],(function(t){var o,n,r,e,i,c,s,a,u,l,p,f,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized,i=t.createClass},function(t){c=t.cclegacy,s=t._decorator,a=t.UITransform,u=t.Component},function(t){l=t.toolFunc},function(t){p=t.toolGeo},function(t){f=t.toolIsometric},function(t){g=t.bboard}],execute:function(){var h,d,v,m,R;c._RF.push({},"558f4GChrhGkoWjlJf38BQb","com_trans",void 0);var y=s.ccclass,_=s.property;t("com_trans",(h=y("com_trans"),d=_({displayName:"设计直径，即图片宽度"}),h((R=o((m=function(t){function o(){for(var o,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return o=t.call.apply(t,[this].concat(i))||this,r(o,"designRing2R",R,e(o)),o}n(o,t);var c=o.prototype;return c.start=function(){},c.update=function(t){},c.onFocusInEditor=function(){var t=this.getComponent(a);t&&(t.width=this.ring2R,t.height=this.ring2R*Math.SQRT1_2)},o.isTwoObjIntersection=function(t,o){var n=l.vec3To2(t.rectPos()),r=t.ring2R/2,e=l.vec3To2(o.rectPos()),i=o.ring2R/2;return p.isTwoCircleIntersection(n,r,e,i)},c.rectPos=function(){var t=f.coord2d_raytoIsoc_to_view(l.vec3To2(this.node.position),0,g.ins.gmap.mapLen);return l.vec2To3(t)},i(o,[{key:"ring2R",get:function(){return this.designRing2R}}]),o}(u)).prototype,"designRing2R",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),v=m))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/gameMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mapLineDrawer.ts","./toolIsometric.ts","./toolFunc.ts","./toolGeo.ts"],(function(e){var t,n,r,o,i,a,c,s,u,d,p,m,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.v2,u=e.Color,d=e.Component},function(e){p=e.mapLineDrawer},function(e){m=e.toolIsometric},function(e){g=e.toolFunc},function(e){h=e.toolGeo}],execute:function(){var _,l,f,C,v,w;a._RF.push({},"2ef35umNulO7r1h/VcLTbgN","gameMap",void 0);var y=c.ccclass,L=(c.requireComponent,c.property),R=e("blurRange",function(e){return e[e["近"]=1]="近",e[e["中"]=2]="中",e[e["远"]=3]="远",e[e["全屏幕"]=4]="全屏幕",e}({}));e("gameMap",(_=y("gameMap"),l=L({displayName:"地图的长度"}),_(((w=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"mapLen",v,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){t.ins&&t.ins.node.destroy(),t.ins=this},a.start=function(){this.debugRender()},a.onFocusInEditor=function(){this.debugRender()},a.update=function(e){},a.debugRender=function(){this.renderRect(),this.retnderIsocRect(),this._renderRange(),this._renderCornerPoint(),this._renderSquarePoint()},a.renderRect=function(){var e=this.mapLen,t=s(0,0),n=s(t.x-e/2,t.y+e/2),r=s(t.x+e/2,t.y+e/2),o=s(t.x+e/2,t.y-e/2),i=s(t.x-e/2,t.y-e/2);this.getComponent(p).drawRect(n,r,o,i,u.GREEN)},a.retnderIsocRect=function(){var e=s(0,0),t=this.mapLen/2,n=s(e.x-t,e.y+t),r=s(e.x+t,e.y+t),o=s(e.x+t,e.y-t),i=s(e.x-t,e.y-t),a=m.coord2d_to_isoc_to_view(g.vec2To3(n)),c=m.coord2d_to_isoc_to_view(g.vec2To3(r)),d=m.coord2d_to_isoc_to_view(g.vec2To3(o)),h=m.coord2d_to_isoc_to_view(g.vec2To3(i));this.getComponent(p).drawRect(a.toVec2(),c.toVec2(),d.toVec2(),h.toVec2(),u.RED)},a._renderRange=function(){this.getComponent(p).drawCircle(s(0,0),this.range_near,u.RED),this.getComponent(p).drawCircle(s(0,0),this.range_mid,u.GREEN),this.getComponent(p).drawCircle(s(0,0),this.range_far,u.YELLOW)},a.getApprochRange=function(e){return e==R.近?{min:0,max:this.range_near}:e==R.中?{min:this.range_near,max:this.range_mid}:e==R.远?{min:this.range_mid,max:this.range_far}:e==R.全屏幕?{min:0,max:Number.MAX_VALUE}:void 0},a._renderCornerPoint=function(){var e=h.rectCornerPoint(s(0,0),this.mapLen),t=e.rt,n=e.rb,r=e.lb,o=e.lt;this.getComponent(p).drawOneP(t),this.getComponent(p).drawOneP(n),this.getComponent(p).drawOneP(r),this.getComponent(p).drawOneP(o)},a._renderSquarePoint=function(){var e=h.rectSquarePoint(s(0,0),this.mapLen),t=e.up,n=e.right,r=e.down,o=e.left;this.getComponent(p).drawOneP(t,u.BLACK),this.getComponent(p).drawOneP(n,u.BLACK),this.getComponent(p).drawOneP(r,u.BLACK),this.getComponent(p).drawOneP(o,u.BLACK)},i(t,[{key:"range_near",get:function(){return.3*this.mapLen/2}},{key:"range_mid",get:function(){return.6*this.mapLen/2}},{key:"range_far",get:function(){return this.mapLen/2}}]),t}(d)).ins=void 0,v=t((C=w).prototype,"mapLen",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 800}}),f=C))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./bboard.ts","./com_status.ts","./com_trans.ts","./gameMap.ts","./mapLineDrawer.ts","./toolFunc.ts","./toolGeo.ts","./toolIsometric.ts","./toolMatrix.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mapLineDrawer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,r,e,s,n,l;return{setters:[function(t){o=t.inheritsLoose,i=t.createClass},function(t){r=t.cclegacy,e=t._decorator,s=t.Color,n=t.GraphicsComponent,l=t.Component}],execute:function(){var h;r._RF.push({},"b33b6bx2TdPDIyQwRZsKhhn","mapLineDrawer",void 0);var g=e.ccclass;e.requireComponent,e.property,t("mapLineDrawer",g("mapLineDrawer")(h=function(t){function r(){return t.apply(this,arguments)||this}o(r,t);var e=r.prototype;return e.start=function(){},e.update=function(t){},e._drawNone=function(){this.g.clear()},e._drawLine=function(t,o,i){this.g.lineWidth=3,i?(this.g.fillColor=i,this.g.strokeColor=i):(this.g.fillColor=s.RED,this.g.strokeColor=s.RED),this.g.moveTo(t.x,t.y),this.g.lineTo(o.x,o.y),this.g.stroke()},e.drawCircle=function(t,o,i){this.g.lineWidth=3,i?(this.g.fillColor=i,this.g.strokeColor=i):(this.g.fillColor=s.RED,this.g.strokeColor=s.RED),this.g.moveTo(t.x,t.y),this.g.circle(t.x,t.y,o),this.g.stroke()},e.drawOneP=function(t,o){this.g.lineWidth=3,o?(this.g.fillColor=o,this.g.strokeColor=o):(this.g.fillColor=s.RED,this.g.strokeColor=s.RED),this.g.moveTo(t.x,t.y),this.g.circle(t.x,t.y,6),this.g.stroke(),this.g.fill()},e.drawRect=function(t,o,i,r,e){this.g.lineWidth=3.5,e?(this.g.fillColor=e,this.g.strokeColor=e):(this.g.fillColor=s.RED,this.g.strokeColor=s.RED),this.g.moveTo(t.x,t.y),this.g.lineTo(o.x,o.y),this.g.lineTo(i.x,i.y),this.g.lineTo(r.x,r.y),this.g.lineTo(t.x,t.y),this.g.stroke()},i(r,[{key:"g",get:function(){return this.getComponent(n)}}]),r}(l))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/toolFunc.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o,i,a;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,e=t.v3,o=t.v2,i=t.math,a=t.Node}],execute:function(){r._RF.push({},"27cf42STn1MY6B4p8e+FBSn","toolFunc",void 0);t("toolFunc",function(){function t(){}return t.vec2To3=function(t){return e(t.x,t.y,0)},t.vec3To2=function(t){return o(t.x,t.y)},t.lookAt_XScale=function(t,n){return t<n?1:-1},t.RandomInt=function(t,n){var r=Math.random(),e=this.mapnumb(r,0,1,t,n);return Math.round(e)},t.RandomND=function(){var t=Math.random(),n=Math.random(),r=Math.sqrt(-2*Math.log(t)),e=2*Math.PI*n;return r*Math.cos(e)},t.randArrayIndex=function(t){return Math.floor(Math.random()*t.length)},t.randByWeight=function(t){for(var r,e=0,o=0,i=n(t);!(r=i()).done;){e+=r.value}if(e<=0)return o;for(var a=Math.floor(Math.random()*e)+1,u=0;u<t.length;u++){if(a<=t[u]){o=u;break}a-=t[u]}return o},t.fixInteger=function(t,n,r){var e=" ";r&&(e=r);var o=n;return(t=parseFloat(t.toFixed(1))).toString().length>n&&(o=t.toString().length),(Array(n).join(e)+t).slice(-o)},t.formatBigInteget=function(t,n){return t.toString().length<=n?t:parseInt(Array.from({length:n},(function(t,n){return"9"})).join(""))},t.intDigit=function(t){for(var n=0;0!==t;)t=Math.floor(t/10),n++;return n},t.lerpInteger=function(t,n){var r=1,e=Math.abs(t-n);e>10&&(r=10*(this.intDigit(e)-1));return(t=Math.round(t))==(n=Math.round(n))?t:t>n?t-r:t<n?t+r:void 0},t.mapnumb=function(t,n,r,e,o){var a=((t=i.clamp(t,n,r))-n)/(r-n);return e+(o-e)*(a=i.clamp01(a))},t.disturb=function(t,n){var r=Math.sign(Math.random()-.5);return t*n*Math.random()*r+t},t.milliSecondTo_dd_hh_mm_ss=function(t){return[Math.floor(t/864e5),Math.floor(t%864e5/36e5),Math.floor(t%36e5/6e4),Math.floor(t%6e4/1e3)]},t.milliSecondToUIstring=function(t){var n=this.milliSecondTo_dd_hh_mm_ss(t),r=n[0],e=n[1],o=n[2],i=n[3],a=this.fixInteger(e,2,"0"),u=this.fixInteger(o,2,"0"),f=this.fixInteger(i,2,"0");return r>0?"非常长":e>0?a+"时 "+u+"分":o>0?u+"分 "+f+"秒":f+"秒"},t.timeToMilliSecond=function(t,n,r,e){return 24*t*60*60*1e3+60*n*60*1e3+60*r*1e3+1e3*e},t.vertiString=function(t){for(var n="",r=0;r<t.length;r++){n+=t[r],r==t.length-1||(n+="\n")}return n},t.setSizeSpByWidth=function(t,n,r){var e=n/(t.width/t.height);r.width=n,r.height=e},t.setSizeAsSQRT2Circle=function(t,n){n.width=2*t,n.height=2*t/Math.SQRT2},t.shuffleArray=function(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),e=[t[r],t[n]];t[n]=e[0],t[r]=e[1]}return t},t.isValidCom=function(t){if(!t)return!1;if(t instanceof a){if(!t.isValid)return!1}else{if(!t.node)return!1;if(!t.node.isValid)return!1}return!0},t.enumToArr=function(t){var n=[];for(var r in t)isNaN(Number(r))&&n.push(t[r]);return n},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/toolGeo.ts",["cc"],(function(t){var n,e,r,a,o;return{setters:[function(t){n=t.cclegacy,e=t.v2,r=t.Vec2,a=t.EPSILON,o=t.toRadian}],execute:function(){n._RF.push({},"afeba6YU+9F3qdH0xgORECl","toolGeo",void 0);t("toolGeo",function(){function t(){}return t.pointToLineDistance=function(t,n,e,r,a,o){var i=a-e,c=o-r,u=Math.sqrt(i*i+c*c),l=(t-e)*(i/=u)+(n-r)*(c/=u);return l<0?Math.sqrt((t-e)*(t-e)+(n-r)*(n-r)):l>u?Math.sqrt((t-a)*(t-a)+(n-o)*(n-o)):Math.abs(l*Math.sqrt(i*i+c*c))},t.lineIntersection=function(t,n,r,a){var o=t.x,i=t.y,c=n.x,u=n.y,l=r.x,s=r.y,h=a.x,d=a.y,x=(o-c)*(s-d)-(i-u)*(l-h);return 0===x?null:e(((o*u-i*c)*(l-h)-(o-c)*(l*d-s*h))/x,((o*u-i*c)*(s-d)-(i-u)*(l*d-s*h))/x)},t.vec2Project=function(t,n){var a=e();return r.multiplyScalar(a,n,t.dot(n)),a.multiplyScalar(1/n.lengthSqr()),a},t.footpoint=function(t,n,a){var o=e();r.subtract(o,t,n);var i=e();return r.subtract(i,a,n),this.vec2Project(o,i).add(n)},t.isDirSame=function(t,n){return t.clone().dot(n)>0},t.speedSign=function(t,n){return this.isDirSame(t,n)||t.equals(r.ZERO)?1:-1},t.lineSegmentsIntersection=function(t,n,e,r){var o=this.lineIntersection(t,n,e,r);if(o){var i=Math.min(t.x,n.x)<=o.x+a&&o.x<=Math.max(t.x,n.x)+a&&Math.min(t.y,n.y)<=o.y+a&&o.y<=Math.max(t.y,n.y)+a;return Math.min(e.x,r.x)<=o.x+a&&o.x<=Math.max(e.x,r.x)+a&&Math.min(e.y,r.y)<=o.y+a&&o.y<=Math.max(e.y,r.y)+a&&i?o:null}return null},t.getPointToLineDistance2=function(t,n,e){var r=[t.x,t.y],a=r[0],o=r[1],i=[n.x,n.y],c=i[0],u=i[1],l=[e.x,e.y],s=l[0],h=l[1],d=Math.sqrt((s-a)*(s-a)+(h-o)*(h-o)),x=Math.sqrt((s-c)*(s-c)+(h-u)*(h-u)),y=Math.sqrt((a-c)*(a-c)+(o-u)*(o-u));if(0===y)return d;var f=(y+d+x)/2;return 2*Math.abs(Math.sqrt(f*(f-y)*(f-d)*(f-x)))/y},t.isTwoCircleIntersection=function(t,n,e,r){var a=n+r;return t.clone().subtract(e).length()<=a},t.elasticCollision=function(t,n,e,r){return[n*((t-e)/(t+e))+r*(2*e/(t+e)),r*((e-t)/(t+e))+n*(2*t/(t+e))]},t.rotateVec2=function(t,n){return t.clone().rotate(o(n))},t.rectCornerPoint=function(t,n){var r=n/2,a=e(0,r),o=this.rotateVec2(a,-45).clone().subtract(e(r,r)).length()/2,i=e(r,r).normalize().multiplyScalar(r+o),c=this.rotateVec2(i,-90),u=this.rotateVec2(i,-180),l=this.rotateVec2(i,90);return{rt:t.clone().add(i),rb:t.clone().add(c),lb:t.clone().add(u),lt:t.clone().add(l)}},t.rectSquarePoint=function(t,n,r){void 0===r&&(r=50);var a=n/2-r;return a=Math.max(1,a),{up:t.clone().add(e(0,a)),right:t.clone().add(e(a,0)),down:t.clone().add(e(0,-a)),left:t.clone().add(e(-a,0))}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/toolIsometric.ts",["cc","./toolMatrix.ts"],(function(o){var t,c,e,r;return{setters:[function(o){t=o.cclegacy,c=o.v3},function(o){e=o.Matrix1X4,r=o.Matrix4x4}],execute:function(){t._RF.push({},"26ab4bw53dEkb9kGB3O4vri","toolIsometric",void 0);o("toolIsometric",function(){function o(){}return o.coord2d_to_isoc_to_view=function(o){var t=e.vec3To4(o);return r.to_isoc(t)},o.coordIsoc_to_rect_to_view=function(o){var t=e.vec3To4(o);return r.to_angleright(t)},o.coord2d_raytoIsoc_to_view=function(t,n,i){var s=n*i,_=c(0,0,s),a=c(1,0,s),u=c(0,1,s),l=c().set(t.x,t.y,1e3),v=c().set(t.x,t.y,0),d=r.to_isoc(e.vec3To4(_)).toVec3(),f=r.to_isoc(e.vec3To4(a)).toVec3(),p=r.to_isoc(e.vec3To4(u)).toVec3(),y=o.plant_ray_point(d,f,p,l,v);return o.coordIsoc_to_rect_to_view(y).toVec2()},o.plant_ray_point=function(o,t,c,e,r){var n=t.clone().subtract(o),i=c.clone().subtract(t),s=n.clone().cross(i).normalize(),_=r.clone().subtract(e).normalize();return _.clone().multiplyScalar(o.clone().subtract(e).dot(s)/_.clone().dot(s)).add(e)},o}());t._RF.pop()}}}));

System.register("chunks:///_virtual/toolMatrix.ts",["cc","./toolFunc.ts"],(function(t){var a,n,o,i,r;return{setters:[function(t){a=t.cclegacy,n=t.v2,o=t.v3,i=t.math},function(t){r=t.toolFunc}],execute:function(){a._RF.push({},"e6f32/AOBNHb7kdBzB1DxVk","toolMatrix",void 0);t("Matrix1X4",function(){function t(t,a,n,o){this.vec=[void 0,0,0,0,0],void 0!==t&&(this.vec[1]=t),void 0!==a&&(this.vec[2]=a),void 0!==n&&(this.vec[3]=n),void 0!==o&&(this.vec[4]=o)}t.vec3To4=function(a){return new t(a.x,a.y,a.z,1)},t.vec2To4=function(a){return new t(a.x,a.y,0,1)};var a=t.prototype;return a.toVec2=function(){return n(this.vec[1],this.vec[2])},a.toVec3=function(){return o(this.vec[1],this.vec[2],this.vec[3])},a.mul=function(a){for(var n=new t,o=1;o<=4;o++)n.vec[o]=this.vec[1]*a.mat[1][o]+this.vec[2]*a.mat[2][o]+this.vec[3]*a.mat[3][o]+this.vec[4]*a.mat[4][o];return n},a.printVec4=function(){for(var t="",a=1;a<=4;a++)t+=r.fixInteger(this.vec[a],4," "),t+="  ";console.log(t),console.log("<<<<<<<<end>>>>>>>")},t}()),t("Matrix4x4",function(){function t(){this.mat=[[void 0,void 0,void 0,void 0,void 0],[void 0,0,0,0,0],[void 0,0,0,0,0],[void 0,0,0,0,0],[void 0,0,0,0,0]]}t.identityMat=function(){var a=new t;return a.mat[1][1]=1,a.mat[2][2]=1,a.mat[3][3]=1,a.mat[4][4]=1,a},t.translateMat=function(a,n,o){var i=new t;return i.mat[1][1]=1,i.mat[2][2]=1,i.mat[3][3]=1,i.mat[4][4]=1,i.mat[4][1]=a,i.mat[4][2]=n,i.mat[4][3]=o,i},t.rotateXMat=function(a){var n=new t;return n.mat[1][1]=1,n.mat[2][2]=Math.cos(a),n.mat[3][3]=Math.cos(a),n.mat[2][3]=Math.sin(a),n.mat[3][2]=-Math.sin(a),n.mat[4][4]=1,n},t.rotateYMat=function(a){var n=new t;return n.mat[1][1]=Math.cos(a),n.mat[1][3]=Math.sin(a),n.mat[2][2]=1,n.mat[3][1]=-Math.sin(a),n.mat[3][3]=Math.cos(a),n.mat[4][4]=1,n},t.rotateZMat=function(a){var n=new t;return n.mat[1][1]=Math.cos(a),n.mat[1][2]=Math.sin(a),n.mat[2][1]=-Math.sin(a),n.mat[2][2]=Math.cos(a),n.mat[3][3]=1,n.mat[4][4]=1,n},t.to_isoc=function(a){return a.mul(t.angleright_isoc_mat())},t.to_angleright=function(a){return a.mul(t.isoc_angleright_mat())},t.angleright_isoc_mat=function(a,n){void 0===a&&(a=-45),void 0===n&&(n=-45);var o=i.toRadian(n),r=i.toRadian(a);return t.rotateZMat(o).mul(t.rotateXMat(r))},t.isoc_angleright_mat=function(a,n){void 0===a&&(a=-45),void 0===n&&(n=-45);var o=i.toRadian(n),r=i.toRadian(a);return t.rotateXMat(r).T_Matrix().mul(t.rotateZMat(o).T_Matrix())};var a=t.prototype;return a.mul=function(a){for(var n=new t,o=1;o<=4;o++)for(var i=1;i<=4;i++)n.mat[o][i]=this.mat[o][1]*a.mat[1][i]+this.mat[o][2]*a.mat[2][i]+this.mat[o][3]*a.mat[3][i]+this.mat[o][4]*a.mat[4][i];return n},a.T_Matrix=function(){for(var a=new t,n=1;n<=4;n++)for(var o=1;o<=4;o++)a.mat[o][n]=this.mat[n][o];return a},a.printMatrix=function(){for(var t=1;t<=4;t++){for(var a="",n=1;n<=4;n++)a+=r.fixInteger(this.mat[t][n],4," "),a+="  ";console.log(a),a=""}console.log("<<<<<<<<end>>>>>>>")},t}());a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});