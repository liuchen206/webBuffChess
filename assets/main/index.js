System.register("chunks:///_virtual/allchess_list.ts",["./rollupPluginModLoBabelHelpers.js","cc","./List.ts","./ListItem.ts","./bboard.ts","./gameClientEvent.ts","./chessInitTable.ts","./allchess_listitem.ts"],(function(t){var e,n,s,i,r,o,a,c,l,u,f,h,p,d;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,s=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t._decorator,a=t.director,c=t.Component},function(t){l=t.default},function(t){u=t.default},function(t){f=t.bboard},function(t){h=t.gameClientEvent},function(t){p=t.chessDefinedArr},function(t){d=t.allchess_listitem}],execute:function(){var v;r._RF.push({},"c3f71TEFGxMQ4MblAplkj7X","allchess_list",void 0);var m=o.ccclass;o.property,t("allchess_list",m("allchess_list")(v=function(t){function r(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).renderData=[],e}e(r,t);var o=r.prototype;return o.start=function(){},o.onEnable=function(){var t=this;this.initRender(),a.on(h.eve_localDataRefresh,(function(){t.initRender()}),this)},o.onDisable=function(){a.targetOff(this)},o.update=function(t){},o.initRender=function(){var t=this.renderData=p;this.list.numItems=t.length},o.onListRender=function(){var t=s(i().mark((function t(e,n){var s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=this.renderData[n],e.getComponent(d).setChess(s);case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),o.onListSelected=function(t,e,n,s){if(t){t.getComponent(u).list.selectedMode;var i=this.renderData[e];f.ins.popChessInfo(i),a.emit(h.eve_buttonClick)}},n(r,[{key:"list",get:function(){return this.getComponent(l)}}]),r}(c))||v);r._RF.pop()}}}));

System.register("chunks:///_virtual/allchess_listitem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessitem.ts","./gameRuntimeData.ts"],(function(e){var s,t,i,a,c,n,r,l,o,h;return{setters:[function(e){s=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){c=e.cclegacy,n=e._decorator,r=e.Sprite,l=e.Component},function(e){o=e.chessitem},function(e){h=e.gameRuntimeData}],execute:function(){var u,p,f,y,d,v,m;c._RF.push({},"f3352FyatlOR7saolkaKFjj","allchess_listitem",void 0);var _=n.ccclass,C=n.property;e("allchess_listitem",(u=_("allchess_listitem"),p=C(o),f=C(r),u((v=s((d=function(e){function s(){for(var s,t=arguments.length,c=new Array(t),n=0;n<t;n++)c[n]=arguments[n];return s=e.call.apply(e,[this].concat(c))||this,i(s,"chessi",v,a(s)),i(s,"sp_selected",m,a(s)),s}t(s,e);var c=s.prototype;return c.start=function(){},c.update=function(e){},c.onbtnclick=function(){},c.setChess=function(e){this.chessi.initItem(e);var s=h.chessStatusToPlayer(e);if("已携带"==s){var t=h.playerCarryChess(e);this.setAsCarry(t.cardLv)}else if("拥有"==s){var i=h.playerHasChess(e);this.setAsNormal(i.cardLv)}else this.setAsNotHas()},c.setAsNotHas=function(){this.chessi.setGray(!0),this.chessi.cleanCd(),this.chessi.cleanLevel(),this.sp_selected.node.active=!1},c.setAsCarry=function(e){this.chessi.setGray(!1),this.chessi.cleanCd(),this.chessi.setLevel(e),this.sp_selected.node.active=!0},c.setAsNormal=function(e){this.chessi.setGray(!1),this.chessi.cleanCd(),this.chessi.setLevel(e),this.sp_selected.node.active=!1},s}(l)).prototype,"chessi",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=s(d.prototype,"sp_selected",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/aoe.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessstatus.ts","./objpropty.ts","./toolFunc.ts","./toolGird.ts","./toolIsometric.ts","./bboard.ts","./aoeInitTable.ts"],(function(t){var o,i,e,n,s,a,c,r,u,d,h,l,f,p;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,n=t.AnimationComponent,s=t.v2,a=t.Component},function(t){c=t.teamType},function(t){r=t.objpropty},function(t){u=t.toolFunc},function(t){d=t.toolGird},function(t){h=t.toolIsometric},function(t){l=t.bboard},function(t){f=t.aoeDefined,p=t.aoeInitTable}],execute:function(){var m;i._RF.push({},"17240xxRMBB8LTn9AZwzhN8","aoe",void 0);var v=e.ccclass;e.property,t("aoeLocate",function(t){return t[t.ground=1]="ground",t[t.sky=2]="sky",t}({})),t("aoe",v("aoe")(m=function(t){function i(){for(var o,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return(o=t.call.apply(t,[this].concat(e))||this).tickTime=void 0,o.maxTickTimes=void 0,o.locate=void 0,o.onAoeTick=void 0,o.launcher=void 0,o.to=void 0,o.teamtype=void 0,o.propOnDamageInfo=void 0,o.buffPassToDefender=void 0,o.ticked=0,o.timeElapsed=0,o.ani=void 0,o}o(i,t);var e=i.prototype;return e.onLoad=function(){this.ani=this.getComponent(n)},e.start=function(){this.aoeStart()},e.update=function(t){if(null!=this.tickTime&&null!=this.maxTickTimes){this.timeElapsed+=t;var o=this.tickTime+this.tickTime*this.ticked;this.timeElapsed>o&&(this.onAoeTick(this),this.ticked+=1),this.ticked>=this.maxTickTimes&&this.aoeEnd()}},e.onbtndebug=function(){var t=s(1,0);this.initAoe(f.黑水01,this.node,t,c.player,r.default,[]),this.aoeStart()},e.initAoe=function(t,o,i,e,n,s){this.launcher=o,this.to=i,this.teamtype=e,this.propOnDamageInfo=n,this.buffPassToDefender=s;var a=p.ins.get(t);a?a(this):console.warn("aoe 没有 initcb")},e.aoeStart=function(){if(this.to){var t=d.GirdPosToPixelPos(this.to.x,this.to.y,l.ins.ins_chessboard.tileLen),o=h.coord2d_to_isoc_to_view(u.vec2To3(t)).toVec2();this.node.position=u.vec2To3(o),this.ani&&this.ani.play()}},e.aoeEnd=function(){this.node.removeFromParent(),this.node.destroy()},i}(a))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/aoeCallBackTable.ts",["cc","./bboard.ts","./DamageInfo.ts","./chessstatus.ts"],(function(a){var e,n,t,o,c,s;return{setters:[function(a){e=a.cclegacy},function(a){n=a.bboard},function(a){t=a.DamageInfo,o=a.DamageInfoTag,c=a.DamageSource},function(a){s=a.chessstatus}],execute:function(){e._RF.push({},"b5b65Fy9KJDUKx6ClD8ojOW","aoeCallBackTable",void 0),a("aoeCallBackTable",(function(){})).onAoeTick_damage=function(a){var e=a.to,i=n.ins.getChessOnTile(e);if(i){var r=i.getComponent(s);if(1!=(a.teamtype==r.teamtype)){var f=new t(a.launcher,i,[o.directDamage],c.magic,a.propOnDamageInfo.atk,a.propOnDamageInfo.critRate,a.propOnDamageInfo.critPercent,a.buffPassToDefender,[]);n.ins.ins_damageMng.addDamage(f)}}},e._RF.pop()}}}));

System.register("chunks:///_virtual/aoeInitTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./aoe.ts","./aoeCallBackTable.ts"],(function(e){var n,t,a,o;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy},function(e){a=e.aoeLocate},function(e){o=e.aoeCallBackTable}],execute:function(){t._RF.push({},"6f811ayACNFb414u28i4+eV","aoeInitTable",void 0);var i=e("aoeDefined",function(e){return e["黑水01"]="黑水01",e}({}));e("aoeInitTable",function(){function e(){}return e.aoeInit_黑水01=function(e){e.tickTime=.7,e.maxTickTimes=3,e.locate=a.ground,e.onAoeTick=o.onAoeTick_damage},n(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(i.黑水01,this.aoeInit_黑水01),e}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/array_ext.ts",["cc"],(function(){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"3961aldc+hJDrzAURYgVla/","array_ext",void 0),Array.prototype.remove=function(t){if("function"==typeof t)for(var r=this.length-1;r>-1;--r)t(this[r],r,this)&&this.splice(r,1);return this},Array.prototype.removeAt=function(t){return t>=0&&t<this.length&&this.splice(t,1),this},t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var i,e,u,t,n,a,r;return{setters:[function(o){i=o.createClass},function(o){e=o.cclegacy,u=o.AudioClip,t=o.resources,n=o.Node,a=o.director,r=o.AudioSource}],execute:function(){e._RF.push({},"ef448tVK+BEiK4pl50KLm/W","AudioMgr",void 0),o("AudioMgr",function(){function o(){this._audioSourceOneShot=void 0,this._audioSourceBGM=void 0;var o=new n;o.name="__audioMgr__";var i=new n;i.name="__audioOneshot__",i.parent=o;var e=new n;e.name="__audioBgm__",e.parent=o,a.getScene().addChild(o),a.addPersistRootNode(o),this._audioSourceOneShot=i.addComponent(r),this._audioSourceOneShot.loop=!1,this._audioSourceBGM=e.addComponent(r),this._audioSourceBGM.loop=!0}var e=o.prototype;return e.playOneShot=function(o,i){var e=this;void 0===i&&(i=.1),o instanceof u?(this._audioSourceOneShot.volume=i,this._audioSourceOneShot.playOneShot(o,i)):t.load(o,(function(o,u){o?console.log(o):e._audioSourceOneShot.playOneShot(u,i)}))},e.play=function(o,i){var e=this;void 0===i&&(i=.1),o instanceof u?(this._audioSourceBGM.stop(),this._audioSourceBGM.clip=o,this._audioSourceBGM.play(),this._audioSourceBGM.volume=i):t.load(o,(function(o,u){o?console.log(o):(e._audioSourceBGM.stop(),e._audioSourceBGM.clip=u,e._audioSourceBGM.play(),e._audioSourceBGM.volume=i)}))},e.stop=function(){this._audioSourceBGM.stop()},e.pause=function(){this._audioSourceBGM.pause()},e.resume=function(){this._audioSourceBGM.play()},i(o,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new o),this._inst}}]),o}())._inst=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/audioTable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var _,a;return{setters:[function(e){_=e.createClass},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"c1bb7zc8wxDSJ/N2DZTWwyw","audioTable",void 0);var i=e("audioItemDefine",function(e){return e["男子_攻击"]="男子_攻击",e["女子_攻击"]="女子_攻击",e["器械_攻击"]="器械_攻击",e["野兽_攻击"]="野兽_攻击",e["弓箭_命中"]="弓箭_命中",e["近战_命中"]="近战_命中",e["魔法_命中"]="魔法_命中",e["获得_治疗"]="获得_治疗",e["棋子_退场"]="棋子_退场",e["按钮_战斗开始"]="按钮_战斗开始",e["bgm_狮王之傲"]="bgm_狮王之傲",e["bgm_战斗01"]="bgm_战斗01",e["棋子_落下"]="棋子_落下",e.btn_click="btn_click",e.eff_mining="eff_mining",e}({}));e("audioTable",function(){function e(){}return _(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(i.eff_mining,{name:i.eff_mining,path:"audio/",file:"mininghita",des:"打铁,wav文件，音效"}),e.set(i.btn_click,{name:i.btn_click,path:"audio/",file:"menu_click_06",des:"按钮,wav文件，音效"}),e.set(i.野兽_攻击,{name:i.野兽_攻击,path:"audio/",file:"spear_gob_atk_01",des:"野兽_攻击,wav文件，音效"}),e.set(i.男子_攻击,{name:i.男子_攻击,path:"audio/",file:"b_knight_atk_01",des:"男子_攻击,wav文件，音效"}),e.set(i.女子_攻击,{name:i.女子_攻击,path:"audio/",file:"princess_archer_atk_vo_03",des:"女子_攻击,wav文件，音效"}),e.set(i.器械_攻击,{name:i.器械_攻击,path:"audio/",file:"bomb_skeleton_atk_04",des:"器械_攻击,wav文件，音效"}),e.set(i.弓箭_命中,{name:i.弓箭_命中,path:"audio/",file:"arrow_hit_13",des:"弓箭，命中wav文件，音效"}),e.set(i.近战_命中,{name:i.近战_命中,path:"audio/",file:"footman_attack_hit_01",des:"近战，命中wav文件，音效"}),e.set(i.获得_治疗,{name:i.获得_治疗,path:"audio/",file:"heal_low_base",des:"获得治疗，wav文件，音效"}),e.set(i.棋子_退场,{name:i.棋子_退场,path:"audio/",file:"skeleton_bomb_explo_01",des:"棋子退场，wav文件，音效"}),e.set(i.按钮_战斗开始,{name:i.按钮_战斗开始,path:"audio/",file:"g_hornofecheyakee",des:"按钮，开始战斗，wav文件，音效"}),e.set(i.bgm_狮王之傲,{name:i.bgm_狮王之傲,path:"audio/",file:"mus_92_darkmoondance_lionspride_h",des:"bgm "}),e.set(i.bgm_战斗01,{name:i.bgm_战斗01,path:"audio/",file:"battle01",des:"bgm "}),e.set(i.魔法_命中,{name:i.魔法_命中,path:"audio/",file:"fireball_hit_01",des:"魔法，攻击，音效 "}),e.set(i.棋子_落下,{name:i.棋子_落下,path:"audio/",file:"sound 32",des:"棋子，落下，音效 "}),e}}]),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/bboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./uitranArea.ts","./toolFunc.ts","./toolPath.ts","./DamageManager.ts","./timelineMng.ts","./gameClientEvent.ts","./aoe.ts","./bullet.ts","./chessaction.ts","./chessInit.ts","./chessstatus.ts","./gameRuntimeData.ts","./gameStorageData.ts","./AudioMgr.ts","./chessboard.ts","./feedbackEffect.ts","./obj_collection.ts","./poplabel.ts","./commitPanel.ts","./ui_chess_info.ts","./collectionBar.ts","./audioTable.ts","./chessInitTable.ts","./prefabTable.ts"],(function(e){var t,n,r,o,i,a,s,c,u,l,p,f,d,h,g,b,m,v,y,C,k,w,R,I,T,x,_,P,D,N,z,A,M,S,E,G,L,B,V,F,O,j,H,K;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Node,l=e.director,p=e.Component,f=e.instantiate,d=e.UITransform},function(e){h=e.resLoader},function(e){g=e.uitranArea},function(e){b=e.toolFunc},function(e){m=e.toolPath},function(e){v=e.DamageManager},function(e){y=e.timelineMng},function(e){C=e.gameClientEvent},function(e){k=e.aoe,w=e.aoeLocate},function(e){R=e.bullet,I=e.bulletLocate},function(e){T=e.chessaction},function(e){x=e.chessInit},function(e){_=e.teamType,P=e.chessstatus},function(e){D=e.gameRuntimeData},function(e){N=e.gameStorageData,z=e.dataStorageKey},function(e){A=e.AudioMgr},function(e){M=e.chessboard},function(e){S=e.feedbackEffect},function(e){E=e.obj_collection},function(e){G=e.poplabel},function(e){L=e.commitPanel},function(e){B=e.ui_chess_info},function(e){V=e.collectionBar},function(e){F=e.audioItemDefine,O=e.audioTable},function(e){j=e.chessDefined},function(e){H=e.prefabTable,K=e.prefabDefine}],execute:function(){var U,q,J,Z,Q,W,X,Y,$,ee,te,ne,re,oe,ie,ae,se,ce,ue,le,pe,fe,de,he,ge,be;s._RF.push({},"a91cbzr0T9AuJjktK3UeRKZ","bboard",void 0);var me=c.ccclass,ve=(c.executeInEditMode,c.property);e("bboard",(U=me("bboard"),q=ve(M),J=ve(v),Z=ve(y),Q=ve(u),W=ve(u),X=ve(u),Y=ve(u),$=ve(V),ee=ve(V),te=ve(V),ne=ve(u),U(((be=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"ins_chessboard",ie,o(t)),r(t,"ins_damageMng",ae,o(t)),r(t,"ins_timelineMng",se,o(t)),r(t,"uiRoot",ce,o(t)),r(t,"chessRoot",ue,o(t)),r(t,"groundRoot",le,o(t)),r(t,"skyRoot",pe,o(t)),r(t,"goldbar",fe,o(t)),r(t,"diabar",de,o(t)),r(t,"packbar",he,o(t)),r(t,"uianimate",ge,o(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){t.ins&&t.ins.node.destroy(),t.ins=this},s.start=function(){},s.onEnable=function(){var e=this;t.ins.goldbar.initVal(N.Ins.numGet(z.gold)),t.ins.diabar.initVal(N.Ins.numGet(z.diammon)),t.ins.packbar.initVal(N.Ins.numGet(z.pack)),l.on(C.eve_localDataRefresh,(function(){t.ins.goldbar.initVal(N.Ins.numGet(z.gold)),t.ins.diabar.initVal(N.Ins.numGet(z.diammon)),t.ins.packbar.initVal(N.Ins.numGet(z.pack))}),this),l.on(C.eve_buttonClick,(function(){e.playAudio(F.btn_click)}),this)},s.onDisable=function(){l.targetOff(this)},s.update=function(e){},s.popCommitPanel=function(){var e=i(a().mark((function e(t,n,r){var o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=H.ins.get(K.确认面板),e.next=3,h.Ins.getPrefab(o.file,o.path);case 3:i=e.sent,(s=f(i)).parent=this.uiRoot,s.getComponent(L).initCommit(t,n,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),s.popChessInfo=function(){var e=i(a().mark((function e(t){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H.ins.get(K.棋子信息面板),e.next=3,h.Ins.getPrefab(n.file,n.path);case 3:r=e.sent,(o=f(r)).parent=this.uiRoot,o.getComponent(B).init(t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.addCollectionItem=function(){var e=i(a().mark((function e(t,n,r,o){var i,s,c,u,l,p,g=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=H.ins.get(K.收集物),e.next=3,h.Ins.getPrefab(i.file,i.path);case 3:s=e.sent,c=f(s),u=void 0,"gold"==r&&(u=this.goldbar.gold_s.node),"diamond"==r&&(u=this.diabar.gold_s.node),"pack"==r&&(u=this.packbar.gold_s.node),l=void 0,u&&(l=this.uianimate.getComponent(d).convertToNodeSpaceAR(u.worldPosition)),p=this.uianimate.getComponent(d).convertToNodeSpaceAR(t),c.getComponent(E).init(b.vec3To2(p),b.vec3To2(l),r,(function(){o&&o(),"gold"==r&&(D.deltaGold(n),g.goldbar.addCollect(n)),"diamond"==r&&(D.deltaDia(n),g.diabar.addCollect(n)),"pack"==r&&(D.deltaPack(n),g.packbar.addCollect(n))})),c.parent=this.uianimate;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),s.getChessTar=function(e,t,n){var r;return n==_.npc&&(j.剑士01,r||(r=this.getNearestPlayer(t))||(r=this.getNearestHolyTower(t))),n!=_.player&&n!=_.holyTower||(j.剑士01,r||(r=this.getNearestNpc(t))),r},s.getNearestNpc=function(e){var t,n=this.chessRoot.getComponentsInChildren(P);n=n.filter((function(e){return e.teamtype==_.npc}));for(var r=99999,o=0;o<n.length;o++){var i=n[o],a=i.getComponent(T).posgird,s=m.circleDis(e,a);s<r&&(r=s,t=i.node)}return t},s.getNearestPlayer=function(e){var t,n=this.chessRoot.getComponentsInChildren(P);n=n.filter((function(e){return e.teamtype==_.player}));for(var r=99999,o=0;o<n.length;o++){var i=n[o],a=i.getComponent(T).posgird,s=m.circleDis(e,a);s<r&&(r=s,t=i.node)}return t},s.getNearestHolyTower=function(e){var t,n=this.chessRoot.getComponentsInChildren(P);n=n.filter((function(e){return e.teamtype==_.holyTower}));for(var r=99999,o=0;o<n.length;o++){var i=n[o],a=i.getComponent(T).posgird,s=m.circleDis(e,a);s<r&&(r=s,t=i.node)}return t},s.playBgm=function(e){var t=O.ins.get(e);t?A.inst.play(t.path+t.file):console.warn("没有定义 音效",e)},s.playAudio=function(e){var t=O.ins.get(e);t?A.inst.playOneShot(t.path+t.file):console.warn("没有定义 音效",e)},s.getChessOnTile=function(e){for(var t=this.chessRoot.getComponentsInChildren(T),n=0;n<t.length;n++){var r=t[n];if(r.posgird.equals(e))return r.node}return null},s.addFeedEffect=function(){var e=i(a().mark((function e(t,n,r){var o,i,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=H.ins.get(n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.Ins.getPrefab(o.file,o.path);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:return s=f(i),c=s.getComponent(S),e.next=12,c.initEff(r);case 12:u=this.skyRoot.getComponent(d).convertToNodeSpaceAR(b.vec2To3(t)),s.position=u,this.skyRoot.addChild(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),s.PopUpNumberOnCharacter=function(){var e=i(a().mark((function e(t,n,r,o){var i,s,c,u,l,p,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),void 0===o&&(o=!1),i=H.ins.get(K.弹出数字),e.next=5,h.Ins.getPrefab(i.file,i.path);case 5:s=e.sent,(c=f(s)).parent=this.uiRoot,u=t.worldPosition.clone(),(l=t.getComponent(T))&&l.feedbackNode&&(p=l.feedbackNode.getComponent(g))&&(u=b.vec2To3(p.areaCenterRandom())),m=this.uiRoot.getComponent(d).convertToNodeSpaceAR(u),c.getComponent(G).popDamage(n,o,r,m);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),s.createChess=function(){var e=i(a().mark((function e(n,r,o){var i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getChessOnTile(o)){e.next=3;break}return console.warn("位置已经被其他棋子占用",o),e.abrupt("return",!1);case 3:if(0!=m.isInMap(o,t.ins.ins_chessboard.oneSideMapLen)){e.next=6;break}return console.warn("位置在棋盘外",o),e.abrupt("return",!1);case 6:if(i=H.ins.get(K.棋子)){e.next=10;break}return console.warn("找不到资源-",K.棋子),e.abrupt("return",!1);case 10:return e.next=12,h.Ins.getPrefab(i.file,i.path);case 12:return s=e.sent,(c=f(s)).getComponent(x).initChess(r,n,o),c.parent=this.chessRoot,e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),s.createAoe=function(){var e=i(a().mark((function e(t,n,r,o,i,s,c){var u,l,p,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=H.ins.get(t),e.next=3,h.Ins.getPrefab(u.file,u.path);case 3:l=e.sent,p=f(l),(d=p.getComponent(k)).initAoe(n,r,o,i,s,c),d.locate==w.sky?p.parent=this.skyRoot:p.parent=this.groundRoot;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,i,a,s){return e.apply(this,arguments)}}(),s.createBullet=function(){var e=i(a().mark((function e(t,n,r,o,i,s,c,u){var l,p,d,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=H.ins.get(t),e.next=3,h.Ins.getPrefab(l.file,l.path);case 3:p=e.sent,d=f(p),(g=d.getComponent(R)).initBullet(n,r,o,i,s,c,u),g.locate==I.sky?d.parent=this.skyRoot:d.parent=this.groundRoot;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,i,a,s,c){return e.apply(this,arguments)}}(),t}(p)).ins=void 0,ie=t((oe=be).prototype,"ins_chessboard",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(oe.prototype,"ins_damageMng",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(oe.prototype,"ins_timelineMng",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(oe.prototype,"uiRoot",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(oe.prototype,"chessRoot",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(oe.prototype,"groundRoot",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(oe.prototype,"skyRoot",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(oe.prototype,"goldbar",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(oe.prototype,"diabar",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(oe.prototype,"packbar",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(oe.prototype,"uianimate",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=oe))||re));s._RF.pop()}}}));

System.register("chunks:///_virtual/bezierHelp.ts",["cc"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.cclegacy,n=e.math,r=e.v3,i=e.tween}],execute:function(){t._RF.push({},"1a5faV5RHZIwLlPLBnzvDa4","bezierHelp",void 0);e("bezierHelp",function(){function e(){}return e.twoBezier=function(e,t,i,c){var o=(1-(e=n.clamp(e,0,1)))*(1-e)*t.x+2*e*(1-e)*i.x+e*e*c.x,u=(1-e)*(1-e)*t.y+2*e*(1-e)*i.y+e*e*c.y,a=(1-e)*(1-e)*t.z+2*e*(1-e)*i.z+e*e*c.z;return r(o,u,a)},e.bezierTo=function(t,n,r,c,o,u,a){return(u=u||Object.create(null)).onUpdate=function(n,i){if(t&&0!=t.isValid){var u=e.twoBezier(n.t,r,c,o),z=e.twoBezier(n.t+.15,r,c,o).subtract(u).normalize();a?a(n.t,z,u):t.position=u}},i({t:0}).to(n,{t:1},u)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/buffCallBackTable.ts",["cc","./uitranArea.ts","./toolFunc.ts","./bboard.ts","./DamageInfo.ts","./chessaction.ts","./chessstatus.ts","./audioTable.ts","./clipTable.ts","./prefabTable.ts"],(function(e){var a,n,o,i,t,f,c,r,u,s,d,l;return{setters:[function(e){a=e.cclegacy},function(e){n=e.uitranArea},function(e){o=e.toolFunc},function(e){i=e.bboard},function(e){t=e.DamageSource,f=e.DamageInfo,c=e.DamageInfoTag},function(e){r=e.chessaction},function(e){u=e.chessstatus},function(e){s=e.audioItemDefine},function(e){d=e.clipItemDefine},function(e){l=e.prefabDefine}],execute:function(){a._RF.push({},"040d7/gC1VBqoTEHwu8+fo4","buffCallBackTable",void 0);var g=e("buffCallBackTable",(function(){}));g.onBuffOwnerBekilled_playDeadExitEff=function(e,a){var n=e.owner;if(n){var t=o.vec3To2(n.worldPosition);i.ins.addFeedEffect(t,l.退场烟雾,d.退场特效),i.ins.playAudio(s.棋子_退场)}},g.onBuffOwnerGetDamage_playSkarkEff=function(e,a){var f=e.owner;if(f){var c=o.vec3To2(f.worldPosition);if(0==a.isHeal()){c=f.getComponent(r).feedbackNode.getComponent(n).areaCenterRandom();var u=[d.打击特效01,d.打击特效02],g=o.randArrayIndex(u);i.ins.addFeedEffect(c,l.命中闪光,u[g]),a.damageSource==t.bow?i.ins.playAudio(s.弓箭_命中):a.damageSource==t.sword?i.ins.playAudio(s.近战_命中):a.damageSource==t.magic&&i.ins.playAudio(s.魔法_命中)}else i.ins.addFeedEffect(c,l.治疗闪光,d.治疗特效),i.ins.playAudio(s.获得_治疗)}},g.onBuffTick_damage_10hp=function(e){var a=e.owner;if(a&&a.getComponent(u)){var n=e.propOnDamageInfo,o=new f(void 0,a,[c.periodDamage],t.magic,10,n.critRate,n.critPercent,[],[]);i.ins.ins_damageMng.addDamage(o)}},a._RF.pop()}}}));

System.register("chunks:///_virtual/buffInitTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./objpropty.ts","./objstate.ts","./buffCallBackTable.ts","./spriteframeTable.ts"],(function(e){var o,f,n,i,t,u;return{setters:[function(e){o=e.createClass},function(e){f=e.cclegacy},function(e){n=e.objpropty},function(e){i=e.objstate},function(e){t=e.buffCallBackTable},function(e){u=e.spriteframeDefine}],execute:function(){f._RF.push({},"e7ef0gZkIRGhJkYQ6va3GzZ","buffInitTable",void 0);var r=e("buffDefined",function(e){return e["灼烧01"]="灼烧01",e["攻击力强化01"]="攻击力强化01",e["系统_反馈特效"]="系统_反馈特效",e}({})),a=e("buffInitTable",function(){function e(){}return o(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(r.灼烧01,this.buffInit_灼烧01),e.set(r.攻击力强化01,this.攻击力强化01),e.set(r.系统_反馈特效,this.buffInit_反馈特效),e}}]),e}());a.攻击力强化01=function(e){e.name="增强攻击力",e.des="按百分比增强100%",e.iconRes_id=u.buff_系统默认,e.isShowUI=!0,e.tickTime=void 0,e.duration=Number.MAX_SAFE_INTEGER,e.propModPlus=n.zero;var o=n.zero;o.atk=1,e.propModTimes=o,e.stateMod=i.origin,e.onBuffStart=void 0,e.onBuffTick=void 0,e.onBuffReAdd=void 0,e.onBuffEnd=void 0,e.onBuffOwnerCreateDamage=void 0,e.onBuffOwnerGetDamage=void 0,e.onBuffOwnerKillOther=void 0,e.onBuffOwnerBekilled=void 0},a.buffInit_反馈特效=function(e){e.name="触发系统反馈特效",e.des="系统buff，对象受伤/治疗/死亡时，播放通用特效",e.iconRes_id=u.buff_系统默认,e.isShowUI=!1,e.tickTime=void 0,e.duration=Number.MAX_SAFE_INTEGER,e.propModPlus=n.zero,e.propModTimes=n.zero,e.stateMod=i.origin,e.onBuffStart=void 0,e.onBuffTick=void 0,e.onBuffReAdd=void 0,e.onBuffEnd=void 0,e.onBuffOwnerCreateDamage=void 0,e.onBuffOwnerGetDamage=t.onBuffOwnerGetDamage_playSkarkEff,e.onBuffOwnerKillOther=void 0,e.onBuffOwnerBekilled=t.onBuffOwnerBekilled_playDeadExitEff},a.buffInit_灼烧01=function(e){e.name="灼烧",e.des="间隔一段时间后造成伤害",e.iconRes_id=u.buff_系统默认,e.isShowUI=!0,e.tickTime=1,e.duration=3,e.propModPlus=n.zero,e.propModTimes=n.zero,e.stateMod=i.origin,e.onBuffStart=void 0,e.onBuffTick=t.onBuffTick_damage_10hp,e.onBuffReAdd=void 0,e.onBuffEnd=void 0,e.onBuffOwnerCreateDamage=void 0,e.onBuffOwnerGetDamage=void 0,e.onBuffOwnerKillOther=void 0,e.onBuffOwnerBekilled=void 0},f._RF.pop()}}}));

System.register("chunks:///_virtual/bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bezierHelp.ts","./toolFunc.ts","./toolGird.ts","./toolIsometric.ts","./bboard.ts","./bulletInitTable.ts","./chessstatus.ts","./objpropty.ts"],(function(t){var o,i,n,e,s,r,l,u,a,c,d,h,f,b,p,v,y;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Animation,s=t.v2,r=t.Vec3,l=t.v3,u=t.Component},function(t){a=t.bezierHelp},function(t){c=t.toolFunc},function(t){d=t.toolGird},function(t){h=t.toolIsometric},function(t){f=t.bboard},function(t){b=t.bulletDefined,p=t.bulletInitTable},function(t){v=t.teamType},function(t){y=t.objpropty}],execute:function(){var m;i._RF.push({},"8dfb6MDJ8JKAqn5VEW06+qQ","bullet",void 0);var g=n.ccclass;n.property,t("bulletLocate",function(t){return t[t.ground=1]="ground",t[t.sky=2]="sky",t}({})),t("bullet",g("bullet")(m=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).onBulletHit=void 0,o.duration=.8,o.castHeight=0,o.locate=void 0,o.launcher=void 0,o.from=void 0,o.to=void 0,o.teamtype=void 0,o.propOnDamageInfo=void 0,o.buffPassToDefender=void 0,o.ani=void 0,o}o(i,t);var n=i.prototype;return n.onLoad=function(){this.ani=this.getComponent(e)},n.start=function(){this.bulletStart()},n.onbtndebug=function(){var t=s(0,0),o=s(1,0);this.initBullet(b.石子01,void 0,t,o,v.player,y.default,[]),this.bulletStart()},n.update=function(t){},n.initBullet=function(t,o,i,n,e,s,r){p.ins.get(t)(this),this.launcher=o,this.from=i,this.to=n,this.teamtype=e,this.propOnDamageInfo=s,this.buffPassToDefender=r},n.bulletStart=function(){var t=this;if(this.from&&this.to){var o=r.ZERO.clone(),i=r.ZERO.clone(),n=this.from,e=this.to,s=d.GirdPosToPixelPos(n.x,n.y,f.ins.ins_chessboard.tileLen),l=d.GirdPosToPixelPos(e.x,e.y,f.ins.ins_chessboard.tileLen);o.set(s.x,s.y,this.castHeight),i.set(l.x,l.y,0),this.buildLaunchTW(o,i).start(),this.ani&&this.ani.play(),this.scheduleOnce((function(){t.bulletEnd()}),this.duration)}},n.bulletEnd=function(){this.onBulletHit&&this.onBulletHit(this),this.node.removeFromParent(),this.node.destroy()},n.buildLaunchTW=function(t,o,i){var n=this;void 0===i&&(i=100);var e=t,s=o,r=l(0,0,i+Math.max(t.z,o.z)),u=o.clone().subtract(t).multiplyScalar(.5),d=t.clone().add(u).add(r);return a.bezierTo(this.node,this.duration,e,d,s,void 0,(function(t,o,i){var e=h.coord2d_to_isoc_to_view(i).toVec2();n.node.position=c.vec2To3(e)}))},i}(u))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/bulletCallBackTable.ts",["cc","./bboard.ts","./DamageInfo.ts","./chessstatus.ts"],(function(a){var e,t,n,o,c,s;return{setters:[function(a){e=a.cclegacy},function(a){t=a.bboard},function(a){n=a.DamageInfo,o=a.DamageInfoTag,c=a.DamageSource},function(a){s=a.chessstatus}],execute:function(){e._RF.push({},"98b89H0q3xN+6kkRnJAJHzY","bulletCallBackTable",void 0),a("bulletCallBackTable",(function(){})).onBulletHit_damage=function(a){var e=a.to,r=t.ins.getChessOnTile(e);if(r){var u=r.getComponent(s);if(1!=(a.teamtype==u.teamtype)){var i=new n(a.launcher,r,[o.directDamage],c.bow,a.propOnDamageInfo.atk,a.propOnDamageInfo.critRate,a.propOnDamageInfo.critPercent,a.buffPassToDefender,[]);t.ins.ins_damageMng.addDamage(i)}}},e._RF.pop()}}}));

System.register("chunks:///_virtual/bulletInitTable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f4773RcxUpFe7fJK9e9UQb5","bulletInitTable",void 0);var l=t("bulletDefined",function(t){return t["石子01"]="石子01",t}({}));t("bulletInitTable",function(){function t(){}return e(t,null,[{key:"ins",get:function(){var t=new Map;return t.set(l.石子01,this.buffInit_石子01),t}}]),t}()).buffInit_石子01=function(t){t.castHeight=60,t.duration=.69,t.locate=bulletLocate.sky,t.onBulletHit=bulletCallBackTable.onBulletHit_damage},n._RF.pop()}}}));

System.register("chunks:///_virtual/chessaction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./bezierHelp.ts","./TwFeedback.ts","./toolDirection.ts","./toolFunc.ts","./toolGird.ts","./toolIsometric.ts","./toolPath.ts","./bboard.ts","./audioTable.ts","./clipTable.ts","./skillCallBackTable.ts"],(function(i){var t,e,o,n,s,r,c,a,l,d,u,h,p,f,_,v,b,T,g,y,k,m,P,w,x,D,G,A;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized,s=i.asyncToGenerator,r=i.regeneratorRuntime},function(i){c=i.cclegacy,a=i._decorator,l=i.Vec2,d=i.Enum,u=i.AnimationComponent,h=i.Node,p=i.v3,f=i.v2,_=i.Component},function(i){v=i.resLoader},function(i){b=i.bezierHelp},function(i){T=i.TwFeedback},function(i){g=i.DIRECTION,y=i.toolDirection},function(i){k=i.toolFunc},function(i){m=i.toolGird},function(i){P=i.toolIsometric},function(i){w=i.toolPath},function(i){x=i.bboard},function(i){D=i.audioItemDefine},function(i){G=i.clipTable},function(i){A=i.skillCallBackTable}],execute:function(){var I,C,L,F,E,M,N,R,z,H,O;c._RF.push({},"67048pvgjRBMrXAMe+GTgto","chessaction",void 0);var S=a.ccclass,U=a.property,V=i("ChaAniType",function(i){return i[i["攻击"]=1]="攻击",i[i["空闲"]=2]="空闲",i[i["受伤"]=3]="受伤",i[i["移动"]=4]="移动",i[i["治疗"]=5]="治疗",i[i["死亡"]=6]="死亡",i}({})),W=(i("ChaAniTypeString",["","攻击","空闲","受伤","移动","治疗","死亡"]),i("coordMode",function(i){return i[i.rect=1]="rect",i[i.isoc=2]="isoc",i}({})));i("chessChacterGender",function(i){return i["男"]="男",i["女"]="女",i["器械"]="器械",i["野兽"]="野兽",i}({})),i("chessaction",(I=S("chessaction"),C=U(l),L=U({type:d(W)}),F=U(u),E=U(h),I((R=t((N=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,o(t,"posgird",R,n(t)),o(t,"coordM",z,n(t)),o(t,"anicom",H,n(t)),o(t,"feedbackNode",O,n(t)),t.chessGender=void 0,t._tw_act=void 0,t.skilldef=void 0,t.skillCb=void 0,t.skillExtArea=[],t.lastTarget=void 0,t}e(t,i);var c=t.prototype;return c.start=function(){},c.onFocusInEditor=function(){this.syncPos(this.posgird)},c.update=function(i){},c.initAnimate=function(){var i=s(r().mark((function i(t,e){var o,n,s,c;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.chessGender=e,!this.anicom){i.next=14;break}this.anicom.clips=[],o=0;case 4:if(!(o<t.length)){i.next=14;break}return n=t[o],s=G.ins.get(n),i.next=9,v.Ins.getClip(s.file,s.path);case 9:c=i.sent,this.anicom.addClip(c);case 11:o++,i.next=4;break;case 14:case"end":return i.stop()}}),i,this)})));return function(t,e){return i.apply(this,arguments)}}(),c.syncPos=function(i){this.coordM==W.isoc?this.setpos_isoc(i):this.coordM==W.rect&&this.setpos_rect(i)},c.syncPos_eff=function(i){this.posgird?this.setpos_isoc_eff(this.posgird,i):this.syncPos(i)},c.setpos_isoc_eff=function(i,t){var e=this,o=m.GirdPosToPixelPos(i.x,i.y,x.ins.ins_chessboard.tileLen),n=m.GirdPosToPixelPos(t.x,t.y,x.ins.ins_chessboard.tileLen),s=k.vec2To3(o),r=k.vec2To3(n),c=k.vec2To3(o),a=k.vec2To3(n),l=p(0,0,100),d=r.clone().subtract(s).multiplyScalar(.5),u=s.clone().add(d).add(l);b.bezierTo(this.node,.1,c,u,a,void 0,(function(i,t,o){var n=P.coord2d_to_isoc_to_view(o).toVec2();e.node.position=k.vec2To3(n)})).call((function(){x.ins.playAudio(D.棋子_落下)})).start(),this.posgird=t},c.setpos_rect=function(i){var t=m.GirdPosToPixelPos(i.x,i.y,x.ins.ins_chessboard.tileLen);this.node.position=k.vec2To3(t),this.posgird=i},c.setpos_isoc=function(i){var t=m.GirdPosToPixelPos(i.x,i.y,x.ins.ins_chessboard.tileLen),e=P.coord2d_to_isoc_to_view(k.vec2To3(t)).toVec2();this.node.position=k.vec2To3(e),this.posgird=i},c.playFeedback=function(i){var t=this;if(!this._tw_act){var e=this.feedbackNode;e||(e=this.node),i==V.受伤&&(this._tw_act=T.hurt(e,.1),this._tw_act.call((function(){t._tw_act=void 0})).start()),i==V.治疗&&(this._tw_act=T.heal(e,.1),this._tw_act.call((function(){t._tw_act=void 0})).start())}},c.playAni=function(i,t){if(this.anicom){var e=g.RIGHT;if(t){var o=this.posgird,n=t;e=y.getVec2Direction8(o,n)}else;(e=y.directionAdd(e))!=g.RIGHT&&e!=g.DOWN&&e!=g.LEFT&&e!=g.UP||(e=y.directionAdd(e));var s="";e!=g.RIGHT_UP&&e!=g.LEFT_UP||(s="rt"),e!=g.RIGHT_DOWN&&e!=g.LEFT_DOWN||(s="rb");var r=p(1,1,1);e==g.RIGHT_UP||g.RIGHT_DOWN,e!=g.LEFT_UP&&e!=g.LEFT_DOWN||(r.x=-1);var c="";i==V.攻击&&(c="atk");var a=c+"_"+s,l=this.anicom.clips.find((function(i){return i.name.includes(a)}));l?(this.anicom.node.scale=r,this.anicom.play(l.name)):console.warn("node",this.node.name,"没有找到包含",a,"的动画clip")}else console.warn("播放序列帧 却没有动画组件")},c.pathFindTo=function(i,t){if(void 0===t&&(t=1),!(w.circleDis(this.posgird,i)<=t)){var e=w.getNeighborTile(this.posgird);return e=e.filter((function(i){return 0!=w.isInMap(i,x.ins.ins_chessboard.oneSideMapLen)&&!x.ins.getChessOnTile(i)})),w.nearestTile(i,e)}console.warn("已经抵达")},c.initSkill=function(i,t){this.skillCb=A.ins.get(i),this.skillExtArea=t,this.skilldef=i},c.skilluse=function(i){this.skillCb&&this.skillCb(this.node,i)},c.skillArea=function(i){var t=y.getVec2Direction8(this.posgird,i);this.posgird.equals(i)&&(t=g.UP);for(var e=[i],o=0;o<this.skillExtArea.length;o++){var n=this.skillExtArea[o],s=w.circleDis(f(0,0),n),r=y.getVec2Direction8(f(0,0),n),c=y.directionAdd(r,t),a=y.stepTowardDir(f(0,0),c,s),l=i.clone().add(a);w.isInMap(l,x.ins.ins_chessboard.oneSideMapLen)&&e.push(l)}return e},t}(_)).prototype,"posgird",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f()}}),z=t(N.prototype,"coordM",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.isoc}}),H=t(N.prototype,"anicom",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(N.prototype,"feedbackNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=N))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/chessAi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessAiCallBackTable.ts"],(function(t){var n,e,o,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,s=t.Component},function(t){c=t.chessAiCallBackTable}],execute:function(){var i;e._RF.push({},"640deqRfwhJhI5ux+L6ujBU","chessAi",void 0);var r=o.ccclass;o.property,t("chessAi",r("chessAi")(i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(n=t.call.apply(t,[this].concat(o))||this).doAICb=void 0,n}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.initAI=function(t){this.doAICb=c.ins.get(t)},o.doAI=function(){this.doAICb&&this.doAICb(this.node)},e}(s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/chessAiCallBackTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts","./toolPath.ts","./bboard.ts","./chessaction.ts","./chessInit.ts","./chessstatus.ts"],(function(t){var e,s,n,a,i,o,c,l;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy},function(t){n=t.toolFunc},function(t){a=t.toolPath},function(t){i=t.bboard},function(t){o=t.chessaction},function(t){c=t.chessInit},function(t){l=t.chessstatus}],execute:function(){s._RF.push({},"841725O50ZIsZRvGtsgxQrK","chessAiCallBackTable",void 0);var r=t("chessAiPlanDefine",function(t){return t.ai_default="ai_default",t}({}));t("chessAiCallBackTable",function(){function t(){}return e(t,null,[{key:"ins",get:function(){var t=new Map;return t.set(r.ai_default,this.doAi_default),t}}]),t}()).doAi_default=function(t){var e=t.getComponent(o);if(e){var s=t.getComponent(c);if(s){var r=t.getComponent(l);if(r){var u;if(n.isValidCom(e.lastTarget))u=e.lastTarget.getComponent(o).node;else u=i.ins.getChessTar(s.chessDef,e.posgird,r.teamtype);if(u){var f=u.getComponent(o);if(f){var h=f.posgird,d=a.circleDis(h,e.posgird),g=r.allProperty.atkDistance;if(d<=g)1==r.status.canAttack&&(e.skilluse(e.skillArea(h)),e.lastTarget=u);else if(1==r.status.canMove){var p=e.pathFindTo(h,g);p&&e.syncPos_eff(p)}}}}}}},s._RF.pop()}}}));

System.register("chunks:///_virtual/chessboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./girddrawer.ts","./toolFunc.ts","./toolGird.ts","./toolIsometric.ts","./bboard.ts","./gameClientEvent.ts"],(function(e){var t,i,r,o,n,a,c,s,d,l,_,u,h,p,w,f,L,v,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.Node,d=e.Input,l=e.UITransform,_=e.director,u=e.v2,h=e.Color,p=e.Component},function(e){w=e.girddrawer},function(e){f=e.toolFunc},function(e){L=e.toolGird},function(e){v=e.toolIsometric},function(e){b=e.bboard},function(e){m=e.gameClientEvent}],execute:function(){var y,g,T,E,I,R,x,z,C,D,V,G,N;a._RF.push({},"ba126nDAEBIjL5XNBRWsiZC","chessboard",void 0);var M=c.ccclass,F=c.property;e("chessboard",(y=M("chessboard"),g=F(w),T=F(w),E=F(s),y((x=t((R=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"mapLen",x,o(t)),r(t,"tileLen",z,o(t)),r(t,"drawer_rect",C,o(t)),r(t,"drawer_isoc",D,o(t)),r(t,"hideRect",V,o(t)),r(t,"hideIsoc",G,o(t)),r(t,"touchLayer",N,o(t)),t}i(t,e);var a=t.prototype;return a.start=function(){this._drawall()},a.onFocusInEditor=function(){this._drawall()},a._drawall=function(){this.drawer_rect.drawNone(),1==this.hideRect||(this._drawboarder_rect(),this._drawGird_rect()),this.drawer_isoc.drawNone(),1==this.hideIsoc||(this._drawboarder_isoc(),this._drawGird_isoc())},a.update=function(e){},a.onEnable=function(){var e=this;this.touchLayer.on(d.EventType.TOUCH_END,(function(t){var i=t.touch.getUILocation(),r=e.node.getComponent(l).convertToNodeSpaceAR(f.vec2To3(i)),o=v.coord2d_raytoIsoc_to_view(f.vec3To2(r),0,b.ins.ins_chessboard.tileLen),n=L.PixelPosToGirdPos(o.x,o.y,b.ins.ins_chessboard.tileLen);_.emit(m.eve_chessboardClick,n)}),this)},a.onDisable=function(){_.targetOff(this.touchLayer)},a._drawboarder_isoc=function(){var e=u(0,0),t=this.mapLen/2,i=u(e.x-t,e.y+t),r=u(e.x+t,e.y+t),o=u(e.x+t,e.y-t),n=u(e.x-t,e.y-t),a=v.coord2d_to_isoc_to_view(f.vec2To3(i)),c=v.coord2d_to_isoc_to_view(f.vec2To3(r)),s=v.coord2d_to_isoc_to_view(f.vec2To3(o)),d=v.coord2d_to_isoc_to_view(f.vec2To3(n));this.drawer_isoc.drawRect(a.toVec2(),c.toVec2(),s.toVec2(),d.toVec2(),h.YELLOW)},a._drawboarder_rect=function(){var e=u(0,0),t=this.mapLen/2,i=u(e.x-t,e.y+t),r=u(e.x+t,e.y+t),o=u(e.x+t,e.y-t),n=u(e.x-t,e.y-t);this.drawer_rect.drawRect(i,r,o,n,h.RED)},a._drawGird_rect=function(){for(var e=this.MapTileLen,t=0;t<e+1;t++)if(0!=t&&t!=e){var i=-this.mapLen/2+t*this.tileLen,r=-this.mapLen/2,o=this.mapLen/2,n=u(r,i),a=u(o,i);this.drawer_rect.drawLine(n,a,h.RED)}for(var c=0;c<e+1;c++)if(0!=c&&c!=e){var s=-this.mapLen/2+c*this.tileLen,d=-this.mapLen/2,l=this.mapLen/2,_=u(s,d),p=u(s,l);this.drawer_rect.drawLine(_,p,h.RED)}},a._drawGird_isoc=function(){for(var e=this.MapTileLen,t=0;t<e+1;t++)if(0!=t&&t!=e){var i=-this.mapLen/2+t*this.tileLen,r=-this.mapLen/2,o=this.mapLen/2,n=v.coord2d_to_isoc_to_view(f.vec2To3(u(r,i))).toVec2(),a=v.coord2d_to_isoc_to_view(f.vec2To3(u(o,i))).toVec2();this.drawer_isoc.drawLine(n,a,h.YELLOW)}for(var c=0;c<e+1;c++)if(0!=c&&c!=e){var s=-this.mapLen/2+c*this.tileLen,d=-this.mapLen/2,l=this.mapLen/2,_=v.coord2d_to_isoc_to_view(f.vec2To3(u(s,d))).toVec2(),p=v.coord2d_to_isoc_to_view(f.vec2To3(u(s,l))).toVec2();this.drawer_rect.drawLine(_,p,h.YELLOW)}},n(t,[{key:"MapTileLen",get:function(){var e=this.mapLen/this.tileLen;return 0==Number.isInteger(e)?(console.warn("设置的地图块需要是整数"),0):e%2==0?(console.warn("设置的地图行列需要是奇数"),0):e}},{key:"oneSideMapLen",get:function(){return(this.MapTileLen-1)/2}}]),t}(p)).prototype,"mapLen",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 900}}),z=t(R.prototype,"tileLen",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),C=t(R.prototype,"drawer_rect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(R.prototype,"drawer_isoc",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(R.prototype,"hideRect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=t(R.prototype,"hideIsoc",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=t(R.prototype,"touchLayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=R))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/chessbuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./objbuff.ts","./chessstatus.ts"],(function(f){var t,n,u,e,i,s;return{setters:[function(f){t=f.inheritsLoose},function(f){n=f.cclegacy,u=f._decorator,e=f.Component},function(f){i=f.objbuff},function(f){s=f.chessstatus}],execute:function(){var o;n._RF.push({},"5db68Y8KaxJdIPEd7U2JgTw","chessbuff",void 0);var r=u.ccclass;u.property,f("chessbuff",r("chessbuff")(o=function(f){function n(){for(var t,n=arguments.length,u=new Array(n),e=0;e<n;e++)u[e]=arguments[e];return(t=f.call.apply(f,[this].concat(u))||this).buffs=[],t}t(n,f);var u=n.prototype;return u.start=function(){},u.update=function(f){this.updateBuff(f)},u.updateBuff=function(f){if(this.getComponent(s)&&1==this.getComponent(s).isAlive())for(var t=0;t<this.buffs.length;t++){var n=this.buffs[t];if(0==n.timeElapsed&&n.onBuffStart&&n.onBuffStart(n),n.timeElapsed+=f,n.tickTime>0&&null!=n.onBuffTick){var u=n.tickTime+n.tickTime*n.ticked;n.timeElapsed>u&&(n.onBuffTick(n),n.ticked+=1)}n.duration<=n.timeElapsed&&(null!=n.onBuffEnd&&n.onBuffEnd(n),this.buffs.removeAt(t))}},u.addBuffArr=function(f,t,n){for(var u=0;u<f.length;u++){var e=f[u],s=new i(e,this.node,t,n);this.addBuff(s)}},u.addBuff=function(f){var t=this.findBuff(f.buffdef);t?t.onBuffReAdd&&t.onBuffReAdd(t):this.buffs.push(f)},u.cleanBuff=function(f){this.buffs.remove((function(t){return t.buffdef==f}))},u.findBuff=function(f){return this.buffs.find((function(t){return t.buffdef==f}))},n}(e))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/chessInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessaction.ts","./chessstatus.ts","./resLoader.ts","./chessInitTable.ts","./spriteframeTable.ts"],(function(e){var t,n,s,r,o,c,i,a,u,p,h,f,l,m;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){r=e.cclegacy,o=e._decorator,c=e.Component,i=e.Sprite,a=e.Color},function(e){u=e.chessaction},function(e){p=e.chessstatus,h=e.teamType},function(e){f=e.resLoader},function(e){l=e.chessInitTable},function(e){m=e.spriteframeTable}],execute:function(){var g;r._RF.push({},"18241QWCyFKJrBGtEVFANE1","chessInit",void 0);var y=o.ccclass;o.requireComponent,o.property,e("chessInit",y("chessInit")(g=function(e){function r(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).chessDef=void 0,t}t(r,e);var o=r.prototype;return o.start=function(){},o.update=function(e){},o.initChess=function(){var e=n(s().mark((function e(t,n,r){var o,c,g,y,v,b,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chessDef=n,this.getComponent(p).teamtype=t,h.npc==t&&(o=this.getComponent(i))&&(o.color=a.RED),h.holyTower==t&&(c=this.getComponent(i))&&(c.color=a.YELLOW),(g=this.getComponent(u)).syncPos(r),y=l.ins.get(n),l.chessInit(this.node,y),!(v=m.ins.get(n))){e.next=23;break}if(!g.anicom){e.next=21;break}if(!(b=g.anicom.node.getComponent(i))){e.next=20;break}return e.next=16,f.Ins.getFrame(v.file,v.path);case 16:(d=e.sent)?b.spriteFrame=d:console.warn("棋子",n,"第一帧资源没有找到"),e.next=21;break;case 20:console.warn("棋子",n,"没有挂sp组件，无法显示");case 21:e.next=24;break;case 23:console.warn(n,"没有第一帧,使用预制图片");case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,s){return e.apply(this,arguments)}}(),r}(c))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/chessInitTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolDirection.ts","./toolFunc.ts","./chessbuff.ts","./chessaction.ts","./chessAi.ts","./chessstatus.ts","./objpropty.ts","./objres.ts","./objstate.ts","./buffInitTable.ts","./chessAiCallBackTable.ts","./clipTable.ts","./propertyTable.ts","./skillCallBackTable.ts"],(function(e){var t,n,i,s,r,a,f,c,l,u,o,p,h,d,D,_,b,T,y,k,m,C,g,A,v;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e.Color,a=e.math},function(e){f=e.DIRECTION_STRING,c=e.DIRECTION,l=e.DIRECTION_VEC},function(e){u=e.toolFunc},function(e){o=e.chessbuff},function(e){p=e.chessChacterGender,h=e.chessaction},function(e){d=e.chessAi},function(e){D=e.chessstatus},function(e){_=e.objpropty},function(e){b=e.objres},function(e){T=e.objStateTemplete,y=e.objstate},function(e){k=e.buffDefined},function(e){m=e.chessAiPlanDefine},function(e){C=e.clipItemDefine},function(e){g=e.propertyDefined,A=e.propertyTable},function(e){v=e.skillDefine}],execute:function(){e({chessLvAdd:function(e,t){void 0===t&&(t=1);return a.clamp(e+t,0,5)},getChessCdByQuality:function(e){if(x.普通==e)return 5;if(x.优秀==e)return 10;if(x.精良==e)return 20;if(x.史诗==e)return 30;if(x.传说==e)return 45},getChessLvUpCost:function(e){return[0,10,50,50,75,125,500,1e3,5e3,1e4][e=a.clamp(e,0,9)]},getChessQualCreatCost:function(e){if(x.普通==e)return 6;if(x.优秀==e)return 30;if(x.精良==e)return 98;if(x.史诗==e)return 328;if(x.传说==e)return 648},getChessQualLabelColor:function(e){if(x.普通==e)return new r("#d3ceaa");if(x.优秀==e)return new r("#88a80d");if(x.精良==e)return new r("#0071bc");if(x.史诗==e)return new r("#c1272d");if(x.传说==e)return new r("#f7931e")},isTopLv:function(e){return 5==e}}),s._RF.push({},"86b73OhWT9C96AQbhNKuKlf","chessInitTable",void 0);var I=e("chessDefined",function(e){return e["神塔"]="神塔",e["剑士01"]="剑士01",e["弓手01"]="弓手01",e["天使01"]="天使01",e["蝙蝠01"]="蝙蝠01",e}({}));e("num_level",[0,1,2,3,4,5,6,7,8,9]),e("cn_level",["零级","一级","二级","三级","四级","五级","六级","七级","八级","九级"]),e("chessDefinedArr",u.enumToArr(I));var x=e("chessQuality",function(e){return e["普通"]="普通",e["优秀"]="优秀",e["精良"]="精良",e["史诗"]="史诗",e["传说"]="传说",e}({}));e("chessInitTable",function(){function e(){}return e.chessInit=function(){var e=n(i().mark((function e(t,n){var s,r,a,c,u,p,T,k;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=t.getComponent(D))&&((r=A.ins.get(n.propertyTemplateDef))?(s.property=_.zero.add(r),s.resource=new b(s.property.hp,0),s.status=y.getStateByStr(n.initState)):console.warn("无效属性模板","属性初始失败")),!(a=t.getComponent(h))){e.next=14;break}a.initAnimate(n.clipsFiles,n.chacterGender),c=[],u=i().mark((function e(){var t,s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.skillExtArea[p],s=f.findIndex((function(e){return e==t})),r=l[s],c.push(r.clone());case 4:case"end":return e.stop()}}),e)})),p=0;case 8:if(!(p<n.skillExtArea.length)){e.next=13;break}return e.delegateYield(u(),"t0",10);case 10:p++,e.next=8;break;case 13:a.initSkill(n.skillDef,c);case 14:(T=t.getComponent(o))&&T.addBuffArr(n.defaultBuffDefs),(k=t.getComponent(d))&&k.initAI(n.aicbDefine);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(I.剑士01,{propertyTemplateDef:""+g.近战_低阶,clipsFiles:[C.剑士01_右上,C.剑士01_右下],chacterGender:""+p.男,skillDef:""+v.近战_平砍,skillExtArea:[],defaultBuffDefs:[k.系统_反馈特效],aicbDefine:""+m.ai_default,initState:""+T.free,qulityTag:x.普通,chessDes:"近战，单体，伤害输出"}),e.set(I.弓手01,{propertyTemplateDef:""+g.远程_低阶,clipsFiles:[C.弓手01_右上,C.弓手01_右下],chacterGender:""+p.女,skillDef:""+v.远程_投石,skillExtArea:[],defaultBuffDefs:[k.系统_反馈特效],aicbDefine:""+m.ai_default,initState:""+T.free,qulityTag:x.优秀,chessDes:"远程，单体，伤害输出"}),e.set(I.天使01,{propertyTemplateDef:""+g.远程_低阶,clipsFiles:[C.天使01_右上,C.天使01_右下],chacterGender:""+p.女,skillDef:""+v.Aoe_黑水,skillExtArea:[f[c.RIGHT],f[c.LEFT]],defaultBuffDefs:[k.系统_反馈特效],aicbDefine:""+m.ai_default,initState:""+T.free,qulityTag:x.精良,chessDes:"远程，多目标，治疗"}),e.set(I.神塔,{propertyTemplateDef:""+g.建筑_低阶,clipsFiles:[],chacterGender:""+p.器械,skillDef:""+v.远程_投石,skillExtArea:[],defaultBuffDefs:[k.系统_反馈特效],aicbDefine:""+m.ai_default,initState:""+T.moveless,qulityTag:x.普通,chessDes:"远程，单目标，伤害输出"}),e.set(I.蝙蝠01,{propertyTemplateDef:""+g.近战_低阶,clipsFiles:[C.蝙蝠01_右上,C.蝙蝠01_右下],chacterGender:""+p.野兽,skillDef:""+v.近战_平砍,skillExtArea:[],defaultBuffDefs:[k.系统_反馈特效,k.攻击力强化01],aicbDefine:""+m.ai_default,initState:""+T.free,qulityTag:x.普通,chessDes:"近战，单目标，伤害输出，小喽啰"}),e}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/chessitem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./toolFunc.ts","./chessInitTable.ts","./spriteframeTable.ts"],(function(e){var t,r,n,i,o,l,a,s,c,u,p,f,b,d,h,v,g,m,y,I,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,l=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Sprite,p=e.Label,f=e.ProgressBar,b=e.Node,d=e.math,h=e.Color,v=e.Component},function(e){g=e.resLoader},function(e){m=e.toolFunc},function(e){y=e.cn_level,I=e.chessInitTable},function(e){C=e.spriteframeTable}],execute:function(){var L,w,F,z,T,N,_,G,x,k,R,B,D,H,P,S,q;s._RF.push({},"70ebfYr39JCsqUoiQ1Bku3/","chessitem",void 0);var A=c.ccclass,E=c.property;e("chessitem",(L=A("chessitem"),w=E(u),F=E(p),z=E(f),T=E(p),N=E(b),_=E(b),G=E(p),L((R=t((k=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"sp",R,i(t)),n(t,"lb",B,i(t)),n(t,"pb",D,i(t)),n(t,"cdLb",H,i(t)),n(t,"cdNode",P,i(t)),n(t,"levelNode",S,i(t)),n(t,"l_level",q,i(t)),t.currentChessdef=void 0,t.currentIsGray=void 0,t}r(t,e);var s=t.prototype;return s.start=function(){},s.onFocusInEditor=function(){this.setGray(!1),this.cleanCd(),this.cleanLevel()},s.update=function(e){},s.setLevel=function(e){e=d.clamp(e,0,9),this.l_level.string=y[e]},s.cleanLevel=function(){this.levelNode.active=!1},s.initItem=function(){var e=l(a().mark((function e(t){var r,n,i,o,l,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C.ins.get(t)){e.next=3;break}return e.abrupt("return");case 3:return this.currentChessdef=t,e.next=6,g.Ins.getFrame(r.file,r.path);case 6:return n=e.sent,this.sp.spriteFrame=n,this.lb.string=t,i=I.ins.get(t),o=i.qulityTag,l=C.ins.get(o),e.next=14,g.Ins.getFrame(l.file,l.path);case 14:(s=e.sent)&&(this.getComponent(u).spriteFrame=s);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.setGray=function(e){this.currentIsGray=e;for(var t,r=this.node.getComponentsInChildren(u),n=o(r);!(t=n()).done;){t.value.grayscale=e}for(var i,l=this.node.getComponentsInChildren(p),a=o(l);!(i=a()).done;){i.value.color=e?h.GRAY:h.WHITE}},s.setCd=function(e,t){this.cdNode.active=!0,this.pb.progress=e/t,this.cdLb.string=""+m.milliSecondToUIstring(1e3*e)},s.cleanCd=function(){this.cdNode.active=!1},t}(v)).prototype,"sp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(k.prototype,"lb",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(k.prototype,"pb",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(k.prototype,"cdLb",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(k.prototype,"cdNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(k.prototype,"levelNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(k.prototype,"l_level",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=k))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/chessitemSlot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessitem.ts"],(function(e){var t,i,s,n,r,l,o,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Sprite,c=e.Component},function(e){a=e.chessitem}],execute:function(){var u,h,m,p,d,f,y,S,v;r._RF.push({},"ed30adP99ND0JuYqa6cXiHj","chessitemSlot",void 0);var g=l.ccclass,I=l.property;e("chessitemSlot",(u=g("chessitemSlot"),h=I(a),m=I(o),p=I(o),u((y=t((f=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,s(t,"selfRenderChessItem",y,n(t)),s(t,"selectBoxSP",S,n(t)),s(t,"emptySP",v,n(t)),t.currentEmptyFlag=void 0,t.currentSelectFlag=void 0,t}i(t,e);var r=t.prototype;return r.start=function(){},r.update=function(e){},r.setEmpty=function(){this.selfRenderChessItem.node.active=!1,this.currentEmptyFlag=!0,this.emptySP.node.active=!0},r.setItem=function(e,t){void 0===t&&(t=!1),this.selfRenderChessItem?(this.selfRenderChessItem.initItem(e),this.selfRenderChessItem.setGray(t),this.selfRenderChessItem.cleanCd(),this.currentEmptyFlag=!1,this.selfRenderChessItem.node.active=!0,this.emptySP.node.active=!1):console.warn("slot 没有对应item",this.node.name)},r.selectItem=function(e){this.selectBoxSP&&(this.currentSelectFlag=e,this.selectBoxSP.node.active=e)},t}(c)).prototype,"selfRenderChessItem",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(f.prototype,"selectBoxSP",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(f.prototype,"emptySP",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/chessstatus.ts",["./rollupPluginModLoBabelHelpers.js","cc","./objstate.ts","./objres.ts","./objpropty.ts","./chessbuff.ts","./chessAi.ts"],(function(t){var o,e,s,r,n,i,c,u,a,h,p;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,r=t._decorator,n=t.math,i=t.Component},function(t){c=t.objstate},function(t){u=t.objres},function(t){a=t.objpropty},function(t){h=t.chessbuff},function(t){p=t.chessAi}],execute:function(){var l;s._RF.push({},"c4408KfKJpODry3Esl4kUvV","chessstatus",void 0);var d=r.ccclass;r.property,t("teamType",function(t){return t[t.player=1]="player",t[t.npc=2]="npc",t[t.holyTower=3]="holyTower",t}({})),t("chessstatus",d("chessstatus")(l=function(t){function s(){for(var o,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(o=t.call.apply(t,[this].concat(s))||this).teamtype=void 0,o.chessInitDef=void 0,o.status=c.origin,o.resource=u.origin,o.property=a.default,o._aicom=void 0,o}o(s,t);var r=s.prototype;return r.onLoad=function(){this._aicom=this.getComponent(p)},r.start=function(){},r.update=function(t){this.resource.cooldownCounter+=t,this.resource.cooldownCounter>=this.allProperty.cooldown&&(this.Act(),this.resource.cooldownCounter=0)},r.isAlive=function(){return this.resource.hpcurrent>0},r.isCd=function(){return this.resource.cooldownCounter<this.allProperty.cooldown},r.ModResource=function(t){this.resource=this.resource.add(t),this.resource.cooldownCounter=n.clamp(this.resource.cooldownCounter,0,this.property.hp),0!=this.isAlive()?0==this.isCd()&&this.Act():this.Dead()},r.CanBeKilledByDamageInfo=function(t,o){return 1!=t.isHeal()&&o.dval>=this.resource.hpcurrent},r.Act=function(){this._aicom?this._aicom.doAI():console.warn("没有 chessai 组件")},r.Dead=function(){this.node.removeFromParent(),this.node.destroy()},e(s,[{key:"allProperty",get:function(){var t=this.getComponent(h);if(t){for(var o=a.zero,e=a.zero,s=t.buffs,r=0;r<s.length;r++)o=o.add(s[r].propModPlus),e=e.add(s[r].propModTimes),this.status.and(s[r].stateMod);var n=this.property.add(o);return n.add(n.times(e))}return this.property}}]),s}(i))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/clipTable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var l,i;return{setters:[function(e){l=e.createClass},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"f2ba6kp4DlJXYnx/S03Ruyp","clipTable",void 0);var _=e("clipItemDefine",function(e){return e["弓手01_右上"]="弓手01_右上",e["弓手01_右下"]="弓手01_右下",e["剑士01_右上"]="剑士01_右上",e["剑士01_右下"]="剑士01_右下",e["天使01_右下"]="天使01_右下",e["天使01_右上"]="天使01_右上",e["打击特效01"]="打击特效01",e["打击特效02"]="打击特效02",e["治疗特效"]="治疗特效",e["退场特效"]="退场特效",e["蝙蝠01_右上"]="蝙蝠01_右上",e["蝙蝠01_右下"]="蝙蝠01_右下",e}({}));e("clipTable",function(){function e(){}return l(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(_.蝙蝠01_右上,{name:_.蝙蝠01_右上,path:"clips/",file:"clip_bet_atk_rt",des:"蝙蝠01_右上，攻击clip文件，方向"}),e.set(_.蝙蝠01_右下,{name:_.蝙蝠01_右下,path:"clips/",file:"clip_bet_atk_rb",des:"蝙蝠01_右下，攻击clip文件，方向"}),e.set(_.弓手01_右上,{name:_.弓手01_右上,path:"clips/",file:"clip_crossbower_atk_rt",des:"弓手01，攻击clip文件，方向"}),e.set(_.弓手01_右下,{name:_.弓手01_右下,path:"clips/",file:"clip_crossbower_atk_rb",des:"弓手01，攻击clip文件，方向"}),e.set(_.剑士01_右上,{name:_.剑士01_右上,path:"clips/",file:"clip_sworder_atk_rt",des:"弓手01，攻击clip文件，方向"}),e.set(_.剑士01_右下,{name:_.剑士01_右下,path:"clips/",file:"clip_sworder_atk_rb",des:"弓手01，攻击clip文件，方向"}),e.set(_.打击特效01,{name:_.打击特效01,path:"clips/",file:"clip_hiteff_01",des:"被命中时的伤害闪光特效，clip文件"}),e.set(_.打击特效02,{name:_.打击特效02,path:"clips/",file:"clip_hiteff_02",des:"被命中时的伤害闪光特效，clip文件"}),e.set(_.治疗特效,{name:_.治疗特效,path:"clips/",file:"clip_healeff",des:"被命中时的治疗闪光特效，clip文件"}),e.set(_.退场特效,{name:_.退场特效,path:"clips/",file:"clip_deadeff",des:"死亡退场时闪光特效，clip文件"}),e.set(_.天使01_右下,{name:_.天使01_右下,path:"clips/",file:"clip_angle_atk_rb",des:"天使，右下， 攻击，clip文件"}),e.set(_.天使01_右上,{name:_.天使01_右上,path:"clips/",file:"clip_angle_atk_rt",des:"天使，右上， 攻击，clip文件"}),e}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/collectionBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LabelExt.ts","./toolFunc.ts"],(function(t){var e,n,i,o,l,r,a,c,u,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,a=t.Label,c=t.Sprite,u=t.Component},function(t){s=t.LabelExt},function(t){p=t.toolFunc}],execute:function(){var f,d,g,h,v,b,_;l._RF.push({},"0b36fep0rNDKpJi0hCtvBRp","collectionBar",void 0);var y=r.ccclass,m=r.property;t("collectionBar",(f=y("collectionBar"),d=m(a),g=m(c),f((b=e((v=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"gold_l",b,o(e)),i(e,"gold_s",_,o(e)),e.currentval=0,e}n(e,t);var l=e.prototype;return l.start=function(){},l.update=function(t){},l.initVal=function(t){this.currentval=t,this.ValUpdate(!1)},l.ValUpdate=function(t){void 0===t&&(t=!0);var e=this.currentval;if(this.gold_l.getComponent(s))this.gold_l.getComponent(s).setLabelNumber(e,t);else{var n=p.formatBigInteget(e,5);this.gold_l.string=p.fixInteger(n,5,"0")}},l.addCollect=function(t){void 0===t&&(t=100),0!=t&&(this.currentval+=t,this.ValUpdate())},e}(u)).prototype,"gold_l",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(v.prototype,"gold_s",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=v))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/commitPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bboard.ts","./audioTable.ts"],(function(i){var t,e,n,o,r,a,s,c,l,u,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,s=i.ProgressBar,c=i.Label,l=i.Component},function(i){u=i.bboard},function(i){d=i.audioItemDefine}],execute:function(){var b,m,h,p,f,g,v,_,y;r._RF.push({},"72c18Pop71J9ImwLXY5LRrr","commitPanel",void 0);var C=a.ccclass,L=a.property;i("commitPanel",(b=C("commitPanel"),m=L(s),h=L(c),p=L(c),b((v=t((g=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,n(t,"pb",v,o(t)),n(t,"title",_,o(t)),n(t,"btnLab",y,o(t)),t._audioMiningCd=1,t._audioMiningCdCounter=0,t._cb=void 0,t.timer=void 0,t.maxtimer=void 0,t}e(t,i);var r=t.prototype;return r.start=function(){},r.update=function(i){void 0!==this.timer&&(this.timer<=0?(this._cb&&this._cb(),this.timer=void 0,this.pb.node.active=!1,this.btnLab.string="完成"):(this.timer-=i,this.pb.progress=1-this.timer/this.maxtimer,this._audioMiningCdCounter>0?this._audioMiningCdCounter-=i:(this._audioMiningCdCounter=this._audioMiningCd,u.ins.playAudio(d.eff_mining))))},r.initCommit=function(i,t,e){void 0===t&&(t="释放中"),void 0===e&&(e=3),this._cb=i,this.timer=this.maxtimer=e,this.title.string=t,this.pb.node.active=!0,this.btnLab.string="取消"},r.onCancel=function(){this._cb=void 0,this.timer=void 0,this.node.destroy()},t}(l)).prototype,"pb",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(g.prototype,"title",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(g.prototype,"btnLab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/cuteProgressbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts"],(function(t){var e,r,s,i,o,n,g,h,p,u,a,c,l,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,s=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass},function(t){n=t.cclegacy,g=t._decorator,h=t.Sprite,p=t.Label,u=t.UITransform,a=t.v3,c=t.math,l=t.Component},function(t){d=t.toolFunc}],execute:function(){var f,P,m,_,b,y,C,w,v,I,z;n._RF.push({},"670a9G0JwVE969VOI4A9WdC","cuteProgressbar",void 0);var F=g.ccclass,W=(g.executeInEditMode,g.property);t("cuteProgressbar",(f=F("cuteProgressbar"),P=W(h),m=W(h),_=W(p),f((C=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"mid",C,i(e)),s(e,"up",w,i(e)),e._currentProgress=1,e._targetProgress=1,s(e,"progressWidth",v,i(e)),s(e,"progressHeight",I,i(e)),s(e,"l",z,i(e)),e}r(e,t);var n=e.prototype;return n.start=function(){},n.onFocusInEditor=function(){this._resetCfg()},n.setLable=function(t){this.l&&(this.l.string=t)},n._resetCfg=function(){var t=this.progressWidth,e=this.progressHeight;this.node.getComponent(u).width=t,this.mid.node.getComponent(u).anchorX=0,this.up.node.getComponent(u).anchorX=0,this.mid.node.getComponent(u).width=t,this.up.node.getComponent(u).width=t,this.node.getComponent(u).height=e,this.mid.node.getComponent(u).height=e,this.up.node.getComponent(u).height=e,this.mid.node.position=a(-t/2,0,0),this.up.node.position=a(-t/2,0,0),this.setProgressImm(this.progress)},n.update=function(t){this.tick()},n.tick=function(){if(this._currentProgress!=this._targetProgress){var t=d.lerpInteger(100*this._currentProgress,100*this._targetProgress);this._currentProgress=t/100,this.progressUpdate()}},n.progressUpdate=function(){this._currentProgress<this._targetProgress?(this._setProgress(this._targetProgress,this.mid),this._setProgress(this._currentProgress,this.up)):(this._setProgress(this._currentProgress,this.mid),this._setProgress(this._targetProgress,this.up))},n._setProgress=function(t,e){e.getComponent(u).width=t*this.progressWidth},n.setProgressEff=function(t){this.progress=t},n.setProgressImm=function(t){this._currentProgress=t,this._targetProgress=t,this._setProgress(t,this.mid),this._setProgress(t,this.up)},o(e,[{key:"progress",get:function(){return this._targetProgress},set:function(t){t=c.clamp01(t),this._targetProgress=t}}]),e}(l)).prototype,"mid",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(y.prototype,"up",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e(y.prototype,"progress",[W],Object.getOwnPropertyDescriptor(y.prototype,"progress"),y.prototype),v=e(y.prototype,"progressWidth",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 88}}),I=e(y.prototype,"progressHeight",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),z=e(y.prototype,"l",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/DAGraph.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"e555a2ZAhhKjrNIdRpnD0N+","DAGraph",void 0);e("DAGraph",function(){function e(){this.allNode=[],this.outDegreeMap=new Map,this.inDegreeMap=new Map}var n=e.prototype;return n.addVertex=function(e){this.allNode.some((function(t){return t==e}))||(this.allNode.push(e),this.outDegreeMap.set(e,[]),this.inDegreeMap.set(e,[]))},n.addEdge=function(e,t){var n,r;this.outDegreeMap.get(e)&&!this.outDegreeMap.get(e).find((function(e){return e==t}))&&(null==(n=this.outDegreeMap.get(e))||n.push(t));this.inDegreeMap.get(t)&&!this.inDegreeMap.get(t).find((function(t){return t==e}))&&(null==(r=this.inDegreeMap.get(t))||r.push(e));0==this.topSort().length&&this.delEdge(e,t)},n.delVertex=function(e){this.allNode.remove((function(t){return t==e})),this.inDegreeMap.delete(e),this.inDegreeMap.forEach((function(t){t.remove((function(t){return t==e}))})),this.outDegreeMap.delete(e),this.outDegreeMap.forEach((function(t){t.remove((function(t){return t==e}))}))},n.delEdge=function(e,t){var n=this.outDegreeMap.get(e);null==n||n.remove((function(e){return e==t}));var r=this.inDegreeMap.get(t);null==r||r.remove((function(t){return t==e}))},n.getInDegree=function(e){return this.inDegreeMap.get(e)},n.getOutDegree=function(e){return this.outDegreeMap.get(e)},n.topSort=function(){for(var e=this,n=[],r=[],o=0;o<this.allNode.length;o++)r.push(this.inDegreeMap.get(this.allNode[o]).length);for(var i=function(){for(var e=0;e<r.length;e++)if(0==r[e])return e;return-1},u=i();u>=0;){n.push(u),r[u]--;for(var l,a=this.outDegreeMap.get(this.allNode[u]),h=function(){var t=l.value,n=e.allNode.findIndex((function(e){return e==t}));r[n]--},g=t(a);!(l=g()).done;)h();u=i()}return n.length==this.allNode.length?n:[]},n.topLayer=function(e){for(var t=this.topSort2(),n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;o++){var i=r[o];if(this.allNode[i]==e)return[n,o,t.length]}return[-1,-1,0]},n.topSort2=function(){for(var e=this,n=[],r=[],o=0;o<this.allNode.length;o++)r.push(this.inDegreeMap.get(this.allNode[o]).length);for(var i=function(){for(var e=[],t=0;t<r.length;t++)0==r[t]&&e.push(t);return e},u=i(),l=0,a=0;u.length>0;){for(var h=0;h<u.length;h++){var g=u[h];r[g]--,n[l]||(n[l]=[]),n[l].push(g),a++;for(var s,f=this.outDegreeMap.get(this.allNode[g]),c=function(){var t=s.value,n=e.allNode.findIndex((function(e){return e==t}));r[n]--},p=t(f);!(s=p()).done;)c()}u=i(),l++}return a==this.allNode.length?n:[]},n.printEdges=function(){this.outDegreeMap.forEach((function(e,t){var n;console.log("dag out(可以再去哪):"+t+" -> "+(null==(n=Array.from(e,(function(e){return e})))?void 0:n.join(" ")))})),this.inDegreeMap.forEach((function(e,t){var n;console.log("dag in(可以从哪来):"+t+" -> "+(null==(n=Array.from(e,(function(e){return e})))?void 0:n.join(" ")))}))},n.printOutInDegree=function(){var e=this;this.allNode.forEach((function(t){var n,r;console.log(t+",出度="+(null==(n=e.outDegreeMap.get(t))?void 0:n.length)+",入度="+(null==(r=e.inDegreeMap.get(t))?void 0:r.length))}))},n.printTopSort=function(){var e=this,t=this.topSort();t.length>0?console.log("拓扑排序："+Array.from(t,(function(t){return e.allNode[t]})).join("  ")):console.log("排序失败")},n.printTopSort2=function(){var e=this,t=this.topSort2();if(t.length>0)for(var n=0;n<t.length;n++){var r=t[n];console.log("拓扑排序 layer"+n+"："+Array.from(r,(function(t){return e.allNode[t]})).join("  "))}else console.log("排序失败")},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/DamageInfo.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"158b2ntv+5H3oua1KWvb3s9","DamageInfo",void 0);var a=t("DamageInfoTag",function(t){return t[t.directDamage=1]="directDamage",t[t.periodDamage=2]="periodDamage",t[t.reflectDamage=3]="reflectDamage",t[t.directHeal=4]="directHeal",t[t.periodHeal=5]="periodHeal",t}({}));t("DamageSource",function(t){return t[t.bow=1]="bow",t[t.sword=2]="sword",t[t.magic=3]="magic",t[t.undef=4]="undef",t}({})),t("DamageInfo",function(){function t(t,e,a,i,r,c,d,n,o){this.attacker=void 0,this.defender=void 0,this.tags=void 0,this.damageSource=void 0,this.damage=void 0,this.criticalRate=void 0,this.criticalPercent=void 0,this.addBuffs_toAttacker=[],this.addBuffs_toDefender=[],this.attacker=t,this.defender=e,this.tags=a,this.damageSource=i,this.damage=r,this.criticalRate=c,this.criticalPercent=d,this.addBuffs_toAttacker=n,this.addBuffs_toDefender=o}var e=t.prototype;return e.damageCalFun=function(t){var e=t.damage,a=Math.random()<t.criticalRate,i=a?(1+this.criticalPercent/100)*e:e;return{dval:i=Math.round(i),iscrit:a}},e.isHeal=function(){for(var t=0;t<this.tags.length;t++)if(this.tags[t]==a.directHeal||this.tags[t]==a.periodHeal)return!0;return!1},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/DamageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts","./bboard.ts","./chessaction.ts","./chessstatus.ts","./objpropty.ts","./objres.ts","./chessbuff.ts","./objbuff.ts"],(function(e){var a,n,f,t,r,o,s,u,l,i,d,c,g;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy,f=e._decorator,t=e.Component},function(e){r=e.toolFunc},function(e){o=e.bboard},function(e){s=e.chessaction,u=e.ChaAniType},function(e){l=e.chessstatus},function(e){i=e.objpropty},function(e){d=e.objres},function(e){c=e.chessbuff},function(e){g=e.objbuff}],execute:function(){var m;n._RF.push({},"14e9c0PgUBG/6SQq7uSAxym","DamageManager",void 0);var b=f.ccclass;f.property,e("DamageManager",b("DamageManager")(m=function(e){function n(){for(var a,n=arguments.length,f=new Array(n),t=0;t<n;t++)f[t]=arguments[t];return(a=e.call.apply(e,[this].concat(f))||this).damageInfos=[],a}a(n,e);var f=n.prototype;return f.start=function(){},f.update=function(e){for(var a=this.damageInfos.length-1;a>=0;a--){var n=this.damageInfos[a];this.DealWithDamage(n),this.damageInfos.removeAt(a)}},f.DealWithDamage=function(e){if(r.isValidCom(e.defender)){var a=e.defender.getComponent(l),n=e.defender.getComponent(c);if(a)if(n)if(0!=a.isAlive()){var f=null,t=null;if(r.isValidCom(e.attacker)&&(f=e.attacker.getComponent(c),t=e.attacker.getComponent(l)),f&&t)for(var m=0;m<f.buffs.length;m++){var b=f.buffs[m];null!=b.onBuffOwnerCreateDamage&&b.onBuffOwnerCreateDamage(b,e)}for(var p=0;p<n.buffs.length;p++)null!=n.buffs[p].onBuffOwnerGetDamage&&n.buffs[p].onBuffOwnerGetDamage(n.buffs[p],e);var v=e.isHeal(),h=e.damageCalFun(e),B=h.dval,w=h.iscrit;if(1==a.CanBeKilledByDamageInfo(e,{dval:B,iscrit:w})){if(null!=f)for(var C=0;C<f.buffs.length;C++)null!=f.buffs[C].onBuffOwnerKillOther&&f.buffs[C].onBuffOwnerKillOther(f.buffs[C],e);for(var D=0;D<n.buffs.length;D++)null!=n.buffs[D].onBuffOwnerBekilled&&n.buffs[D].onBuffOwnerBekilled(n.buffs[D],e);a.ModResource(new d(-B,0))}else{if(v){var y=a.getComponent(s);y&&y.playFeedback(u.治疗),a.ModResource(new d(B,0)),o.ins.PopUpNumberOnCharacter(e.defender,B,v,w)}else{var k=a.getComponent(s);k&&k.playFeedback(u.受伤),a.ModResource(new d(-B,0)),o.ins.PopUpNumberOnCharacter(e.defender,B,v,w)}for(var O=0;O<e.addBuffs_toDefender.length;O++){var A=e.addBuffs_toDefender[O];if(null!=n&&null!=a&&1==a.isAlive()){var M=i.default;t&&(M=t.allProperty);var _=new g(A,e.defender,M,e.attacker);n.addBuff(_)}}}for(var j=0;j<e.addBuffs_toAttacker.length;j++){var F=e.addBuffs_toAttacker[j];if(null!=f&&null!=t&&1==t.isAlive()){var I=i.default;t&&(I=t.allProperty);var P=new g(F,e.attacker,I,e.attacker);n.addBuff(P)}}}else console.warn("damage","defender 已经标记为死亡");else console.warn("damage","找不到 defender 的 buff");else console.warn("damage","找不到 defender 的 status")}else console.warn("damage","找不到 defender")},f.addDamage=function(e){this.damageInfos.push(e)},n}(t))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/feedbackEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./clipTable.ts"],(function(e){var t,n,r,o,i,a,c,s,u;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator,a=e.AnimationComponent,c=e.Component},function(e){s=e.resLoader},function(e){u=e.clipTable}],execute:function(){var f;o._RF.push({},"447356JFD1MNYxiWVUFGsQ9","feedbackEffect",void 0);var p=i.ccclass;i.property,e("feedbackEffect",p("feedbackEffect")(f=function(e){function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._ainCom=void 0,t}t(o,e);var i=o.prototype;return i.onLoad=function(){this._ainCom=this.getComponent(a)},i.start=function(){var e=this;this._ainCom&&this._ainCom.play(),this.scheduleOnce((function(){e.node.removeFromParent(),e.node.destroy()}),.88)},i.update=function(e){},i.initEff=function(){var e=n(r().mark((function e(t){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.ins.get(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.Ins.getClip(n.file,n.path);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:this._ainCom&&(this._ainCom.defaultClip=o);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o}(c))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/gameClientEvent.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"46336xCLN5BJpboJQ39E7f6","gameClientEvent",void 0);e("gameClientEvent",function(e){return e[e.eve_chessboardClick=1e5]="eve_chessboardClick",e[e.eve_localDataRefresh=100001]="eve_localDataRefresh",e[e.eve_buttonClick=100002]="eve_buttonClick",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/gameRuntimeData.ts",["cc","./gameStorageData.ts","./chessInitTable.ts"],(function(a){var n,r,e,t,s,c;return{setters:[function(a){n=a.cclegacy,r=a.math},function(a){e=a.gameStorageData,t=a.dataStorageKey},function(a){s=a.chessDefined,c=a.chessLvAdd}],execute:function(){n._RF.push({},"fdb8fZ2xXBNt5nZ2/UC2tDs","gameRuntimeData",void 0),a("gameRuntimeData",function(){function a(){}return a.deltaGold=function(a){var n=e.Ins.numGet(t.gold),s=r.clamp(n+a,0,Number.MAX_SAFE_INTEGER);e.Ins.numSet(t.gold,s),e.Ins.saveToLocal()},a.deltaDia=function(a){var n=e.Ins.numGet(t.diammon),s=r.clamp(n+a,0,Number.MAX_SAFE_INTEGER);e.Ins.numSet(t.diammon,s),e.Ins.saveToLocal()},a.deltaPack=function(a){var n=e.Ins.numGet(t.pack),s=r.clamp(n+a,0,Number.MAX_SAFE_INTEGER);e.Ins.numSet(t.pack,s),e.Ins.saveToLocal()},a.addChessToPlayer=function(a){var n=e.Ins.arrGet(t.cardsHad);n.find((function(n){return n.cardName==a}))||(n.push({cardName:a,cardLv:0}),e.Ins.arrSet(t.cardsHad,n),e.Ins.saveToLocal())},a.lvUpChessToPlayer=function(a){var n=e.Ins.arrGet(t.cardsHad),r=n.find((function(n){return n.cardName==a}));r&&(r.cardLv=c(r.cardLv),e.Ins.arrSet(t.cardsHad,n),e.Ins.saveToLocal())},a.chessStatusToPlayer=function(n){var r=a.playerHasChess(n),e=a.playerCarryChess(n);return r?e?"已携带":"拥有":"未拥有"},a.playerHasChess=function(a){var n=e.Ins.arrGet(t.cardsHad);return n.find((function(n){return n.cardName==a}))},a.playerCarryChess=function(a){var n=e.Ins.arrGet(t.cardsCarry);return n.find((function(n){return n.cardName==a}))},a}()).playerCarryChessArr=[s.剑士01,s.弓手01,s.天使01,s.蝙蝠01],n._RF.pop()}}}));

System.register("chunks:///_virtual/gameStorageData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LocalStorageManager.ts","./chessInitTable.ts"],(function(a){var n,t,e,r,c;return{setters:[function(a){n=a.inheritsLoose,t=a.createClass},function(a){e=a.cclegacy},function(a){r=a.LocalStorageManager},function(a){c=a.chessDefined}],execute:function(){e._RF.push({},"aabed93BLZFUaV+P5QjnTf8","gameStorageData",void 0);var s=a("dataStorageKey",function(a){return a.gold="gold",a.diammon="diammon",a.pack="pack",a.cardsHad="cardsHad",a.cardsCarry="cardsCarry",a}({})),i=function(){function a(){}return a.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},a}();i._instance=null;a("gameStorageData",function(a){function e(){for(var n,t=arguments.length,e=new Array(t),c=0;c<t;c++)e[c]=arguments[c];return(n=a.call.apply(a,[this].concat(e))||this).numGet=function(a){var n=r.instance.getDataFromRam(a);return null==n?0:n},n.numSet=function(a,n){void 0===n&&(n=0),r.instance.setDataToRam(a,n)},n.arrGet=function(a){var n=r.instance.getDataFromRam(a);return null==n?[]:JSON.parse(n)},n.arrSet=function(a,n){var t=JSON.stringify(n);r.instance.setDataToRam(a,t)},n}n(e,a);var i=e.prototype;return i.saveToLocal=function(){r.instance.save()},i.reset=function(){r.instance.cleanall()},t(e,null,[{key:"Ins",get:function(){if(!r.instance.getUserId()){var n="user:"+(new Date).toString();console.log("尚且没有帐号，需要兴建",n),r.instance.cleanall(),r.instance.createNewUser(n),r.instance.setDataToRam(s.diammon,100),r.instance.setDataToRam(s.gold,1e3),r.instance.setDataToRam(s.pack,1);var t=[{cardName:c.剑士01,cardLv:0}];r.instance.setDataToRam(s.cardsHad,JSON.stringify(t)),r.instance.save()}return a.GetInstance.call(this)}}]),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/girddrawer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,r,e,s,l,n,h,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,r=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){s=i.cclegacy,l=i._decorator,n=i.GraphicsComponent,h=i.Color,g=i.Component}],execute:function(){var c,a,u,f,d;s._RF.push({},"3e31bjvwcdPCq7kqtDVUoun","girddrawer",void 0);var p=l.ccclass,C=l.property;i("girddrawer",(c=p("girddrawer"),a=C(n),c((d=t((f=function(i){function t(){for(var t,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t=i.call.apply(i,[this].concat(s))||this,r(t,"g",d,e(t)),t}o(t,i);var s=t.prototype;return s.start=function(){},s.update=function(i){},s.drawNone=function(){this.g.clear()},s.drawLine=function(i,t,o){this.g.lineWidth=3,o?(this.g.fillColor=o,this.g.strokeColor=o):(this.g.fillColor=h.RED,this.g.strokeColor=h.RED),this.g.moveTo(i.x,i.y),this.g.lineTo(t.x,t.y),this.g.stroke()},s.drawCircle=function(i,t,o){this.g.lineWidth=3,o?(this.g.fillColor=o,this.g.strokeColor=o):(this.g.fillColor=h.RED,this.g.strokeColor=h.RED),this.g.moveTo(i.x,i.y),this.g.circle(i.x,i.y,t),this.g.stroke()},s.drawOneP=function(i,t){this.g.lineWidth=3,t?(this.g.fillColor=t,this.g.strokeColor=t):(this.g.fillColor=h.RED,this.g.strokeColor=h.RED),this.g.moveTo(i.x,i.y),this.g.circle(i.x,i.y,6),this.g.stroke(),this.g.fill()},s.drawRect=function(i,t,o,r,e){this.g.lineWidth=3.5,e?(this.g.fillColor=e,this.g.strokeColor=e):(this.g.fillColor=h.RED,this.g.strokeColor=h.RED),this.g.moveTo(i.x,i.y),this.g.lineTo(t.x,t.y),this.g.lineTo(o.x,o.y),this.g.lineTo(r.x,r.y),this.g.lineTo(i.x,i.y),this.g.stroke()},t}(g)).prototype,"g",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=f))||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/hall_menus.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameClientEvent.ts"],(function(e){var t,n,r,i,a,o,l,s,u,c,h,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.SpriteFrame,s=e.Node,u=e.director,c=e.Button,h=e.Sprite,p=e.Component},function(e){b=e.gameClientEvent}],execute:function(){var f,d,m,y,v,g,_,C,w;a._RF.push({},"e3db9JfIVRNjpBAYhhkKv8F","hall_menus",void 0);var L=o.ccclass,k=o.property,B=e("hallUILayer",function(e){return e[e.store=0]="store",e[e.battle=1]="battle",e[e.cardmaker=2]="cardmaker",e}({}));e("hall_menus",(f=L("hall_menus"),d=k(l),m=k(l),y=k([s]),f((_=t((g=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"onbtn_able",_,i(t)),r(t,"onbtn_disable",C,i(t)),r(t,"layerNodes",w,i(t)),t}n(t,e);var a=t.prototype;return a.start=function(){this.showLayer(B.battle),u.emit(b.eve_localDataRefresh)},a.update=function(e){},a.showLayer=function(e){this.setMenuLayer(e),this.setMenuBtns(e)},a.setMenuLayer=function(e){for(var t=0;t<this.layerNodes.length;t++){var n=this.layerNodes[t];n.active=t==e}},a.setMenuBtns=function(e){for(var t=this.getComponentsInChildren(c),n=0;n<t.length;n++){var r=t[n];r.getComponent(h).spriteFrame=n==e?this.onbtn_able:this.onbtn_disable}},a.onBtnClick=function(e,t){for(var n=e.target,r=this.getComponentsInChildren(c),i=-1,a=0;a<r.length;a++){var o=r[a];n.uuid==o.node.uuid&&(i=a)}i>=0?this.showLayer(i):console.warn("无效的menu btn"),u.emit(b.eve_buttonClick)},t}(p)).prototype,"onbtn_able",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(g.prototype,"onbtn_disable",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(g.prototype,"layerNodes",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=g))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/LabelExt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts"],(function(t){var e,r,n,u,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,u=t.Label,i=t.Component},function(t){o=t.toolFunc}],execute:function(){var a;r._RF.push({},"abf61lHtIpF4Z7I9sFeCVWe","LabelExt",void 0);var c=n.ccclass;n.property,t("LabelExt",c("LabelExt")(a=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))||this)._targetNum=0,e._currentNum=0,e}e(r,t);var n=r.prototype;return n.start=function(){},n.update=function(t){this.tick()},n.setLabelNumber=function(t,e){void 0===e&&(e=!0),t=Math.floor(t),this._currentNum=e?this._targetNum:t,this._targetNum=t,this.labelUpdate()},n.tick=function(){this._currentNum!=this._targetNum&&(this._currentNum=o.lerpInteger(this._currentNum,this._targetNum),this.labelUpdate())},n.labelUpdate=function(){if(this.getComponent(u)){var t=o.formatBigInteget(this._currentNum,5);this.getComponent(u).string=o.fixInteger(t,5,"0")}},r}(i))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ListItem.ts"],(function(t){var e,i,s,o,n,a,l,r,c,h,_,d,u,m,p,g,f,v,I,y,T,S,w,z,D,N,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,r=t.ScrollView,c=t.Enum,h=t.Node,_=t.Prefab,d=t.CCFloat,u=t.EventHandler,m=t.CCBoolean,p=t.CCInteger,g=t.isValid,f=t.UITransform,v=t.Layout,I=t.instantiate,y=t.NodePool,T=t.Vec3,S=t.Size,w=t.Widget,z=t.tween,D=t.Component},function(t){N=t.DEV},function(t){b=t.default}],execute:function(){var E,P,L,G,C,O,R,A,U,B,k,M,x,V,F,H,X,Y,Z,W,j,q,K,J,Q,$,tt,et,it,st,ot,nt,at,lt,rt,ct,ht,_t,dt,ut,mt,pt,gt;a._RF.push({},"1465aK3BeFERYvLMRafKnXR","List",void 0);var ft=l.ccclass,vt=l.property,It=l.disallowMultiple,yt=l.menu,Tt=l.executionOrder,St=l.requireComponent,wt=function(t){return t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB",t}(wt||{}),zt=function(t){return t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE",t}(zt||{}),Dt=t("SelectedType",function(t){return t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT",t}({}));t("default",(E=It(),P=yt("List"),L=St(r),G=Tt(-5e3),C=vt({type:c(wt),tooltip:N}),O=vt({type:h,tooltip:N,visible:function(){return this.templateType==wt.NODE}}),R=vt({type:_,tooltip:N,visible:function(){return this.templateType==wt.PREFAB}}),A=vt({}),U=vt({type:c(zt),tooltip:N}),B=vt({type:d,range:[0,1,.1],tooltip:N,slide:!0,visible:function(){return this._slideMode==zt.PAGE}}),k=vt({type:u,tooltip:N,visible:function(){return this._slideMode==zt.PAGE}}),M=vt({}),x=vt({type:m,tooltip:N}),V=vt({tooltip:N,visible:function(){var t=this.slideMode==zt.NORMAL;return t||(this.cyclic=!1),t}}),F=vt({tooltip:N,visible:function(){return this.virtual}}),H=vt({tooltip:N,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}}),X=vt({type:p}),Y=vt({type:p,range:[0,6,1],tooltip:N,slide:!0}),Z=vt({type:p,range:[0,12,1],tooltip:N,slide:!0}),W=vt({type:u,tooltip:N}),j=vt({type:c(Dt),tooltip:N}),q=vt({type:u,tooltip:N,visible:function(){return this.selectedMode>Dt.NONE}}),K=vt({tooltip:N,visible:function(){return this.selectedMode==Dt.SINGLE}}),J=vt({serializable:!1}),ft(Q=E(Q=P(Q=L(Q=G((tt=e(($=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,s(e,"templateType",tt,o(e)),s(e,"tmpNode",et,o(e)),s(e,"tmpPrefab",it,o(e)),s(e,"_slideMode",st,o(e)),s(e,"pageDistance",ot,o(e)),s(e,"pageChangeEvent",nt,o(e)),s(e,"_virtual",at,o(e)),s(e,"cyclic",lt,o(e)),s(e,"lackCenter",rt,o(e)),s(e,"lackSlide",ct,o(e)),s(e,"_updateRate",ht,o(e)),s(e,"frameByFrameRenderNum",_t,o(e)),s(e,"renderEvent",dt,o(e)),s(e,"selectedMode",ut,o(e)),s(e,"selectedEvent",mt,o(e)),s(e,"repeatEventSingle",pt,o(e)),e._selectedId=-1,e._lastSelectedId=void 0,e.multSelected=void 0,e._forceUpdate=!1,e._align=void 0,e._horizontalDir=void 0,e._verticalDir=void 0,e._startAxis=void 0,e._alignCalcType=void 0,e.content=void 0,e._contentUt=void 0,e.firstListId=void 0,e.displayItemNum=void 0,e._updateDone=!0,e._updateCounter=void 0,e._actualNumItems=void 0,e._cyclicNum=void 0,e._cyclicPos1=void 0,e._cyclicPos2=void 0,s(e,"_numItems",gt,o(e)),e._inited=!1,e._scrollView=void 0,e._layout=void 0,e._resizeMode=void 0,e._topGap=void 0,e._rightGap=void 0,e._bottomGap=void 0,e._leftGap=void 0,e._columnGap=void 0,e._lineGap=void 0,e._colLineNum=void 0,e._lastDisplayData=void 0,e.displayData=void 0,e._pool=void 0,e._itemTmp=void 0,e._itemTmpUt=void 0,e._needUpdateWidget=!1,e._itemSize=void 0,e._sizeType=void 0,e._customSize=void 0,e.frameCount=void 0,e._aniDelRuning=!1,e._aniDelCB=void 0,e._aniDelItem=void 0,e._aniDelBeforePos=void 0,e._aniDelBeforeScale=void 0,e.viewTop=void 0,e.viewRight=void 0,e.viewBottom=void 0,e.viewLeft=void 0,e._doneAfterUpdate=!1,e.elasticTop=void 0,e.elasticRight=void 0,e.elasticBottom=void 0,e.elasticLeft=void 0,e.scrollToListId=void 0,e.adhering=!1,e._adheringBarrier=!1,e.nearestListId=void 0,e.curPageNum=0,e._beganPos=void 0,e._scrollPos=void 0,e._curScrollIsTouch=void 0,e._scrollToListId=void 0,e._scrollToEndTime=void 0,e._scrollToSo=void 0,e._lack=void 0,e._allItemSize=void 0,e._allItemSizeNoEdge=void 0,e._scrollItem=void 0,e._thisNodeUt=void 0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._init()},a.onDestroy=function(){var t=this;g(t._itemTmp)&&t._itemTmp.destroy(),g(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},a.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},a.onDisable=function(){this._unregisterEvent()},a._registerEvent=function(){var t=this;t.node.on(h.EventType.TOUCH_START,t._onTouchStart,t),t.node.on("touch-up",t._onTouchUp,t),t.node.on(h.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.on("scroll-began",t._onScrollBegan,t),t.node.on("scroll-ended",t._onScrollEnded,t),t.node.on("scrolling",t._onScrolling,t),t.node.on(h.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._unregisterEvent=function(){var t=this;t.node.off(h.EventType.TOUCH_START,t._onTouchStart,t),t.node.off("touch-up",t._onTouchUp,t),t.node.off(h.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.off("scroll-began",t._onScrollBegan,t),t.node.off("scroll-ended",t._onScrollEnded,t),t.node.off("scrolling",t._onScrolling,t),t.node.off(h.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._init=function(){var t=this;if(!t._inited)if(t._thisNodeUt=t.node.getComponent(f),t._scrollView=t.node.getComponent(r),t.content=t._scrollView.content,t._contentUt=t.content.getComponent(f),t.content){switch(t._layout=t.content.getComponent(v),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(I(t.templateType==wt.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=zt.ADHERING&&t._slideMode!=zt.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new y,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case v.Type.HORIZONTAL:switch(t._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case v.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case v.Type.VERTICAL:switch(t._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case v.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case v.Type.GRID:switch(t._startAxis){case v.AxisDirection.HORIZONTAL:switch(t._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case v.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case v.AxisDirection.VERTICAL:switch(t._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case v.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")},a._processAutoScrolling=function(t){var e=1e-4,i=new T,s=this._scrollView,o=s._isNecessaryAutoScrollBrake(),n=o?.05:1;s._autoScrollAccumulatedTime+=t*(1/n);var a,l=Math.min(1,s._autoScrollAccumulatedTime/s._autoScrollTotalTime);s._autoScrollAttenuate&&(a=l,l=(a-=1)*a*a*a*a+1);var c=s._autoScrollTargetDelta.clone();c.multiplyScalar(l);var h=s._autoScrollStartPosition.clone();h.add(c);var _=Math.abs(l-1)<=e;if(Math.abs(l-1)<=s.getScrollEndedEventTiming()&&!s._isScrollEndedWithThresholdEventFired&&(s._dispatchEvent(r.EventType.SCROLL_ENG_WITH_THRESHOLD),s._isScrollEndedWithThresholdEventFired=!0),s.elastic){var d=h.clone();d.subtract(s._autoScrollBrakingStartPosition),o&&d.multiplyScalar(n),h.set(s._autoScrollBrakingStartPosition),h.add(d)}else{var u=h.clone();u.subtract(s._getContentPosition());var m=s._getHowMuchOutOfBoundary(u);m.equals(i,e)||(h.add(m),_=!0)}_&&(s._autoScrolling=!1);var p=new T(h);p.subtract(s._getContentPosition()),s._clampDelta(p),s._moveContent(p,_),s._dispatchEvent(r.EventType.SCROLLING),s._autoScrolling||(s._isBouncing=!1,s._scrolling=!1,s._dispatchEvent(r.EventType.SCROLL_ENDED))},a.setTemplateItem=function(t){if(t){var e=this;if(e._itemTmp=t,e._itemTmpUt=t.getComponent(f),e._resizeMode==v.ResizeMode.CHILDREN)e._itemSize=e._layout.cellSize;else{var i=t.getComponent(f);e._itemSize=new S(i.width,i.height)}var s=t.getComponent(b),o=!1;switch(s||(o=!0),o&&(e.selectedMode=Dt.NONE),(s=t.getComponent(w))&&s.enabled&&(e._needUpdateWidget=!0),e.selectedMode==Dt.MULT&&(e.multSelected=[]),e._align){case v.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case v.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case v.Type.GRID:switch(e._startAxis){case v.AxisDirection.HORIZONTAL:var n=e._contentUt.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((n+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case v.AxisDirection.VERTICAL:var a=e._contentUt.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((a+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},a.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&console.error("List initialization not completed!"),!1)},a._resizeContent=function(){var t,e=this;switch(e._align){case v.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case v.Type.VERTICAL:if(e._customSize){var s=e._getFixedSize(null);t=e._topGap+s.val+e._itemSize.height*(e._numItems-s.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case v.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case v.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case v.AxisDirection.VERTICAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*n+e._columnGap*(n-1)+e._rightGap}}var a=e.content.getComponent(v);if(a&&(a.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var l=e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width;e._cyclicPos1=0,l-=e._cyclicPos1,e._cyclicNum=Math.ceil(l/e._allItemSizeNoEdge)+1;var r=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+r,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+r*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=r*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,h=e._lack?(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;h<0&&(h=0),e._sizeType?e._contentUt.height=h:e._contentUt.width=h},a._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),s=this._sizeType?new T(0,i,0):new T(i,0,0),o=this.content.getPosition();switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(o.set(-this._cyclicPos2,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s))):e<-this._cyclicPos2&&(o.set(-this._cyclicPos1,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s)));break;case 2:e<this._cyclicPos1?(o.set(this._cyclicPos2,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s))):e>this._cyclicPos2&&(o.set(this._cyclicPos1,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s)));break;case 3:e<this._cyclicPos1?(o.set(o.x,this._cyclicPos2,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s))):e>this._cyclicPos2&&(o.set(o.x,this._cyclicPos1,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s)));break;case 4:e>-this._cyclicPos1?(o.set(o.x,-this._cyclicPos2,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s))):e<-this._cyclicPos2&&(o.set(o.x,-this._cyclicPos1,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s)))}}var n,a,l,r;if(this._calcViewPos(),this._sizeType?(n=this.viewTop,l=this.viewBottom):(a=this.viewRight,r=this.viewLeft),this._virtual){var c;this.displayData=[];var h=0,_=this._numItems-1;if(this._customSize)for(var d=!1;h<=_&&!d;h++)switch(c=this._calcItemPos(h),this._align){case v.Type.HORIZONTAL:c.right>=r&&c.left<=a?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.Type.VERTICAL:c.bottom<=n&&c.top>=l?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.Type.GRID:switch(this._startAxis){case v.AxisDirection.HORIZONTAL:c.bottom<=n&&c.top>=l?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.AxisDirection.VERTICAL:c.right>=r&&c.left<=a?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0)}}else{var u=this._itemSize.width+this._columnGap,m=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:h=(r-this._leftGap)/u,_=(a-this._leftGap)/u;break;case 2:h=(-a-this._rightGap)/u,_=(-r-this._rightGap)/u;break;case 3:h=(-n-this._topGap)/m,_=(-l-this._topGap)/m;break;case 4:h=(l-this._bottomGap)/m,_=(n-this._bottomGap)/m}for(h=Math.floor(h)*this._colLineNum,_=Math.ceil(_)*this._colLineNum,h<0&&(h=0),--_>=this._numItems&&(_=this._numItems-1);h<=_;h++)this.displayData.push(this._calcItemPos(h))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var p=this._lastDisplayData.length,g=this.displayItemNum!=p;if(g&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort((function(t,e){return t-e})),g=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[p-1]),this._forceUpdate||g)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var f=0;f<this.displayItemNum;f++)this._createOrUpdateItem(this.displayData[f]);this._forceUpdate=!1}this._calcNearestItem()}}},a._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this._thisNodeUt.width,this.elasticRight=this.viewRight>this._contentUt.width?Math.abs(this.viewRight-this._contentUt.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this._thisNodeUt.width,this.elasticLeft=this.viewLeft<-this._contentUt.width?Math.abs(this.viewLeft+this._contentUt.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this._thisNodeUt.height,this.elasticBottom=this.viewBottom<-this._contentUt.height?Math.abs(this.viewBottom+this._contentUt.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this._thisNodeUt.height,this.elasticTop=this.viewTop>this._contentUt.height?Math.abs(this.viewTop-this._contentUt.height):0,this.viewTop-=this.elasticTop}},a._calcItemPos=function(t){var e,i,s,o,n,a,l,r;switch(this._align){case v.Type.HORIZONTAL:switch(this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var c=this._getFixedSize(t);n=this._leftGap+(this._itemSize.width+this._columnGap)*(t-c.count)+(c.val+this._columnGap*c.count);var h=this._customSize[t];e=h>0?h:this._itemSize.width}else n=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)n-=this._leftGap,n+=this._contentUt.width/2-this._allItemSizeNoEdge/2;return{id:t,left:n,right:a=n+e,x:n+this._itemTmpUt.anchorX*e,y:this._itemTmp.y};case v.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){var _=this._getFixedSize(t);a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-_.count)-(_.val+this._columnGap*_.count);var d=this._customSize[t];e=d>0?d:this._itemSize.width}else a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)a+=this._rightGap,a-=this._contentUt.width/2-this._allItemSizeNoEdge/2;return{id:t,right:a,left:n=a-e,x:n+this._itemTmpUt.anchorX*e,y:this._itemTmp.y}}break;case v.Type.VERTICAL:switch(this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){var u=this._getFixedSize(t);s=-this._topGap-(this._itemSize.height+this._lineGap)*(t-u.count)-(u.val+this._lineGap*u.count);var m=this._customSize[t];i=m>0?m:this._itemSize.height}else s=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)s+=this._topGap,s-=this._contentUt.height/2-this._allItemSizeNoEdge/2;return{id:t,top:s,bottom:o=s-i,x:this._itemTmp.x,y:o+this._itemTmpUt.anchorY*i};case v.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var p=this._getFixedSize(t);o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-p.count)+(p.val+this._lineGap*p.count);var g=this._customSize[t];i=g>0?g:this._itemSize.height}else o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)o-=this._bottomGap,o+=this._contentUt.height/2-this._allItemSizeNoEdge/2;return{id:t,top:s=o+i,bottom:o,x:this._itemTmp.x,y:o+this._itemTmpUt.anchorY*i}}case v.Type.GRID:var f=Math.floor(t/this._colLineNum);switch(this._startAxis){case v.AxisDirection.HORIZONTAL:switch(this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:r=(o=(s=-this._topGap-(this._itemSize.height+this._lineGap)*f)-this._itemSize.height)+this._itemTmpUt.anchorY*this._itemSize.height;break;case v.VerticalDirection.BOTTOM_TO_TOP:s=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*f)+this._itemSize.height,r=o+this._itemTmpUt.anchorY*this._itemSize.height}switch(l=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:l+=this._itemTmpUt.anchorX*this._itemSize.width,l-=this._contentUt.anchorX*this._contentUt.width;break;case v.HorizontalDirection.RIGHT_TO_LEFT:l+=(1-this._itemTmpUt.anchorX)*this._itemSize.width,l-=(1-this._contentUt.anchorX)*this._contentUt.width,l*=-1}return{id:t,top:s,bottom:o,x:l,y:r};case v.AxisDirection.VERTICAL:switch(this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:a=(n=this._leftGap+(this._itemSize.width+this._columnGap)*f)+this._itemSize.width,l=n+this._itemTmpUt.anchorX*this._itemSize.width,l-=this._contentUt.anchorX*this._contentUt.width;break;case v.HorizontalDirection.RIGHT_TO_LEFT:l=(n=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*f)-this._itemSize.width)+this._itemTmpUt.anchorX*this._itemSize.width,l+=(1-this._contentUt.anchorX)*this._contentUt.width}switch(r=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:r-=(1-this._itemTmpUt.anchorY)*this._itemSize.height,r+=(1-this._contentUt.anchorY)*this._contentUt.height;break;case v.VerticalDirection.BOTTOM_TO_TOP:r-=this._itemTmpUt.anchorY*this._itemSize.height,r+=this._contentUt.anchorY*this._contentUt.height,r*=-1}return{id:t,left:n,right:a,x:l,y:r}}}},a._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i=e.getComponent(f),s=e.getPosition(),o={id:t,x:s.x,y:s.y};return this._sizeType?(o.top=s.y+i.height*(1-i.anchorY),o.bottom=s.y-i.height*i.anchorY):(o.left=s.x-i.width*i.anchorX,o.right=s.x+i.width*(1-i.anchorX)),o},a.getItemPos=function(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},a._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var s in this._customSize)parseInt(s)<t&&(e+=this._customSize[s],i++);return{val:e,count:i}},a._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},a._onScrollEnded=function(){var t=this;if(t._curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&z(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=zt.ADHERING||t.adhering?t._slideMode==zt.PAGE&&(null!=t._beganPos&&t._curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},a._onTouchStart=function(t,e){if(!this._scrollView._hasNestedViewGroup(t,e)&&(this._curScrollIsTouch=!0,!(t.eventPhase===Event.AT_TARGET&&t.target===this.node))){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},a._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==zt.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==zt.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},a._onTouchCancelled=function(t,e){var i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==zt.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==zt.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},a._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},a._onItemAdaptive=function(t){var e=t.getComponent(f);if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var i=this._sizeType?e.height:e.width;this._customSize[t._listId]!=i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},a._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){var s=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(s):t.nextPage(s);break;case 2:case 3:t._beganPos<e?t.prePage(s):t.nextPage(s)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},a.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width);t.scrollTo(t.nearestListId,.7,e)}},a.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==zt.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(var s=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,o=this._updateCounter;o<s;o++)this._createOrUpdateItem2(o);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==zt.PAGE&&(this.curPageNum=this.nearestListId)},a._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.renderEvent&&u.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if(e=i?this._pool.get():I(this._itemTmp),i&&g(e)||(e=I(this._itemTmp),i=!1),e._listId!=t.id)e._listId=t.id,e.getComponent(f).setContentSize(this._itemSize);if(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var s=e.getComponent(w);s&&s.updateAlignment()}e.setSiblingIndex(this.content.children.length-1);var o=e.getComponent(b);e.listItem=o,o&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&u.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},a._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&u.emitEvents([this.renderEvent],i,t%this._actualNumItems)):((i=I(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(b),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&u.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},a._updateListItem=function(t){if(t&&this.selectedMode>Dt.NONE){var e=t.node;switch(this.selectedMode){case Dt.SINGLE:t.selected=this.selectedId==e._listId;break;case Dt.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},a._resetItemSize=function(t){},a._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},a.setMultSelected=function(t,e){var i=this;if(i.checkInited()){var s,o;if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else if(e)for(var n=t.length-1;n>=0;n--)s=t[n],(o=i.multSelected.indexOf(s))<0&&i.multSelected.push(s);else for(var a=t.length-1;a>=0;a--)s=t[a],(o=i.multSelected.indexOf(s))>=0&&i.multSelected.splice(o,1);i._forceUpdate=!0,i._onScrolling()}},a.getMultSelected=function(){return this.multSelected},a.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},a.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var s=t[e],o=this.getItemByListId(s);o&&u.emitEvents([this.renderEvent],o,s%this._actualNumItems)}}},a.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},a.getItemByListId=function(t){if(this.content)for(var e=this.content.children.length-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},a._getOutsideItem=function(){for(var t,e=[],i=this.content.children.length-1;i>=0;i--)t=this.content.children[i],this.displayData.find((function(e){return e.id==t._listId}))||e.push(t);return e},a._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(var s=this._lastDisplayData.length-1;s>=0;s--)if(this._lastDisplayData[s]==i._listId){this._lastDisplayData.splice(s,1);break}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1])},a._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},a.aniDelItem=function(t,e,i){var s=this;if(!s.checkInited()||s.cyclic||!s._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(s._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");var o,n=s.getItemByListId(t);if(n){o=n.getComponent(b),s._aniDelRuning=!0,s._aniDelCB=e,s._aniDelItem=n,s._aniDelBeforePos=n.position,s._aniDelBeforeScale=n.scale;var a=s.displayData[s.displayData.length-1].id,l=o.selected;o.showAni(i,(function(){var i;if(a<s._numItems-2&&(i=a+1),null!=i){var o=s._calcItemPos(i);s.displayData.push(o),s._virtual?s._createOrUpdateItem(o):s._createOrUpdateItem2(i)}else s._numItems--;if(s.selectedMode==Dt.SINGLE)l?s._selectedId=-1:s._selectedId-1>=0&&s._selectedId--;else if(s.selectedMode==Dt.MULT&&s.multSelected.length){var r=s.multSelected.indexOf(t);r>=0&&s.multSelected.splice(r,1);for(var c=s.multSelected.length-1;c>=0;c--){s.multSelected[c]>=t&&s.multSelected[c]--}}if(s._customSize){s._customSize[t]&&delete s._customSize[t];var h,_={};for(var d in s._customSize){h=s._customSize[d];var u=parseInt(d);_[u-(u>=t?1:0)]=h}s._customSize=_}for(var m,p,g=null!=i?i:a;g>=t+1;g--)if(n=s.getItemByListId(g)){var f=s._calcItemPos(g-1);m=z(n).to(.2333,{position:new T(f.x,f.y,0)}),g<=t+1&&(p=!0,m.call((function(){s._aniDelRuning=!1,e(t),delete s._aniDelCB}))),m.start()}p||(s._aniDelRuning=!1,e(t),s._aniDelCB=null)}),!0)}else e(t)},a.scrollTo=function(t,e,i,s){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===s&&(s=!1);var o=this;if(o.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1),!o._virtual&&o._layout&&o._layout.enabled&&o._layout.updateLayout();var n,a,l=o.getItemPos(t);if(!l)return N;switch(o._alignCalcType){case 1:n=l.left,n-=null!=i?o._thisNodeUt.width*i:o._leftGap,l=new T(n,0,0);break;case 2:n=l.right-o._thisNodeUt.width,n+=null!=i?o._thisNodeUt.width*i:o._rightGap,l=new T(n+o._contentUt.width,0,0);break;case 3:a=l.top,a+=null!=i?o._thisNodeUt.height*i:o._topGap,l=new T(0,-a,0);break;case 4:a=l.bottom+o._thisNodeUt.height,a-=null!=i?o._thisNodeUt.height*i:o._bottomGap,l=new T(0,-a+o._contentUt.height,0)}var r=o.content.getPosition();r=Math.abs(o._sizeType?r.y:r.x);var c=o._sizeType?l.y:l.x;Math.abs((null!=o._scrollPos?o._scrollPos:r)-c)>.5&&(o._scrollView.scrollToOffset(l,e),o._scrollToListId=t,o._scrollToEndTime=(new Date).getTime()/1e3+e,o._scrollToSo=o.scheduleOnce((function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),o._scrollPos=o._scrollToListId=o._scrollToEndTime=o._scrollToSo=null,s){var e=o.getItemByListId(t);e&&z(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}}),e+.1),e<=0&&o._onScrolling())}},a._calcNearestItem=function(){var t,e,i,s,o,n,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),i=a.viewTop,s=a.viewRight,o=a.viewBottom,n=a.viewLeft;for(var l=!1,r=0;r<a.content.children.length&&!l;r+=a._colLineNum)if(t=a._virtual?a.displayData[r]:a._calcExistItemPos(r))switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=n&&(a.nearestListId=t.id,n>e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 2:t.left<=s&&(a.nearestListId=t.id,s<e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 3:t.bottom<=i&&(a.nearestListId=t.id,i<e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 4:t.top>=o&&(a.nearestListId=t.id,o>e&&(a.nearestListId+=a._colLineNum),l=!0)}if((t=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&t.id==a._numItems-1)switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:s>e&&(a.nearestListId=t.id);break;case 2:n<e&&(a.nearestListId=t.id);break;case 3:o<e&&(a.nearestListId=t.id);break;case 4:i>e&&(a.nearestListId=t.id)}},a.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},a.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},a.skipPage=function(t,e){var i=this;if(i.checkInited())return i._slideMode!=zt.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&u.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},a.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};var i=I(e._itemTmp),s=i.getComponent(f);e.content.addChild(i);for(var o=0;o<t;o++)u.emitEvents([e.renderEvent],i,o),s.height==e._itemSize.height&&s.width==e._itemSize.width||(e._customSize[o]=e._sizeType?s.height:s.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},n(e,[{key:"slideMode",get:function(){return this._slideMode},set:function(t){this._slideMode=t}},{key:"virtual",get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}},{key:"updateRate",get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)}},{key:"selectedId",get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case Dt.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(e.getComponent(b).selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var s=i.getItemByListId(i._lastSelectedId);s&&(s.getComponent(b).selected=!1)}i.selectedEvent&&u.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case Dt.MULT:if(!(e=i.getItemByListId(t)))return;var o=e.getComponent(b);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var n=!o.selected;o.selected=n;var a=i.multSelected.indexOf(t);n&&a<0?i.multSelected.push(t):!n&&a>=0&&i.multSelected.splice(a,1),i.selectedEvent&&u.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,n)}}},{key:"numItems",get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)console.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=zt.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var i=e.content.getComponent(v);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var s=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<s;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(var n=0;n<e._numItems;n++)e._createOrUpdateItem2(n);e.displayItemNum=e._numItems}}}},{key:"scrollView",get:function(){return this._scrollView}}]),e}(D)).prototype,"templateType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wt.NODE}}),et=e($.prototype,"tmpNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e($.prototype,"tmpPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e($.prototype,"_slideMode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zt.NORMAL}}),e($.prototype,"slideMode",[U],Object.getOwnPropertyDescriptor($.prototype,"slideMode"),$.prototype),ot=e($.prototype,"pageDistance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),nt=e($.prototype,"pageChangeEvent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),at=e($.prototype,"_virtual",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e($.prototype,"virtual",[x],Object.getOwnPropertyDescriptor($.prototype,"virtual"),$.prototype),lt=e($.prototype,"cyclic",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=e($.prototype,"lackCenter",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ct=e($.prototype,"lackSlide",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=e($.prototype,"_updateRate",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e($.prototype,"updateRate",[Y],Object.getOwnPropertyDescriptor($.prototype,"updateRate"),$.prototype),_t=e($.prototype,"frameByFrameRenderNum",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dt=e($.prototype,"renderEvent",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),ut=e($.prototype,"selectedMode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Dt.NONE}}),mt=e($.prototype,"selectedEvent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),pt=e($.prototype,"repeatEventSingle",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gt=e($.prototype,"_numItems",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=$))||Q)||Q)||Q)||Q)||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,i,n,o,r,s,l,a,c,d,u,p,h,f,m,b,g,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,l=e._decorator,a=e.Sprite,c=e.Node,d=e.Enum,u=e.SpriteFrame,p=e.EventHandler,h=e.UITransform,f=e.tween,m=e.Vec3,b=e.Button,g=e.Component},function(e){v=e.DEV}],execute:function(){var y,C,_,w,S,E,I,F,N,T,z,k,D,L,H,M,O;s._RF.push({},"e7dc6ZAYPVLJKxNcW8aTO1J","ListItem",void 0);var G=l.ccclass,A=l.property,W=l.disallowMultiple,R=l.menu,V=l.executionOrder,x=function(e){return e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH",e}(x||{});e("default",(y=W(),C=R("List Item"),_=V(-5001),w=A({type:a,tooltip:v}),S=A({type:c,tooltip:v}),E=A({type:d(x),tooltip:v}),I=A({type:c,tooltip:v,visible:function(){return this.selectedMode>x.NONE}}),F=A({type:u,tooltip:v,visible:function(){return this.selectedMode==x.SWITCH}}),N=A({tooltip:v}),G(T=y(T=C(T=_((k=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"icon",k,o(t)),n(t,"title",D,o(t)),n(t,"selectedMode",L,o(t)),n(t,"selectedFlag",H,o(t)),n(t,"selectedSpriteFrame",M,o(t)),t._unselectedSpriteFrame=null,n(t,"adaptiveSize",O,o(t)),t._selected=!1,t._btnCom=void 0,t.list=void 0,t._eventReg=!1,t.listId=void 0,t}i(t,e);var s=t.prototype;return s.onLoad=function(){if(this.selectedMode==x.SWITCH){var e=this.selectedFlag.getComponent(a);this._unselectedSpriteFrame=e.spriteFrame}},s.onDestroy=function(){this.node.off(c.EventType.SIZE_CHANGED,this._onSizeChange,this)},s._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(c.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},s._onSizeChange=function(){this.list._onItemAdaptive(this.node)},s.createEvt=function(e,t,i){if(void 0===i&&(i=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new p;return n.target=i||e.node,n.component=e.comName,n.handler=t,n}},s.showAni=function(e,t,i){var n,o=this,r=o.node.getComponent(h);switch(e){case 0:n=f(o.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,2*r.height)});break;case 1:n=f(o.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(2*r.width,0)});break;case 2:n=f(o.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,-2*r.height)});break;case 3:n=f(o.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(-2*r.width,0)});break;default:n=f(o.node).to(.3,{scale:new m(.1,.1)})}(t||i)&&n.call((function(){if(i){o.list._delSingleItem(o.node);for(var e=o.list.displayData.length-1;e>=0;e--)if(o.list.displayData[e].id==o.listId){o.list.displayData.splice(e,1);break}}t()})),n.start()},s.onClickThis=function(){this.list.selectedId=this.listId},r(t,[{key:"selected",get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case x.TOGGLE:this.selectedFlag.active=e;break;case x.SWITCH:var t=this.selectedFlag.getComponent(a);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}},{key:"btnCom",get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(b)),this._btnCom}}]),t}(g)).prototype,"icon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"title",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"selectedMode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.NONE}}),H=t(z.prototype,"selectedFlag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"selectedSpriteFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(z.prototype,"adaptiveSize",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=z))||T)||T)||T)||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,a,n,o,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,a=t._decorator,n=t.native,o=t.sys,i=t.log}],execute:function(){var s,c;r._RF.push({},"51a5eSqz6VHwIgCU80rNl8n","LocalStorageManager",void 0);var h=a.ccclass,f=(a.property,n.fileUtils);t("LocalStorageManager",h("LocalStorageManager")(((c=function(){function t(){this._path=null,this.jsonData={},this._keyConfig="GameName"}var r=t.prototype;return r.init=function(){var e;(this.jsonData={userId:""},this._path=this._getConfigPath(),o.isNative)?e=f.getValueMapFromFile(this._path)[this._keyConfig]:e=o.localStorage.getItem(this._keyConfig);if(e&&e.length){e.startsWith("@")&&(e=e.substring(1),e=t.decrypt(e));try{var r=JSON.parse(e);this.jsonData=r,console.log("所有角色本地数据",r)}catch(t){console.error("初始化本地数据失败")}}},r.createNewUser=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},r.swichUser=function(t){this.jsonData[t]?this.jsonData.userId=t:this.createNewUser(t)},r.getUserId=function(){return this.jsonData.userId},r.setDataToRam=function(t,e){var r=this.jsonData.userId;this.jsonData[r]?this.jsonData[r][t]=e:console.error("no account can not save")},r.getDataFromRam=function(t){var e=this.jsonData.userId;if(this.jsonData[e]){var r=this.jsonData[e][t];return"boolean"==typeof r||("number"==typeof r||"string"==typeof r)?r:void 0}i("no account can not load")},r.cleanall=function(){(this.jsonData={userId:""},o.isNative)?f.writeToFile({}):o.localStorage.clear()},r.save=function(){var e=JSON.stringify(this.jsonData),r="@"+t.encrypt(e);if(o.isNative){var a={};a[this._keyConfig]=r,f.writeToFile(a)}else{o.localStorage.setItem(this._keyConfig,r)}},r._getConfigPath=function(){var t=o.platform,e="";return t===o.OS.WINDOWS?e="src/conf":t===o.OS.LINUX?e="./conf":o.isNative?(e=f.getWritablePath(),e+="conf"):e="src/conf",e},t.decrypt=function(t){var e=6;t.length%2==0&&(e=7);for(var r="",a=0;a<t.length-e;a+=2)r+=t[a+1],r+=t[a];return r+=t.slice(t.length-e+1),r=this._base64Decode(r)},t.encrypt=function(t){var e=this._base64encode(t),r=6;e.length%2==0&&(r=7);for(var a="",n=0;n<(e.length-r+1)/2;n++)a+=e[2*n+1],a+=e[2*n];return a+=e.slice(e.length-r+1)},t._base64encode=function(t){var e,r,a,n,o,i,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",f=0;for(t=this._utf8Encode(t);f<t.length;)n=(e=t.charCodeAt(f++))>>2,o=(3&e)<<4|(r=t.charCodeAt(f++))>>4,i=(15&r)<<2|(a=t.charCodeAt(f++))>>6,s=63&a,isNaN(r)?i=s=64:isNaN(a)&&(s=64),h=h+c.charAt(n)+c.charAt(o)+c.charAt(i)+c.charAt(s);return h},t._base64Decode=function(t){var e,r,a,n,o,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=s.indexOf(t.charAt(h++))<<2|(n=s.indexOf(t.charAt(h++)))>>4,r=(15&n)<<4|(o=s.indexOf(t.charAt(h++)))>>2,a=(3&o)<<6|(i=s.indexOf(t.charAt(h++))),c+=String.fromCharCode(e),64!=o&&(c+=String.fromCharCode(r)),64!=i&&(c+=String.fromCharCode(a));return c=this._utf8Decode(c)},t._utf8Encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var a=t.charCodeAt(r);a<128?e+=String.fromCharCode(a):a>127&&a<2048?(e+=String.fromCharCode(a>>6|192),e+=String.fromCharCode(63&a|128)):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128),e+=String.fromCharCode(63&a|128))}return e},t._utf8Decode=function(t){for(var e="",r=0,a=0,n=0,o=0;r<t.length;)(a=t.charCodeAt(r))<128?(e+=String.fromCharCode(a),r++):a>191&&a<224?(n=t.charCodeAt(r+1),e+=String.fromCharCode((31&a)<<6|63&n),r+=2):(n=t.charCodeAt(r+1),o=t.charCodeAt(r+2),e+=String.fromCharCode((15&a)<<12|(63&n)<<6|63&o),r+=3);return e},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.init()),this._instance}}]),t}())._instance=void 0,s=c))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./bboard.ts","./chessbuff.ts","./objbuff.ts","./DamageInfo.ts","./DamageManager.ts","./timelineFunc.ts","./timelineMng.ts","./timenode.ts","./gameClientEvent.ts","./aoe.ts","./bullet.ts","./chessAi.ts","./chessInit.ts","./chessaction.ts","./chessstatus.ts","./objpropty.ts","./objres.ts","./objstate.ts","./gameRuntimeData.ts","./gameStorageData.ts","./AudioMgr.ts","./chessboard.ts","./girddrawer.ts","./feedbackEffect.ts","./obj_collection.ts","./poplabel.ts","./ui_buffItem.ts","./ui_buff_bar.ts","./ui_cd_bar.ts","./chessitem.ts","./chessitemSlot.ts","./ui_chess_sel_bar.ts","./commitPanel.ts","./hall_menus.ts","./allchess_list.ts","./allchess_listitem.ts","./storeitem.ts","./storeitemlist.ts","./ui_hp_bar.ts","./ui_open_pack.ts","./ui_chess_info.ts","./collectionBar.ts","./uimng.ts","./aoeCallBackTable.ts","./aoeInitTable.ts","./audioTable.ts","./buffCallBackTable.ts","./buffInitTable.ts","./bulletCallBackTable.ts","./bulletInitTable.ts","./chessAiCallBackTable.ts","./chessInitTable.ts","./clipTable.ts","./prefabTable.ts","./propertyTable.ts","./skillCallBackTable.ts","./spriteframeTable.ts","./array_ext.ts","./uitranArea.ts","./LabelExt.ts","./List.ts","./ListItem.ts","./cuteProgressbar.ts","./resLoader.ts","./DAGraph.ts","./sortY.ts","./sort_isoc_Y.ts","./LocalStorageManager.ts","./QuickTween.ts","./Util.ts","./TwFeedback.ts","./TwMaker.ts","./bezierHelp.ts","./topTo.ts","./toolDirection.ts","./toolFunc.ts","./toolGird.ts","./toolIsometric.ts","./toolMatrix.ts","./toolPath.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/obj_collection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TwMaker.ts","./toolFunc.ts"],(function(e){var t,n,o,i,r,s,a,c,l,p,u,d,h,m,f,g,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,l=e.SpriteFrame,p=e.v2,u=e.v3,d=e.UIOpacity,h=e.Sprite,m=e.Component,f=e.Vec3},function(e){g=e.TwMaker},function(e){_=e.toolFunc}],execute:function(){var y,b,v,w,F,k,I,S,T;a._RF.push({},"c5cf1I2utZD+4PuMX4nFknp","obj_collection",void 0);var M=c.ccclass,x=c.property;e("obj_collection",(y=M("obj_collection"),b=x(l),v=x(l),w=x(l),y((I=t((k=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"golden",I,i(t)),o(t,"diamond",S,i(t)),o(t,"pack",T,i(t)),t._endpos=p(),t._orgScale=u(),t._cb=void 0,t}n(t,e);var a=t.prototype;return a.start=function(){this.run(this._endpos)},a.update=function(e){},a.init=function(e,t,n,o){this._cb=o,this.node.position=_.vec2To3(e),this._orgScale.set(this.node.scale),this.node.scale=u(.3,.3,.3),this.node.getComponent(d)&&(this.node.getComponent(d).opacity=255),this._endpos.set(t),"diamond"==n&&(this.getComponent(h).spriteFrame=this.diamond),"gold"==n&&(this.getComponent(h).spriteFrame=this.golden),"pack"==n&&(this.getComponent(h).spriteFrame=this.pack)},a.run=function(){var e=r(s().mark((function e(t){var n,o,i,r,a,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.vec3To2(this.node.position),o=p(90*_.RandomND(),45*-Math.random()),i=p(n).add(o),r=45+45*Math.random(),a=this._orgScale,this.node.scale=f.ZERO,c=g.Ins.tweenScale(this.node,.2,a),l=g.Ins.tweenJump(this.node,_.vec2To3(i),r,2,.3,.5),e.next=10,Promise.all([c,l]);case 10:return e.next=12,g.Ins.tweenDelay_sync(.6);case 12:return e.next=14,g.Ins.tweenMove_sync(this.node,.2,_.vec2To3(t));case 14:return u=g.Ins.tweenFade(this.node,.3,0,255),d=g.Ins.tweenScale(this.node,.15,f.ZERO),e.next=18,Promise.all([u,d]);case 18:this._cb&&this._cb(),this.node&&this.node.destroy();case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(m)).prototype,"golden",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(k.prototype,"diamond",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(k.prototype,"pack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=k))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/objbuff.ts",["cc","./objpropty.ts","./buffInitTable.ts"],(function(i){var o,t,s;return{setters:[function(i){o=i.cclegacy},function(i){t=i.objpropty},function(i){s=i.buffInitTable}],execute:function(){o._RF.push({},"84ca4JrzrlJiIomsU7iZF4U","objbuff",void 0);i("objbuff",(function(i,o,e,f){this.buffdef=void 0,this.name=void 0,this.des=void 0,this.iconRes_id=void 0,this.isShowUI=void 0,this.tickTime=void 0,this.duration=void 0,this.propModPlus=void 0,this.propModTimes=void 0,this.stateMod=void 0,this.onBuffStart=void 0,this.onBuffTick=void 0,this.onBuffReAdd=void 0,this.onBuffEnd=void 0,this.onBuffOwnerCreateDamage=void 0,this.onBuffOwnerGetDamage=void 0,this.onBuffOwnerKillOther=void 0,this.onBuffOwnerBekilled=void 0,this.launcher=void 0,this.owner=void 0,this.propOnDamageInfo=void 0,this.ticked=0,this.timeElapsed=0,this.buffdef=i,this.owner=o,this.propOnDamageInfo=e?t.zero:e,this.launcher=f;var n=s.ins.get(i);n?n(this):console.log("buff ",i,"没有定义")}));o._RF.pop()}}}));

System.register("chunks:///_virtual/objpropty.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,e,c;return{setters:[function(t){i=t.createClass},function(t){o=t.cclegacy,e=t._decorator,c=t.math}],execute:function(){o._RF.push({},"c16e4HvbXRPj5h7sRHox0lM","objpropty",void 0);e.ccclass,e.property,t("objpropty",function(){function t(t,i,o,e,n,r){void 0===t&&(t=100),void 0===i&&(i=0),void 0===o&&(o=1),void 0===e&&(e=5),void 0===n&&(n=50),void 0===r&&(r=3),this.hp=void 0,this.atk=void 0,this.atkDistance=void 0,this.critRate=void 0,this.critPercent=void 0,this.cooldown=void 0,this.hp=t,this.atk=i,this.atkDistance=Math.round(o),this.critRate=e,this.critPercent=n,this.cooldown=r,this.cooldown=c.clamp(this.cooldown,0,9999)}var o=t.prototype;return o.add=function(i){return new t(this.hp+i.hp,this.atk+i.atk,this.atkDistance+i.atkDistance,this.critRate+i.critRate,this.critPercent+i.critPercent,this.cooldown+i.cooldown)},o.times=function(i){return new t(this.hp*i.hp,this.atk*i.atk,this.atkDistance*i.atkDistance,this.critRate*i.critRate,this.critPercent*i.critPercent,this.cooldown*i.cooldown)},i(t,null,[{key:"default",get:function(){return new t}},{key:"zero",get:function(){return new t(0,0,0,0,0,0)}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/objres.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t;return{setters:[function(n){o=n.createClass},function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"d7011IHUThDp6r/Z72E50Yb","objres",void 0);n("objres",function(){function n(n,o){this.hpcurrent=void 0,this.cooldownCounter=void 0,this.hpcurrent=n,this.cooldownCounter=o}var t=n.prototype;return t.add=function(o){return new n(this.hpcurrent+o.hpcurrent,this.cooldownCounter+o.cooldownCounter)},t.sub=function(o){return new n(this.hpcurrent-o.hpcurrent,this.cooldownCounter-o.cooldownCounter)},t.mul=function(o){return new n(this.hpcurrent*o,this.cooldownCounter*o)},o(n,null,[{key:"origin",get:function(){return new n(100,0)}}]),n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/objstate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"4daca1cvd5L6qaQmnhi7o83","objstate",void 0);var c=t("objStateTemplete",function(t){return t.free="free",t.stun="stun",t.moveless="moveless",t.panic="panic",t}({}));t("objstate",function(){function t(t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),this.canMove=void 0,this.canAttack=void 0,this.canMove=t,this.canAttack=n}t.getStateByStr=function(t){return t==c.free?this.origin:t==c.stun?this.stun:t==c.moveless?this.moveless:t==c.panic?this.panic:this.origin};var e=t.prototype;return e.and=function(t){this.canMove=this.canMove&&t.canMove,this.canAttack=this.canAttack&&t.canAttack},e.equal=function(t){return this.canMove==t.canMove&&this.canAttack==t.canAttack},n(t,null,[{key:"origin",get:function(){return new t}},{key:"stun",get:function(){return new t(!1,!1)}},{key:"moveless",get:function(){return new t(!1,!0)}},{key:"panic",get:function(){return new t(!0,!1)}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/poplabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TwMaker.ts","./toolFunc.ts"],(function(e){var n,t,r,o,a,i,s,c,l,u,p,d,f,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Label,u=e.Component,p=e.v3,d=e.Color},function(e){f=e.TwMaker},function(e){h=e.toolFunc}],execute:function(){var y,b,g,m,v;s._RF.push({},"6def7k1xXVOj4Z0WVX1BFMs","poplabel",void 0);var w=c.ccclass,D=c.property;e("poplabel",(y=w("poplabel"),b=D(l),y((v=n((m=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"damageLabel",v,o(n)),n}t(n,e);var s=n.prototype;return s.start=function(){},s.update=function(e){},s.popDamage=function(){var e=a(i().mark((function e(n,t,r,o){var a,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p(33*h.RandomND(),15*h.RandomND(),0),this.node.position=o.add(a),this.damageLabel.color=r?d.GREEN:d.RED,s=.5,t&&(s=2.5),c=p(s,s,s),this.damageLabel.string=r?"+"+n:"-"+n,e.next=9,f.Ins.tweenPunchScele(this.node,c,.3);case 9:return e.next=11,f.Ins.tweenDelay_sync(.33);case 11:return f.Ins.tweenMove_sync(this.node,.66,this.node.position.clone().add(p(0,50,0))),e.next=14,f.Ins.tweenFade(this.node,.9,0,255);case 14:this.node.destroy();case 15:case"end":return e.stop()}}),e,this)})));return function(n,t,r,o){return e.apply(this,arguments)}}(),n}(u)).prototype,"damageLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/prefabTable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,f;return{setters:[function(e){a=e.createClass},function(e){f=e.cclegacy}],execute:function(){f._RF.push({},"b516bYHu45McZIkAr4jWQ9o","prefabTable",void 0);var t=e("prefabDefine",function(e){return e["弹出数字"]="弹出数字",e["石子子弹"]="石子子弹",e["黑水aoe"]="黑水aoe",e["棋子"]="棋子",e["命中闪光"]="命中闪光",e["治疗闪光"]="治疗闪光",e["退场烟雾"]="退场烟雾",e["收集物"]="收集物",e["棋子信息面板"]="棋子信息面板",e["确认面板"]="确认面板",e}({}));e("prefabTable",function(){function e(){}return a(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(t.确认面板,{name:t.确认面板,path:"prefab_ui/",file:"commitPanel",des:"确认面板，玩家操作确认用，如升级、搓卡"}),e.set(t.棋子信息面板,{name:t.棋子信息面板,path:"prefab_ui/",file:"ui_chess_info",des:"棋子信息，包括玩家的收集状态，和进一步操作"}),e.set(t.收集物,{name:t.收集物,path:"prefab_eff/",file:"obj_collection",des:"战斗中掉落的收集物品，金币宝石卡包"}),e.set(t.弹出数字,{name:t.弹出数字,path:"prefab_ui/",file:"uiPopLabel",des:"对象受到治疗或者伤害是弹出的label"}),e.set(t.石子子弹,{name:t.石子子弹,path:"prefab_bullet/",file:"bullet01",des:"石头翻滚，投掷，子弹"}),e.set(t.黑水aoe,{name:t.黑水aoe,path:"prefab_aoe/",file:"aoe01",des:"aoe，间隔伤害"}),e.set(t.棋子,{name:t.棋子,path:"prefab_chess/",file:"chess01",des:"棋子"}),e.set(t.命中闪光,{name:t.命中闪光,path:"prefab_eff/",file:"hitEff",des:"命中闪光特效"}),e.set(t.治疗闪光,{name:t.治疗闪光,path:"prefab_eff/",file:"healEff",des:"治疗闪光特效"}),e.set(t.退场烟雾,{name:t.退场烟雾,path:"prefab_eff/",file:"deadEff",des:"死亡退场闪光特效"}),e}}]),e}());f._RF.pop()}}}));

System.register("chunks:///_virtual/propertyTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./objpropty.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy},function(e){n=e.objpropty}],execute:function(){r._RF.push({},"889b7KOxlRHbZpRW0Xjliy+","propertyTable",void 0);var o=e("propertyDefined",function(e){return e["近战_低阶"]="近战_低阶",e["远程_低阶"]="远程_低阶",e["建筑_低阶"]="建筑_低阶",e}({})),i=e("propertyTable",function(){function e(){}return t(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(o.近战_低阶,this.sworder_low),e.set(o.远程_低阶,this.caster_low),e.set(o.建筑_低阶,this.building_low),e}}]),e}());i.sworder_low=new n(20,5,1,.5,50,2),i.caster_low=new n(10,3,2,.5,50,3),i.building_low=new n(150,5,3,.5,50,5),r._RF.pop()}}}));

System.register("chunks:///_virtual/QuickTween.ts",["cc","./Util.ts"],(function(){var t,o,n,i,e,r,u,l,s,a;return{setters:[function(s){t=s.cclegacy,o=s.Node,n=s.tween,i=s.Vec3,e=s.easing,r=s.Sprite,u=s.Color,l=s.Camera},function(t){s=t.calcPunchData,a=t.calcShakeData}],execute:function(){t._RF.push({},"20531fqbcBMdYAOqZjdFtlj","QuickTween",void 0),o.prototype.qtPosition=function(t,o,i){return n(this).to(o,{position:t},i)},o.prototype.qtPositionX=function(t,o,e){var r=this.position;return n(this).to(o,{position:new i(t,r.y,r.z)},e)},o.prototype.qtPositionY=function(t,o,e){var r=this.position;return n(this).to(o,{position:new i(r.x,t,r.z)},e)},o.prototype.qtPositionZ=function(t,o,e){var r=this.position;return n(this).to(o,{position:new i(r.x,r.y,t)},e)},o.prototype.qtWorldPosition=function(t,o,i){return n(this).to(o,{worldPosition:t},i)},o.prototype.qtWorldPositionX=function(t,o,e){var r=this.worldPosition;return n(this).to(o,{worldPosition:new i(t,r.y,r.z)},e)},o.prototype.qtWorldPositionY=function(t,o,e){var r=this.worldPosition;return n(this).to(o,{worldPosition:new i(r.x,t,r.z)},e)},o.prototype.qtWorldPositionZ=function(t,o,e){var r=this.worldPosition;return n(this).to(o,{worldPosition:new i(r.x,r.y,t)},e)},o.prototype.qtRotation=function(t,o,i){return n(this).to(o,{eulerAngles:t},i)},o.prototype.qtRotationQuat=function(t,o,i){return n(this).to(o,{rotation:t},i)},o.prototype.qtScale=function(t,o,e){var r=t;return t instanceof i||(r=new i(t,t,t)),n(this).to(o,{scale:r},e)},o.prototype.qtScaleX=function(t,o,e){var r=this.scale;return n(this).to(o,{scale:new i(t,r.y,r.z)},e)},o.prototype.qtScaleY=function(t,o,e){var r=this.scale;return n(this).to(o,{scale:new i(r.x,t,r.z)},e)},o.prototype.qtScaleZ=function(t,o,e){var r=this.scale;return n(this).to(o,{scale:new i(r.x,r.y,t)},e)},o.prototype.qtPunchPosition=function(t,o,i){var e,r,u=null!=(e=null==i?void 0:i.vibrato)?e:3,l=null!=(r=null==i?void 0:i.elasticity)?r:.5,a=s(this.position.clone(),t,o,u,l),p=a.tos,c=a.durations,h=n(this);return p.forEach((function(t,o){var e,r=c[o];0===o?e={onStart:i.onStart}:o===p.length-1&&(e={onComplete:i.onComplete}),h.then(n().to(r,{position:t},e))})),h.union()},o.prototype.qtPunchRotation=function(t,o,i){var e,r,u=null!=(e=null==i?void 0:i.vibrato)?e:3,l=null!=(r=null==i?void 0:i.elasticity)?r:.5,a=s(this.rotation.clone(),t,o,u,l),p=a.tos,c=a.durations,h=n(this);return p.forEach((function(t,o){var e,r=c[o];0===o?e={onStart:i.onStart}:o===p.length-1&&(e={onComplete:i.onComplete}),h.then(n().to(r,{eulerAngles:t},e))})),h.union()},o.prototype.qtPunchScale=function(t,o,i){var e,r,u=null!=(e=null==i?void 0:i.vibrato)?e:3,l=null!=(r=null==i?void 0:i.elasticity)?r:.5,a=s(this.scale.clone(),t,o,u,l),p=a.tos,c=a.durations,h=n(this);return p.forEach((function(t,o){var e,r=c[o];0===o?e={onStart:i.onStart}:o===p.length-1&&(e={onComplete:i.onComplete}),h.then(n().to(r,{scale:t},e))})),h.union()},o.prototype.qtJumpPosition=function(t,o,r,u,l,s){var a=new i,p=n(this),c=2*r;this.jumpY=0;for(var h=0,f=n(),d=0;d<r;d++)f.to(u/c,{jumpY:o*Math.pow(l,d)},{onStart:function(t){h=t.position.y,t.jumpY=0},onUpdate:function(t,o){a.set(t.position),a.y=h+t.jumpY,t.position=a},onComplete:function(t){t.jumpY=0},easing:"quadOut"}).to(u/c,{jumpY:o*Math.pow(l,d)},{onStart:function(t){h=t.position.y},onUpdate:function(t,o){a.set(t.position),a.y=h-t.jumpY,t.position=a},onComplete:function(t){t.jumpY=0},easing:"quadIn"});f.union(),this.jumpOffsetY=0;var v=0,m=n().to(u,{jumpOffsetY:t.y-this.position.y},{onStart:function(o){v=t.y-o.position.y,o.jumpOffsetY=0},onUpdate:function(t,o){var n=e.quadOut(o)*v;a.set(t.position),a.y+=n,t.position=a},onComplete:function(t){t.jumpOffsetY=0},easing:"quadOut"});this.jumpX=this.position.x,this.jumpZ=this.position.z;var y=n().to(u,{jumpX:t.x,jumpZ:t.z},{onStart:s.onStart,onUpdate:function(t,o){a.set(t.position),a.x=t.jumpX,a.z=t.jumpZ,t.position=a,null==s.onUpdate||s.onUpdate()},onComplete:function(t){t.jumpX=t.position.x,t.jumpZ=t.position.z,null==s.onComplete||s.onComplete()}});return p.parallel(f,m,y),p},o.prototype.qtShakePosition=function(t,o,e){var r,u,l,s,p=null!=(r=null==e?void 0:e.vibrato)?r:10,c=null!=(u=null==e?void 0:e.randomness)?u:90,h=null==(l=null==e?void 0:e.fadeOut)||l,f=!1;t instanceof i?(s=t,f=!0):s=new i(t,t,t);var d=a(this.position.clone(),o,s,p,c,!1,f,h),v=d.tos,m=d.durations,y=n(this);return v.forEach((function(t,o){var i,r=m[o];0===o?i={onStart:e.onStart}:o===v.length-1&&(i={onComplete:e.onComplete}),y.then(n().to(r,{position:t},i))})),y.union()},o.prototype.qtShakeRotation=function(t,o,e){var r,u,l,s,p=null!=(r=null==e?void 0:e.vibrato)?r:10,c=null!=(u=null==e?void 0:e.randomness)?u:90,h=null==(l=null==e?void 0:e.fadeOut)||l,f=!1;t instanceof i?(s=t,f=!0):s=new i(t,t,t);var d=a(this.eulerAngles.clone(),o,s,p,c,!1,f,h),v=d.tos,m=d.durations,y=n(this);return v.forEach((function(t,o){var i,r=m[o];0===o?i={onStart:e.onStart}:o===v.length-1&&(i={onComplete:e.onComplete}),y.then(n().to(r,{eulerAngles:t},i))})),y.union()},o.prototype.qtShakeScale=function(t,o,e){var r,u,l,s,p=null!=(r=null==e?void 0:e.vibrato)?r:10,c=null!=(u=null==e?void 0:e.randomness)?u:90,h=null==(l=null==e?void 0:e.fadeOut)||l,f=!1;t instanceof i?(s=t,f=!0):s=new i(t,t,t);var d=a(this.scale.clone(),o,s,p,c,!1,f,h),v=d.tos,m=d.durations,y=n(this);return v.forEach((function(t,o){var i,r=m[o];0===o?i={onStart:e.onStart}:o===v.length-1&&(i={onComplete:e.onComplete}),y.then(n().to(r,{scale:t},i))})),y.union()},r.prototype.qtColor=function(t,o,i){return n(this).to(o,{color:t},i)},r.prototype.qtOpacity=function(t,o,i){var e=this,r=this.color.clone(),l=new u;return n(this).to(o,{color:new u(r.r,r.g,r.b,t)},{onStart:i.onStart,onUpdate:function(o,n){var u=r.a+(t-r.a)*n;l.set(r.r,r.g,r.b,u),e.color=l,null==i.onUpdate||i.onUpdate()},onComplete:i.onComplete})},l.prototype.qtShakePosition=function(t,o,e){var r,u,l,s,p=null!=(r=null==e?void 0:e.vibrato)?r:10,c=null!=(u=null==e?void 0:e.randomness)?u:90,h=null==(l=null==e?void 0:e.fadeOut)||l,f=!1;t instanceof i?(s=t,f=!0):s=new i(t,t,t);var d=a(this.node.position.clone(),o,s,p,c,!0,f,h),v=d.tos,m=d.durations,y=n(this.node);return v.forEach((function(t,o){var i,r=m[o];0===o?i={onStart:e.onStart}:o===v.length-1&&(i={onComplete:e.onComplete}),y.then(n().to(r,{position:t},i))})),y.union()},t._RF.pop()}}}));

System.register("chunks:///_virtual/resLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,r,t,o,i,u,c,s;return{setters:[function(n){e=n.inheritsLoose,r=n.createClass},function(n){t=n.cclegacy,o=n.resources,i=n.AudioClip,u=n.AnimationClip,c=n.Prefab,s=n.SpriteFrame}],execute:function(){t._RF.push({},"d2b19QnW/NNJ7G3swev8pu+","resLoader",void 0);var a=function(){function n(){}return n.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},n}();a._instance=null;n("resLoader",function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.getAudio=function(n,e){return new Promise((function(r,t){o.load(e+n,i,(function(n,e){if(n)return console.error(n),void t(n);r(e)}))}))},a.getClip=function(n,e){return new Promise((function(r,t){o.load(e+n,u,(function(n,e){if(n)return console.error(n),void t(n);r(e)}))}))},a.getPrefab=function(n,e){return new Promise((function(r,t){o.load(e+n,c,(function(o,i){if(o)return console.error(o,e,n),void t(o);r(i)}))}))},a.getFrame=function(n,e){return new Promise((function(r,t){o.load(e+n+"/spriteFrame",s,(function(n,e){if(n)return console.error(n),void t(n);r(e)}))}))},r(t,null,[{key:"Ins",get:function(){return n.GetInstance.call(this)}}]),t}(a));t._RF.pop()}}}));

System.register("chunks:///_virtual/skillCallBackTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bboard.ts","./prefabTable.ts","./bulletInitTable.ts","./audioTable.ts","./aoeInitTable.ts","./timelineFunc.ts","./timenode.ts","./chessaction.ts","./chessstatus.ts"],(function(e){var n,i,t,a,o,l,s,r,d,c,u,f,_;return{setters:[function(e){n=e.createClass},function(e){i=e.cclegacy},function(e){t=e.bboard},function(e){a=e.prefabDefine},function(e){o=e.bulletDefined},function(e){l=e.audioItemDefine},function(e){s=e.aoeDefined},function(e){r=e.timelineFunc},function(e){d=e.timenode},function(e){c=e.chessChacterGender,u=e.ChaAniType,f=e.chessaction},function(e){_=e.chessstatus}],execute:function(){e("getAudioDefByGender",g),i._RF.push({},"05f5f5ZU8dLVr646pZVxk8B","skillCallBackTable",void 0);var m=e("skillDefine",function(e){return e["近战_平砍"]="近战_平砍",e["远程_投石"]="远程_投石",e["Aoe_黑水"]="Aoe_黑水",e}({}));function g(e){return e==c.器械?l.器械_攻击:e==c.女?l.女子_攻击:e==c.男?l.男子_攻击:e==c.野兽?l.野兽_攻击:void console.warn("沒有定义音效的性别类型：",e)}var p=e("skillCallBackTable",function(){function e(){}return n(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(m.近战_平砍,this.skill_平砍),e.set(m.远程_投石,this.skill_投石),e.set(m.Aoe_黑水,this.skill_黑水),e}}]),e}());p.skill_黑水=function(e,n){if(0!=n.length){var i=new d(0,r.playerChessAnimation);i.initFor_playani(u.攻击,e,n[0]),t.ins.ins_timelineMng.addTimenode(i);var o=e.getComponent(f);if(o){var l=new d(0,r.playAudio);l.initFor_audio(g(o.chessGender)),t.ins.ins_timelineMng.addTimenode(l)}var c=e.getComponent(_);if(c)for(var m=0;m<n.length;m++){var p=n[m],v=new d(.24,r.createAoeSkillobj);v.initFor_skillAoe(a.黑水aoe,s.黑水01,e,p,c.teamtype,[]),t.ins.ins_timelineMng.addTimenode(v)}}},p.skill_平砍=function(e,n){if(0!=n.length){var i=e.getComponent(_);if(i){var a=new d(0,r.playerChessAnimation);a.initFor_playani(u.攻击,e,n[0]),t.ins.ins_timelineMng.addTimenode(a);var o=e.getComponent(f);if(o){var l=new d(0,r.playAudio);l.initFor_audio(g(o.chessGender)),t.ins.ins_timelineMng.addTimenode(l)}for(var s=0;s<n.length;s++){var c=n[s],m=new d(.25,r.balanceDamageBySword);m.initFor_balancedamage(e,i.teamtype,c),t.ins.ins_timelineMng.addTimenode(m)}}}else console.warn("平砍要有目标指向")},p.skill_投石=function(e,n){if(0!=n.length){var i=new d(0,r.playerChessAnimation);i.initFor_playani(u.攻击,e,n[0]),t.ins.ins_timelineMng.addTimenode(i);var l=e.getComponent(f);if(l){var s=new d(0,r.playAudio);s.initFor_audio(g(l.chessGender)),t.ins.ins_timelineMng.addTimenode(s)}if(l){var c=e.getComponent(_);if(c)for(var m=0;m<n.length;m++){var p=n[m],v=new d(.24,r.createBulletSkillobj);v.initFor_skillbullet(a.石子子弹,o.石子01,e,l.posgird,p,c.teamtype,[]),t.ins.ins_timelineMng.addTimenode(v)}}}},i._RF.pop()}}}));

System.register("chunks:///_virtual/sort_isoc_Y.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DAGraph.ts","./toolGird.ts","./toolFunc.ts","./toolIsometric.ts"],(function(t){var r,e,o,n,i,a,l,s,u,c,f;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.Component},function(t){s=t.DAGraph},function(t){u=t.toolGird},function(t){c=t.toolFunc},function(t){f=t.toolIsometric}],execute:function(){var h,p,d,m,y,_,v;i._RF.push({},"190a3i/sbBMq7kzRHukWBkj","sort_isoc_Y",void 0);var b=a.ccclass,g=a.property;t("default",(h=g({displayName:"注意：保持跟地图tilelen一致"}),p=g({visible:function(){return 1==this.sortAllWays}}),b((y=r((m=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return r=t.call.apply(t,[this].concat(i))||this,o(r,"splitCubeLen",y,n(r)),o(r,"sortAllWays",_,n(r)),o(r,"sortPerFrame",v,n(r)),r._frameCount=0,r}e(r,t);var i=r.prototype;return i.start=function(){this.sortChildrenByGraph()},i.update=function(t){this.sortAllWays&&++this._frameCount%this.sortPerFrame==0&&(this._frameCount=0,this.sortChildrenByGraph())},i._makeName=function(t,r,e){return"isoc_x:"+t+"_y:"+r+"_z:"+e},i.sortChildrenByGraph=function(){for(var t=this,r=this.node.children,e=this.splitCubeLen,o=new s,n=0;n<r.length;n++){var i=r[n],a=f.coord2d_raytoIsoc_to_view(c.vec3To2(i.position),0,e),l=u.PixelPosToGirdPos(a.x,a.y,e),h=this._makeName(l.x,l.y,0);o.addVertex(h),i.name=h}function p(t){var r=t.match(/-?\d+(\.\d+)?/g);return r?r.map(Number):[]}for(var d=0;d<o.allNode.length;d++)for(var m=p(o.allNode[d]),y=m[0],_=m[1],v=m[2],b=0;b<o.allNode.length;b++){var g=p(o.allNode[b]),N=g[0],C=g[1],k=g[2],A=!1;y==N&&C<_&&(A=!0),_==C&&N>y&&(A=!0),N>y&&C<_&&(A=!0),A&&o.addEdge(this._makeName(y,_,v),this._makeName(N,C,k))}for(var G=o.topSort(),P=Array.from(G,(function(t){return o.allNode[t]})),x=function(){var r=P[z],e=t.node.children.find((function(t){return t.name==r}));e&&e.setSiblingIndex(z)},z=0;z<P.length;z++)x()},r}(l)).prototype,"splitCubeLen",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),_=r(m.prototype,"sortAllWays",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=r(m.prototype,"sortPerFrame",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=m))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/sortY.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,e,o;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var i;n._RF.push({},"f2a6eHUXsZLxqZwxgMUDT/W","sortY",void 0);var s=e.ccclass;e.property,t("default",s(i=function(t){function n(){for(var r,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(r=t.call.apply(t,[this].concat(e))||this)._frameCount=0,r}r(n,t);var e=n.prototype;return e.update=function(t){++this._frameCount%6==0&&(this._frameCount=0,this.sortChildrenByY())},e.sortChildrenByY=function(){var t=this.node.children.slice();t.sort((function(t,r){return r.getPosition().y-t.getPosition().y}));for(var r=0;r<t.length;++r){var n=t[r];n.active&&n.setSiblingIndex(r)}},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/spriteframeTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessInitTable.ts"],(function(e){var t,i,s;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){s=e.chessDefined}],execute:function(){i._RF.push({},"8990boHfRJAoa8UTZTPEuZA","spriteframeTable",void 0);var a=e("spriteframeDefine",function(e){return e["buff_系统默认"]="buff_系统默认",e["普通"]="普通",e["优秀"]="优秀",e["精良"]="精良",e["史诗"]="史诗",e["传说"]="传说",e}({}));e("spriteframeTable",function(){function e(){}return t(e,null,[{key:"ins",get:function(){var e=new Map;return e.set(a.普通,{name:a.普通,path:"sprite_panel/",file:"qulity_1",des:"普通 品质棋子ui背景"}),e.set(a.优秀,{name:a.优秀,path:"sprite_panel/",file:"qulity_2",des:"优秀 品质棋子ui背景"}),e.set(a.精良,{name:a.精良,path:"sprite_panel/",file:"qulity_3",des:"精良 品质棋子ui背景"}),e.set(a.史诗,{name:a.史诗,path:"sprite_panel/",file:"qulity_4",des:"史诗 品质棋子ui背景"}),e.set(a.传说,{name:a.传说,path:"sprite_panel/",file:"qulity_5",des:"传说 品质棋子ui背景"}),e.set(a.buff_系统默认,{name:a.buff_系统默认,path:"spriteframe_buff/",file:"INV_Misc_Wrench_01",des:"系统默认buff icon"}),e.set(s.剑士01,{name:s.剑士01,path:"sprite_chacter/",file:"626.0",des:"棋子，剑士，第一帧"}),e.set(s.弓手01,{name:s.弓手01,path:"sprite_chacter/",file:"309.0",des:"棋子，弓手，第一帧"}),e.set(s.神塔,{name:s.神塔,path:"sprite_chacter/",file:"88.2",des:"棋子，神塔，第一帧"}),e.set(s.天使01,{name:s.天使01,path:"sprite_chacter/",file:"2608.0",des:"棋子，天使，第一帧"}),e.set(s.蝙蝠01,{name:s.蝙蝠01,path:"sprite_chacter/",file:"bet_d_r_atk_1",des:"蝙蝠01，天使，第一帧"}),e}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/storeitem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bboard.ts"],(function(i){var e,t,o,n,l,r,s,a,p,c,d;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){l=i.cclegacy,r=i._decorator,s=i.SpriteFrame,a=i.Label,p=i.Sprite,c=i.Component},function(i){d=i.bboard}],execute:function(){var u,m,h,b,f,y,g,_,v,S,w;l._RF.push({},"1f820zaeYZDeI/1wk+lhMy1","storeitem",void 0);var z=r.ccclass,C=r.property;i("storeitem",(u=z("storeitem"),m=C(s),h=C(s),b=C(a),f=C(p),u((_=e((g=function(i){function e(){for(var e,t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];return e=i.call.apply(i,[this].concat(l))||this,o(e,"goldsp",_,n(e)),o(e,"diasp",v,n(e)),o(e,"numlb",S,n(e)),o(e,"iconSp",w,n(e)),e._sellType=void 0,e._sellNum=void 0,e}t(e,i);var l=e.prototype;return l.start=function(){},l.update=function(i){},l.init=function(i,e){this._sellType=i,this._sellNum=e,"gold"==i&&(this.iconSp.spriteFrame=this.goldsp),"diamond"==i&&(this.iconSp.spriteFrame=this.diasp),this.numlb.string=e+""},l.onbuyClick=function(){if("gold"==this._sellType){d.ins.addCollectionItem(this.iconSp.node.worldPosition,this._sellNum,"gold");for(var i=0;i<6;i++)d.ins.addCollectionItem(this.iconSp.node.worldPosition,0,"gold")}if("diamond"==this._sellType){d.ins.addCollectionItem(this.iconSp.node.worldPosition,this._sellNum,"diamond");for(var e=0;e<6;e++)d.ins.addCollectionItem(this.iconSp.node.worldPosition,0,"diamond")}},e}(c)).prototype,"goldsp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(g.prototype,"diasp",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(g.prototype,"numlb",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(g.prototype,"iconSp",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/storeitemlist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./storeitem.ts","./List.ts"],(function(t){var n,e,i,o,r,s,u;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy,o=t._decorator,r=t.Component},function(t){s=t.storeitem},function(t){u=t.default}],execute:function(){var a;i._RF.push({},"7965euOajNHd7VOzMtUckkk","storeitemlist",void 0);var d=o.ccclass,m=(o.property,[{type:"gold",num:6},{type:"diamond",num:6},{type:"gold",num:30},{type:"diamond",num:30},{type:"gold",num:98},{type:"diamond",num:98},{type:"gold",num:198},{type:"diamond",num:198},{type:"gold",num:328},{type:"diamond",num:328},{type:"gold",num:648},{type:"diamond",num:648}]);t("storeitemlist",d("storeitemlist")(a=function(t){function i(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._renderdata=[],n}n(i,t);var o=i.prototype;return o.start=function(){},o.update=function(t){},o.onEnable=function(){this.initList(m)},o.initList=function(t){this._renderdata=t,this.l.numItems=this._renderdata.length},o.onListRendert=function(t,n){var e=this._renderdata[n];t.getComponent(s).init(e.type,e.num)},e(i,[{key:"l",get:function(){return this.getComponent(u)}}]),i}(r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/timelineFunc.ts",["cc","./toolFunc.ts","./bboard.ts","./chessaction.ts","./chessstatus.ts","./AudioMgr.ts","./audioTable.ts","./DamageInfo.ts"],(function(a){var n,e,t,o,r,i,l,c,s,_;return{setters:[function(a){n=a.cclegacy},function(a){e=a.toolFunc},function(a){t=a.bboard},function(a){o=a.chessaction},function(a){r=a.chessstatus},function(a){i=a.AudioMgr},function(a){l=a.audioTable},function(a){c=a.DamageInfo,s=a.DamageInfoTag,_=a.DamageSource}],execute:function(){n._RF.push({},"fe538jJckVEIIvqQVzIq9UC","timelineFunc",void 0);var u=a("timelineFunc",(function(){}));u.print=function(a){console.log("timenode event call",a.val_str_a)},u.playAudio=function(a){var n=l.ins.get(a.val_str_a);n?i.inst.playOneShot(n.path+n.file):console.warn("没有定义 音效",a.val_str_a)},u.playerChessAnimation=function(a){var n=a.val_node_from.getComponent(o),e=a.val_vec2_a,t=a.val_num_enum;n&&n.playAni(t,e)},u.balanceDamageBySword=function(a){var n=a.val_vec2_a;if(n){var o=a.val_num_enum;if(null!=o){var i=a.val_node_from;if(e.isValidCom(i)){var l=i.getComponent(r);if(l){var u=l.allProperty,v=t.ins.getChessOnTile(n);if(v)if(1!=(o==v.getComponent(r).teamtype)){var f=a.val_strArr,m=new c(i,v,[s.directDamage],_.sword,u.atk,u.critRate,u.critPercent,f,[]);t.ins.ins_damageMng.addDamage(m)}}}}}},u.createBulletSkillobj=function(a){var n=a.val_str_a,e=a.val_str_b,o=a.val_node_from,i=a.val_vec2_a,l=a.val_vec2_b,c=a.val_num_enum,s=a.val_strArr,_=o.getComponent(r);if(_){var u=_.allProperty;t.ins.createBullet(n,e,o,i,l,c,u,s)}},u.createAoeSkillobj=function(a){var n=a.val_str_a,e=a.val_str_b,o=a.val_node_from,i=a.val_vec2_a,l=a.val_num_enum,c=a.val_strArr,s=o.getComponent(r);if(s){var _=s.allProperty;t.ins.createAoe(n,e,o,i,l,_,c)}},n._RF.pop()}}}));

System.register("chunks:///_virtual/timelineMng.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.game,r=e.Component}],execute:function(){var c;n._RF.push({},"7e02dFtq21MbpV4OS7DfpI+","timelineMng",void 0);var a=i.ccclass;i.property,e("timelineMng",a("timelineMng")(c=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).timenodeStack=[],t}t(n,e);var i=n.prototype;return i.start=function(){},i.update=function(e){for(var t=this.timenodeStack.length-1;t>=0;t--){var n=this.timenodeStack[t];n.triggle_timeElapsed<=o.totalTime&&(n.doEvent(n),this.timenodeStack.removeAt(t))}},i.addTimenode=function(e){this.timenodeStack.push(e)},i.delTimenode=function(e){this.timenodeStack.remove((function(t){return t.val_node_from&&t.val_node_from.uuid==e.uuid}))},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/timenode.ts",["cc"],(function(t){var i,_;return{setters:[function(t){i=t.cclegacy,_=t.game}],execute:function(){i._RF.push({},"bd2d1Ig/RtE3pVQDn9N6Wwo","timenode",void 0);t("timenode",function(){function t(t,i){this.triggle_timeElapsed=void 0,this.doEvent=void 0,this.val_node_from=void 0,this.val_node_to=void 0,this.val_num_enum=void 0,this.val_str_a=void 0,this.val_str_b=void 0,this.val_vec2_a=void 0,this.val_vec2_b=void 0,this.val_strArr=[],this.triggle_timeElapsed=_.totalTime+1e3*t,this.doEvent=i}var i=t.prototype;return i.initFor_audio=function(t){this.val_str_a=t},i.initFor_playani=function(t,i,_){this.val_num_enum=t,this.val_node_from=i,this.val_vec2_a=_},i.initFor_balancedamage=function(t,i,_){this.val_node_from=t,this.val_vec2_a=_,this.val_num_enum=i},i.initFor_skillbullet=function(t,i,_,s,a,n,e){this.val_str_a=t,this.val_str_b=i,this.val_node_from=_,this.val_vec2_a=s,this.val_vec2_b=a,this.val_num_enum=n,this.val_strArr=e},i.initFor_skillAoe=function(t,i,_,s,a,n){this.val_str_a=t,this.val_str_b=i,this.val_node_from=_,this.val_vec2_a=s,this.val_num_enum=a,this.val_strArr=n},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/toolDirection.ts",["cc"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.cclegacy,e=t.v2,i=t.Vec2,r=t.math}],execute:function(){n._RF.push({},"544eczS5M9CDZ4vbJEjT0qy","toolDirection",void 0);var a=t("DIRECTION",function(t){return t[t.UP=0]="UP",t[t.RIGHT_UP=1]="RIGHT_UP",t[t.RIGHT=2]="RIGHT",t[t.RIGHT_DOWN=3]="RIGHT_DOWN",t[t.DOWN=4]="DOWN",t[t.LEFT_DOWN=5]="LEFT_DOWN",t[t.LEFT=6]="LEFT",t[t.LEFT_UP=7]="LEFT_UP",t}({})),o=(t("DIRECTION_STRING",["↑","↗","→","↘","↓","↙","←","↖"]),t("DIRECTION_VEC",[e(0,1),e(1,1),e(1,0),e(1,-1),e(0,-1),e(-1,-1),e(-1,0),e(-1,1)]));t("toolDirection",function(){function t(){}return t.directionAdd=function(t,n){void 0===n&&(n=1);for(var e=t;n>0;)n--,e==a.LEFT_UP?e=a.UP:e++;return e},t.stepTowardDir=function(t,n,e){for(var i=o[n];e>0;)e--,t.add(i);return t},t.getVec2Direction4=function(t,n){var e=this.getAngleToRight(t,n);return this.getAngleDirection4(e)},t.getVec2Direction6=function(t,n){var e=this.getAngleToRight(t,n);return this.getAngleDirection6(e)},t.getVec2Direction8=function(n,e){var i=this.getAngleToRight(n,e);return t.getAngleDirection8(i)},t.getAngleToRight=function(t,n){var a=e();i.subtract(a,t,n);var o=r.toDegree(e(1,0).signAngle(a.normalize()));return o=180-o},t.getAngleDirection4=function(t){return t=(t+360)%360,Math.abs(t-270)<45?a.UP:Math.abs(t-180)<45?a.LEFT:Math.abs(t-90)<45?a.DOWN:a.RIGHT},t.getAngleDirection6=function(t){return t=(t+360)%360,Math.abs(t-300)<30?a.RIGHT_UP:Math.abs(t-240)<30?a.LEFT_UP:Math.abs(t-180)<30?a.LEFT:Math.abs(t-120)<30?a.LEFT_DOWN:Math.abs(t-60)<30?a.RIGHT_DOWN:a.RIGHT},t.getAngleDirection8=function(t){return t=(t+360)%360,Math.abs(t-315)<22.5?a.RIGHT_UP:Math.abs(t-270)<22.5?a.UP:Math.abs(t-225)<22.5?a.LEFT_UP:Math.abs(t-180)<22.5?a.LEFT:Math.abs(t-135)<22.5?a.LEFT_DOWN:Math.abs(t-90)<22.5?a.DOWN:Math.abs(t-45)<22.5?a.RIGHT_DOWN:a.RIGHT},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/toolFunc.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o,i,a;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,e=t.v3,o=t.v2,i=t.math,a=t.Node}],execute:function(){r._RF.push({},"27cf42STn1MY6B4p8e+FBSn","toolFunc",void 0);t("toolFunc",function(){function t(){}return t.vec2To3=function(t){return e(t.x,t.y,0)},t.vec3To2=function(t){return o(t.x,t.y)},t.lookAt_XScale=function(t,n){return t<n?1:-1},t.RandomInt=function(t,n){var r=Math.random(),e=this.mapnumb(r,0,1,t,n);return Math.round(e)},t.RandomND=function(){var t=Math.random(),n=Math.random(),r=Math.sqrt(-2*Math.log(t)),e=2*Math.PI*n;return r*Math.cos(e)},t.randArrayIndex=function(t){return Math.floor(Math.random()*t.length)},t.randByWeight=function(t){for(var r,e=0,o=0,i=n(t);!(r=i()).done;){e+=r.value}if(e<=0)return o;for(var a=Math.floor(Math.random()*e)+1,u=0;u<t.length;u++){if(a<=t[u]){o=u;break}a-=t[u]}return o},t.fixInteger=function(t,n,r){var e=" ";r&&(e=r);var o=n;return(t=parseFloat(t.toFixed(1))).toString().length>n&&(o=t.toString().length),(Array(n).join(e)+t).slice(-o)},t.formatBigInteget=function(t,n){return t.toString().length<=n?t:parseInt(Array.from({length:n},(function(t,n){return"9"})).join(""))},t.intDigit=function(t){for(var n=0;0!==t;)t=Math.floor(t/10),n++;return n},t.lerpInteger=function(t,n){var r=1,e=Math.abs(t-n);e>10&&(r=10*(this.intDigit(e)-1));return(t=Math.round(t))==(n=Math.round(n))?t:t>n?t-r:t<n?t+r:void 0},t.mapnumb=function(t,n,r,e,o){var a=((t=i.clamp(t,n,r))-n)/(r-n);return e+(o-e)*(a=i.clamp01(a))},t.disturb=function(t,n){var r=Math.sign(Math.random()-.5);return t*n*Math.random()*r+t},t.milliSecondTo_dd_hh_mm_ss=function(t){return[Math.floor(t/864e5),Math.floor(t%864e5/36e5),Math.floor(t%36e5/6e4),Math.floor(t%6e4/1e3)]},t.milliSecondToUIstring=function(t){var n=this.milliSecondTo_dd_hh_mm_ss(t),r=n[0],e=n[1],o=n[2],i=n[3],a=this.fixInteger(e,2,"0"),u=this.fixInteger(o,2,"0"),f=this.fixInteger(i,2,"0");return r>0?"非常长":e>0?a+"时 "+u+"分":o>0?u+"分 "+f+"秒":f+"秒"},t.timeToMilliSecond=function(t,n,r,e){return 24*t*60*60*1e3+60*n*60*1e3+60*r*1e3+1e3*e},t.vertiString=function(t){for(var n="",r=0;r<t.length;r++){n+=t[r],r==t.length-1||(n+="\n")}return n},t.setSizeSpByWidth=function(t,n,r){var e=n/(t.width/t.height);r.width=n,r.height=e},t.setSizeAsSQRT2Circle=function(t,n){n.width=2*t,n.height=2*t/Math.SQRT2},t.shuffleArray=function(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),e=[t[r],t[n]];t[n]=e[0],t[r]=e[1]}return t},t.isValidCom=function(t){if(!t)return!1;if(t instanceof a){if(!t.isValid)return!1}else{if(!t.node)return!1;if(!t.node.isValid)return!1}return!0},t.enumToArr=function(t){var n=[];for(var r in t)isNaN(Number(r))&&n.push(t[r]);return n},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/toolGird.ts",["cc"],(function(o){var t,r;return{setters:[function(o){t=o.cclegacy,r=o.v2}],execute:function(){t._RF.push({},"dc85c+iVo5CdKSFn/OIN7Vu","toolGird",void 0);o("toolGird",function(){function o(){}return o.GirdPosToPixelPos=function(o,t,i){return r(i*o,i*t)},o.PixelPosToGirdPos=function(o,t,i){var n=i,c=0;o>0?o>n/2&&(c=Math.ceil((o-n/2)/n)):o<-n/2&&(c=Math.floor((o+n/2)/n));var e=0;return t>0?t>n/2&&(e=Math.ceil((t-n/2)/n)):t<-n/2&&(e=Math.floor((t+n/2)/n)),r(c,e)},o}());t._RF.pop()}}}));

System.register("chunks:///_virtual/toolIsometric.ts",["cc","./toolMatrix.ts"],(function(o){var t,c,e,r;return{setters:[function(o){t=o.cclegacy,c=o.v3},function(o){e=o.Matrix1X4,r=o.Matrix4x4}],execute:function(){t._RF.push({},"26ab4bw53dEkb9kGB3O4vri","toolIsometric",void 0);o("toolIsometric",function(){function o(){}return o.coord2d_to_isoc_to_view=function(o){var t=e.vec3To4(o);return r.to_isoc(t)},o.coordIsoc_to_rect_to_view=function(o){var t=e.vec3To4(o);return r.to_angleright(t)},o.coord2d_raytoIsoc_to_view=function(t,n,i){var s=n*i,_=c(0,0,s),a=c(1,0,s),u=c(0,1,s),l=c().set(t.x,t.y,1e3),v=c().set(t.x,t.y,0),d=r.to_isoc(e.vec3To4(_)).toVec3(),f=r.to_isoc(e.vec3To4(a)).toVec3(),p=r.to_isoc(e.vec3To4(u)).toVec3(),y=o.plant_ray_point(d,f,p,l,v);return o.coordIsoc_to_rect_to_view(y).toVec2()},o.plant_ray_point=function(o,t,c,e,r){var n=t.clone().subtract(o),i=c.clone().subtract(t),s=n.clone().cross(i).normalize(),_=r.clone().subtract(e).normalize();return _.clone().multiplyScalar(o.clone().subtract(e).dot(s)/_.clone().dot(s)).add(e)},o}());t._RF.pop()}}}));

System.register("chunks:///_virtual/toolMatrix.ts",["cc","./toolFunc.ts"],(function(t){var a,n,o,i,r;return{setters:[function(t){a=t.cclegacy,n=t.v2,o=t.v3,i=t.math},function(t){r=t.toolFunc}],execute:function(){a._RF.push({},"e6f32/AOBNHb7kdBzB1DxVk","toolMatrix",void 0);t("Matrix1X4",function(){function t(t,a,n,o){this.vec=[void 0,0,0,0,0],void 0!==t&&(this.vec[1]=t),void 0!==a&&(this.vec[2]=a),void 0!==n&&(this.vec[3]=n),void 0!==o&&(this.vec[4]=o)}t.vec3To4=function(a){return new t(a.x,a.y,a.z,1)},t.vec2To4=function(a){return new t(a.x,a.y,0,1)};var a=t.prototype;return a.toVec2=function(){return n(this.vec[1],this.vec[2])},a.toVec3=function(){return o(this.vec[1],this.vec[2],this.vec[3])},a.mul=function(a){for(var n=new t,o=1;o<=4;o++)n.vec[o]=this.vec[1]*a.mat[1][o]+this.vec[2]*a.mat[2][o]+this.vec[3]*a.mat[3][o]+this.vec[4]*a.mat[4][o];return n},a.printVec4=function(){for(var t="",a=1;a<=4;a++)t+=r.fixInteger(this.vec[a],4," "),t+="  ";console.log(t),console.log("<<<<<<<<end>>>>>>>")},t}()),t("Matrix4x4",function(){function t(){this.mat=[[void 0,void 0,void 0,void 0,void 0],[void 0,0,0,0,0],[void 0,0,0,0,0],[void 0,0,0,0,0],[void 0,0,0,0,0]]}t.identityMat=function(){var a=new t;return a.mat[1][1]=1,a.mat[2][2]=1,a.mat[3][3]=1,a.mat[4][4]=1,a},t.translateMat=function(a,n,o){var i=new t;return i.mat[1][1]=1,i.mat[2][2]=1,i.mat[3][3]=1,i.mat[4][4]=1,i.mat[4][1]=a,i.mat[4][2]=n,i.mat[4][3]=o,i},t.rotateXMat=function(a){var n=new t;return n.mat[1][1]=1,n.mat[2][2]=Math.cos(a),n.mat[3][3]=Math.cos(a),n.mat[2][3]=Math.sin(a),n.mat[3][2]=-Math.sin(a),n.mat[4][4]=1,n},t.rotateYMat=function(a){var n=new t;return n.mat[1][1]=Math.cos(a),n.mat[1][3]=Math.sin(a),n.mat[2][2]=1,n.mat[3][1]=-Math.sin(a),n.mat[3][3]=Math.cos(a),n.mat[4][4]=1,n},t.rotateZMat=function(a){var n=new t;return n.mat[1][1]=Math.cos(a),n.mat[1][2]=Math.sin(a),n.mat[2][1]=-Math.sin(a),n.mat[2][2]=Math.cos(a),n.mat[3][3]=1,n.mat[4][4]=1,n},t.to_isoc=function(a){return a.mul(t.angleright_isoc_mat())},t.to_angleright=function(a){return a.mul(t.isoc_angleright_mat())},t.angleright_isoc_mat=function(a,n){void 0===a&&(a=-45),void 0===n&&(n=-45);var o=i.toRadian(n),r=i.toRadian(a);return t.rotateZMat(o).mul(t.rotateXMat(r))},t.isoc_angleright_mat=function(a,n){void 0===a&&(a=-45),void 0===n&&(n=-45);var o=i.toRadian(n),r=i.toRadian(a);return t.rotateXMat(r).T_Matrix().mul(t.rotateZMat(o).T_Matrix())};var a=t.prototype;return a.mul=function(a){for(var n=new t,o=1;o<=4;o++)for(var i=1;i<=4;i++)n.mat[o][i]=this.mat[o][1]*a.mat[1][i]+this.mat[o][2]*a.mat[2][i]+this.mat[o][3]*a.mat[3][i]+this.mat[o][4]*a.mat[4][i];return n},a.T_Matrix=function(){for(var a=new t,n=1;n<=4;n++)for(var o=1;o<=4;o++)a.mat[o][n]=this.mat[n][o];return a},a.printMatrix=function(){for(var t=1;t<=4;t++){for(var a="",n=1;n<=4;n++)a+=r.fixInteger(this.mat[t][n],4," "),a+="  ";console.log(a),a=""}console.log("<<<<<<<<end>>>>>>>")},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/toolPath.ts",["cc","./toolDirection.ts"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.DIRECTION_VEC}],execute:function(){n._RF.push({},"25f75sJrJNL6Z78W7C4AIzY","toolPath",void 0);t("toolPath",function(){function t(){}return t.getNeighborTile=function(t){for(var n=[],o=0;o<r.length;o++){var e=r[o];n.push(t.clone().add(e))}return n},t.isInMap=function(t,n){return!(t.x<-n||t.x>n)&&!(t.y<-n||t.y>n)},t.nearestTile=function(t,n){for(var r=Number.MAX_SAFE_INTEGER,o=void 0,e=0;e<n.length;e++){var i=n[e],c=this.circleDis(t,i);c<r&&(o=i,r=c)}return o},t.circleDis=function(t,n){var r=Math.floor(t.x-n.x),o=Math.floor(t.y-n.y);return Math.max(Math.abs(r),Math.abs(o))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/topTo.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,r,a,p,s,u,c,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,p=t._decorator,s=t.Node,u=t.UITransform,c=t.v2,d=t.v3,h=t.Component}],execute:function(){var l,g,f,T,m,y,_;a._RF.push({},"25795WccGZPjZ010eQAmwq0","topTo",void 0);var N=p.ccclass,v=p.property;t("topTo",(l=N("topTo"),g=v(s),f=v({displayName:"相对高度"}),l((y=e((m=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"topToNode",y,i(e)),n(e,"delta_height",_,i(e)),e.updateInternal=60,e.updateFrameCounter=0,e}o(e,t);var a=e.prototype;return a.onFocusInEditor=function(){this.doWidget()},a.start=function(){},a.doWidget=function(){if(this.topToNode&&this._topToNode_trans){var t=this._topToNode_trans.height,e=this.getComponent(u).height,o=this.getComponent(u).anchorY,n=this._topToNode_trans.anchorY,i=this.node.parent.getComponent(u).convertToNodeSpaceAR(this.topToNode.worldPosition),r=c();r.x=i.x,r.y=this.delta_height+i.y+t*(1-n)+e*o,this.node.position=d(r.x,r.y,0)}},a.update=function(t){this.updateFrameCounter<this.updateInternal?this.updateFrameCounter++:(this.updateFrameCounter=0,this.doWidget())},r(e,[{key:"_topToNode_trans",get:function(){return this.topToNode.getComponent(u)}}]),e}(h)).prototype,"topToNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(m.prototype,"delta_height",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=m))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/TwFeedback.ts",["cc"],(function(t){var e,n,a,c,r,o,l;return{setters:[function(t){e=t.cclegacy,n=t.Color,a=t.v3,c=t.tween,r=t.math,o=t.Sprite,l=t.Label}],execute:function(){e._RF.push({},"09928l1zNhKLpjCVuOjYOLH","TwFeedback",void 0);var i=function(t,e,n,a,c){var o=((t=r.clamp(t,e,n))-e)/(n-e);return a+(c-a)*(o=r.clamp01(o))},s=function(t,e,n){if(void 0===e&&(e=255),t&&0!=t.isValid){for(var a=t.getComponentsInChildren(o),c=0;c<a.length;c++){var r=a[c];(n=n?n.clone():r.color.clone()).a=e,r.color=n}for(var i=t.getComponentsInChildren(l),s=0;s<i.length;s++){var u=i[s];(n=n?n.clone():u.color.clone()).a=e,u.color=n}}};t("TwFeedback",function(){function t(){}return t.hurt=function(t,e,r,o){r=r||Object.create(null);var l=Math.sign(t.scale.x),u=Math.sign(t.scale.y),f=n.WHITE,v=n.RED;return r.onUpdate=function(e,n){if(t&&0!=t.isValid){if(0==e.t&&s(t,255,v),1==e.t&&s(t,255,f),e.t<.5){var c=i(e.t,0,.5,1,1.1);t.setScale(a(c*l,c*u,c))}else{var r=i(e.t,.5,1,1.1,1);t.setScale(a(r*l,r*u,r))}o&&o(e.t)}},c({t:0}).to(e,{t:1},r)},t.heal=function(t,e,r,o){r=r||Object.create(null);var l=Math.sign(t.scale.x),u=Math.sign(t.scale.y),f=n.WHITE,v=n.YELLOW;return r.onUpdate=function(e,n){if(t&&0!=t.isValid){if(0==e.t&&s(t,255,v),1==e.t&&s(t,255,f),e.t<.5){var c=i(e.t,0,.5,1,1.1);t.setScale(a(c*l,c*u,c))}else{var r=i(e.t,.5,1,1.1,1);t.setScale(a(r*l,r*u,r))}o&&o(e.t)}},c({t:0}).to(e,{t:1},r)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TwMaker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,i,t,o,a,c,s,r;return{setters:[function(n){e=n.createClass},function(n){i=n.cclegacy,t=n.math,o=n.tween,a=n.UIOpacity,c=n.Vec3,s=n.v3,r=n.Color}],execute:function(){i._RF.push({},"e4690AXZTtLBqJRhkWDptYc","TwMaker",void 0),n("TwMaker",function(){function n(){}var i=n.prototype;return i.tweenFade=function(n,e,i,c,s){if(void 0===i&&(i=255),void 0===c&&(c=0),void 0===s&&(s="linear"),n&&0!=n.isValid){var r={alpha:i=t.clamp(i,0,255)},l=o({alpha:c}).to(e,r,{easing:s,onUpdate:function(e){if(n&&0!=n.isValid){var i=n.getComponent(a);i?i.opacity=e.alpha:n.addComponent(a).opacity=e.alpha}}});return new Promise((function(n,e){l.call((function(){n("success")})).start()}))}},i.tweenShakePos=function(n,e,i,t){if(void 0===i&&(i=new c(15,15)),void 0===t&&(t="linear"),n&&0!=n.isValid){var a=new c(i),s=new c(c.ZERO),r=n.getPosition(),l=o(a).to(e,s,{easing:t,onUpdate:function(e,i){if(n&&0!=n.isValid){var t,o;t=(2*Math.random()-1)*e.x,o=(2*Math.random()-1)*e.y;var a=r.clone();a.x+=t,a.y+=o,n.position=a}}}).call((function(){n.setPosition(r)}));return new Promise((function(n,e){l.call((function(){n("success")})).start()}))}},i.tweenScale=function(n,e,i,t){if(void 0===t&&(t="linear"),n&&0!=n.isValid){var a={sx:n.scale.x,sy:n.scale.y},c={sx:i.x,sy:i.y},r=o(a).to(e,c,{easing:t,onUpdate:function(e,i){n&&0!=n.isValid&&(n.scale=s(e.sx,e.sy,1))}});return new Promise((function(n,e){r.call((function(){n("success")})).start()}))}},i.tweenColor=function(n,e,i,t){if(void 0===t&&(t="linear"),n&&n.node&&0!=n.node.isValid){var a=new r(n.color),c=new r(i);return o(a).to(e,{r:c.r,g:c.g,b:c.b},{easing:t,onUpdate:function(e,i){n&&n.node&&0!=n.node.isValid&&(n.color=e)}})}},i.tweenColor_sync=function(n,e,i,t){if(void 0===t&&(t="linear"),n&&n.node&&0!=n.node.isValid){var a=new r(n.color),c=new r(i),s=o(a).to(e,{r:c.r,g:c.g,b:c.b},{easing:t,onUpdate:function(e,i){n&&n.node&&0!=n.node.isValid&&(n.color=e)}});return new Promise((function(n,e){s.call((function(){n("success")})).start()}))}},i.tweenMove=function(n,e,i,t,a,s){if(void 0===t&&(t="linear"),n&&0!=n.isValid)return o(n.position).to(e,new c(i.x,i.y,0),{easing:t,onUpdate:function(e,i){0!=n.isValid&&(n.position=e)},onComplete:function(){a&&a.call(s)}})},i.tweenMove_sync=function(n,e,i,t,a,s){if(void 0===t&&(t="linear"),n&&0!=n.isValid){var r=o(n.position).to(e,new c(i.x,i.y,0),{easing:t,onUpdate:function(e,i){0!=n.isValid&&(n.position=e)},onComplete:function(){a&&a.call(s)}});return new Promise((function(n,e){r.call((function(){n("success")})).start()}))}},i.tweenDelay=function(n){return o(this).delay(n)},i.tweenDelay_sync=function(n){var e=o(this).delay(n);return new Promise((function(n,i){e.call((function(){n("success")})).start()}))},i.tweenJump=function(n,e,i,t,o,a){if(n&&0!=n.isValid){var c=n.qtJumpPosition(e,i,t,o,a,{onStart:function(){},onComplete:function(){}});return new Promise((function(n,e){c.call((function(){n("success")})).start()}))}},i.tweenShakeScale_sync=function(n,e,i){if(n&&0!=n.isValid){var t=n.qtShakeScale(new c(e.x,e.y),i,{onStart:function(){},onComplete:function(){}});return new Promise((function(n,e){t.call((function(){n("success")})).start()}))}},i.tweenPunchScele=function(n,e,i){if(n&&0!=n.isValid){var t=n.qtPunchScale(e,i,{onStart:function(){},onComplete:function(){}});return new Promise((function(n,e){t.call((function(){n("success")})).start()}))}},i.tweenSpark_sync=function(n,e,i,t,a){if(void 0===a&&(a="linear"),n&&n.node&&0!=n.node.isValid){var c=new r(i),s=new r(t),l=o(c).to(e,{r:s.r,g:s.g,b:s.b},{easing:a,onUpdate:function(e,i){n&&n.node&&0!=n.node.isValid&&(n.color=e)},onComplete:function(){n&&n.node&&0!=n.node.isValid&&(n.color=i)}});return new Promise((function(n,e){l.call((function(){n("success")})).start()}))}},e(n,null,[{key:"Ins",get:function(){return null===this._instance&&(this._instance=new this),this._instance}}]),n}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/ui_buff_bar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./List.ts","./chessbuff.ts","./ui_buffItem.ts"],(function(t){var e,i,n,r,u,a,s,f,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){u=t.cclegacy,a=t._decorator,s=t.Component},function(t){f=t.default},function(t){o=t.chessbuff},function(t){c=t.ui_buffItem}],execute:function(){var l,h,p,d,b;u._RF.push({},"936d3JeQ4NJ1Lw2urU1ibTd","ui_buff_bar",void 0);var _=a.ccclass,m=a.property;t("ui_buff_bar",(l=_("ui_buff_bar"),h=m(f),l((b=e((d=function(t){function e(){for(var e,i=arguments.length,u=new Array(i),a=0;a<i;a++)u[a]=arguments[a];return e=t.call.apply(t,[this].concat(u))||this,n(e,"list",b,r(e)),e.updateFrameCounter=0,e.updateInternal=10,e._chesBuff=void 0,e._renderData=[],e}i(e,t);var u=e.prototype;return u.start=function(){this.initbuffbar()},u.update=function(t){this.updateFrameCounter++,this.updateFrameCounter==this.updateInternal&&(this.updateFrameCounter=0,this.updatebuff())},u.initbuffbar=function(){this._chesBuff=this.getComponent(o),this.updatebuff()},u.updatebuff=function(){if(this._chesBuff){var t=this._chesBuff.buffs.filter((function(t){return 1==t.isShowUI}));this.setRenderData(t)}},u.setRenderData=function(t){this.list&&(this._renderData=t,this.list.numItems=this._renderData.length)},u.onRenderList=function(t,e){var i=this._renderData[e];t.getComponent(c).setitem(i,i.duration-i.timeElapsed)},u.onListSelected=function(t,e){t&&console.log("select at",e)},e}(s)).prototype,"list",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=d))||p));u._RF.pop()}}}));

System.register("chunks:///_virtual/ui_buffItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./toolFunc.ts","./spriteframeTable.ts"],(function(e){var t,i,n,r,a,o,u,s,f,c,l,p,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,f=e.Label,c=e.Sprite,l=e.Component},function(e){p=e.resLoader},function(e){m=e.toolFunc},function(e){b=e.spriteframeTable}],execute:function(){var d,h,g,y,L,_,v,I,S;u._RF.push({},"9af736T8upL3bLze7esQkKD","ui_buffItem",void 0);var w=s.ccclass,z=s.property;e("ui_buffItem",(d=w("ui_buffItem"),h=z(f),g=z(f),y=z(c),d((v=t((_=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"timeL",v,r(t)),n(t,"nameL",I,r(t)),n(t,"iconSp",S,r(t)),t.buff_defid="",t}i(t,e);var u=t.prototype;return u.start=function(){},u.update=function(e){},u.getBuffDefId=function(){return this.buff_defid},u.setitem=function(){var e=a(o().mark((function e(t,i){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buff_defid=t.buffdef,n=b.ins.get(t.iconRes_id),e.next=4,p.Ins.getFrame(n.file,n.path);case 4:if(r=e.sent,0!=m.isValidCom(this.iconSp)){e.next=7;break}return e.abrupt("return");case 7:this.iconSp.spriteFrame=r,this.updateinfo(i,t.name);case 9:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),u.updateinfo=function(e,t){this.timeL.string=m.milliSecondToUIstring(1e3*e),this.nameL.string=t},t}(l)).prototype,"timeL",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(_.prototype,"nameL",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(_.prototype,"iconSp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=_))||L));u._RF.pop()}}}));

System.register("chunks:///_virtual/ui_cd_bar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cuteProgressbar.ts","./chessstatus.ts"],(function(t){var s,r,e,o,i,n,c,u,a;return{setters:[function(t){s=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,n=t._decorator,c=t.Component},function(t){u=t.cuteProgressbar},function(t){a=t.chessstatus}],execute:function(){var h,p,l,d,g;i._RF.push({},"102ef72h4dFlJiaOAGoOzCJ","ui_cd_bar",void 0);var f=n.ccclass,b=n.property;t("ui_cd_bar",(h=f("ui_cd_bar"),p=b(u),h((g=s((d=function(t){function s(){for(var s,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(s=t.call.apply(t,[this].concat(i))||this).currentUIcounter=void 0,s.currentUIcounterMax=void 0,s.chessStatus=void 0,e(s,"progress",g,o(s)),s}r(s,t);var i=s.prototype;return i.onLoad=function(){this.chessStatus=this.getComponent(a),this.chessStatus||console.warn("uihpbar组件的同节点上 没有 chessstatus 组件"),this.progress&&this.progress.setProgressImm(0)},i.start=function(){},i.update=function(t){if(this.chessStatus){var s=this.chessStatus.resource.cooldownCounter,r=this.chessStatus.allProperty.cooldown,e=s/r;s==this.currentUIcounter&&r==this.currentUIcounterMax||(this.progress&&(0==e?this.progress.setProgressImm(e):this.progress.setProgressEff(e),this.progress.setLable(s.toFixed(1)+"/"+r.toFixed(1))),this.currentUIcounter=s,this.currentUIcounterMax=r)}},s}(c)).prototype,"progress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=d))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/ui_chess_info.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resLoader.ts","./toolFunc.ts","./bboard.ts","./gameClientEvent.ts","./gameRuntimeData.ts","./gameStorageData.ts","./chessInitTable.ts","./spriteframeTable.ts"],(function(e){var t,n,i,r,a,o,s,l,u,c,h,p,f,b,g,m,d,v,_,C,y,D,w,L,T,z,P,k,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,u=e.Sprite,c=e.Label,h=e.Node,p=e.Button,f=e.director,b=e.Component,g=e.RichText},function(e){m=e.resLoader},function(e){d=e.toolFunc},function(e){v=e.bboard},function(e){_=e.gameClientEvent},function(e){C=e.gameRuntimeData},function(e){y=e.gameStorageData,D=e.dataStorageKey},function(e){w=e.chessInitTable,L=e.getChessQualCreatCost,T=e.chessLvAdd,z=e.getChessLvUpCost,P=e.getChessQualLabelColor,k=e.isTopLv},function(e){I=e.spriteframeTable}],execute:function(){var R,x,F,q,S,H,G,E,M,U,A,B,Q,j,J,K,N,O,W,Y,V,X,Z;s._RF.push({},"e9b9c4k2UlJHr4gnMWYbaqH","ui_chess_info",void 0);var $=l.ccclass,ee=l.property;e("ui_chess_info",(R=$("ui_chess_info"),x=ee(u),F=ee(c),q=ee(c),S=ee(h),H=ee(u),G=ee(p),E=ee(p),M=ee(c),U=ee(c),A=ee(c),R((j=t((Q=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"icon",j,r(t)),i(t,"name_l",J,r(t)),i(t,"des",K,r(t)),i(t,"allRoot",N,r(t)),i(t,"propPanel",O,r(t)),i(t,"btn_make",W,r(t)),i(t,"btn_lvup",Y,r(t)),i(t,"lv_l",V,r(t)),i(t,"qual_l",X,r(t)),i(t,"nothingtodo",Z,r(t)),t._currenChessDef=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){},s.onEnable=function(){var e=this;f.on(_.eve_localDataRefresh,(function(){e.init(e._currenChessDef)}),this)},s.onDisable=function(){f.targetOff(this)},s.update=function(e){},s.init=function(){var e=a(o().mark((function e(t){var n,i,r,a,s,l,u,c,h,p,f,b,v,_,y,D;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._currenChessDef=t,n=w.ins.get(t),(i=I.ins.get(t))||console.error("没有sp资源",t),e.next=6,m.Ins.getFrame(i.file,i.path);case 6:return r=e.sent,this.icon.spriteFrame=r,a=n.qulityTag,s=I.ins.get(a),e.next=12,m.Ins.getFrame(s.file,s.path);case 12:(l=e.sent)&&(this.propPanel.spriteFrame=l),this.qual_l.string="品质:"+a,this.qual_l.color=P(a),this.des.string=n.chessDes,this.name_l.string=t,this.name_l.color=P(a),"已携带"==(u=C.chessStatusToPlayer(t))||"拥有"==u?(c=C.playerHasChess(t),this.btn_lvup.node.active=!0,this.btn_make.node.active=!1,this.lv_l.node.active=!0,this.nothingtodo.node.active=!1,h=c.cardLv,p=T(h),f=d.fixInteger(h,2,"0"),b=d.fixInteger(p,2,"0"),this.lv_l.string="等级:"+f,k(h)?(this.btn_lvup.node.active=!1,this.nothingtodo.node.active=!0):(v=z(p),_="<img src='gold' click='handler' /><u>x"+v+"</u><b>升级至:Lv"+b+"</b>",this.btn_lvup.node.getComponentInChildren(g).string=_)):(this.btn_lvup.node.active=!1,this.btn_make.node.active=!0,this.lv_l.node.active=!1,this.nothingtodo.node.active=!1,y=L(a),D="<img src='dia' click='handler' /><u>x"+y+"</u><b>合成</b>",this.btn_make.node.getComponentInChildren(g).string=D);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.onclose=function(){this.node.destroy()},s.onMake=function(){var e=this,t=y.Ins.numGet(D.diammon),n=w.ins.get(this._currenChessDef).qulityTag,i=L(n);t<i?v.ins.popCommitPanel((function(){}),"宝石不足,还需:"+(i-t),-1):v.ins.popCommitPanel((function(){C.addChessToPlayer(e._currenChessDef),C.deltaDia(-1*i),f.emit(_.eve_localDataRefresh)}),"制造:"+this._currenChessDef,3)},s.onLvup=function(){var e=this,t=y.Ins.numGet(D.gold),n=C.playerHasChess(this._currenChessDef).cardLv,i=T(n),r=z(i);t<r?v.ins.popCommitPanel((function(){}),"金币不足,还需:"+(r-t),-1):v.ins.popCommitPanel((function(){C.lvUpChessToPlayer(e._currenChessDef),C.deltaGold(-1*r),f.emit(_.eve_localDataRefresh)}),"升级:"+this._currenChessDef,3)},t}(b)).prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(Q.prototype,"name_l",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(Q.prototype,"des",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(Q.prototype,"allRoot",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(Q.prototype,"propPanel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(Q.prototype,"btn_make",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(Q.prototype,"btn_lvup",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(Q.prototype,"lv_l",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(Q.prototype,"qual_l",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(Q.prototype,"nothingtodo",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Q))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/ui_chess_sel_bar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./chessitemSlot.ts","./toolFunc.ts","./bboard.ts","./gameClientEvent.ts","./chessstatus.ts","./gameRuntimeData.ts","./chessInitTable.ts"],(function(e){var t,s,n,r,i,h,c,o,l,a,u,C,f,d,m,I,p,g,S,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass,h=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.director,C=e.Component},function(e){f=e.chessitemSlot},function(e){d=e.toolFunc},function(e){m=e.bboard},function(e){I=e.gameClientEvent},function(e){p=e.teamType},function(e){g=e.gameRuntimeData},function(e){S=e.chessInitTable,v=e.getChessCdByQuality}],execute:function(){var x,y,b,A,R,_,D;o._RF.push({},"0fd92WNA/5KC6gJc4Cb5yqn","ui_chess_sel_bar",void 0);var k=l.ccclass,E=l.property;e("ui_chess_sel_bar",(x=k("ui_chess_sel_bar"),y=E(a),b=E(f),x((_=t((R=function(e){function t(){for(var t,s=arguments.length,i=new Array(s),h=0;h<s;h++)i[h]=arguments[h];return t=e.call.apply(e,[this].concat(i))||this,n(t,"chessitemSlotRoot",_,r(t)),n(t,"nextItemSlot",D,r(t)),t.chessInCd=[],t.nextChessDefine=void 0,t.currentSelectIndex=0,t}s(t,e);var o=t.prototype;return o.start=function(){this.initChessItem(g.playerCarryChessArr)},o.onEnable=function(){var e=this;u.on(I.eve_chessboardClick,(function(t){e.chessItemUsed(e.currentSelectIndex,t)}),this)},o.onDisable=function(){u.targetOff(this)},o.update=function(e){this.chessCdTick(e),this.updateChessOnBar()},o.initChessItem=function(e){for(var t=0;t<this.chessitemSlotArr.length;t++){var s=this.chessitemSlotArr[t].getComponent(f),n=e[t];n?s.setItem(n,!1):s.setEmpty()}this.setNextChess(),this.reselect()},o.updateChessOnBar=function(){for(var e=0;e<this.chessitemSlotArr.length;e++){var t=this.chessitemSlotArr[e].getComponent(f);if(0==t.currentEmptyFlag){var s=t.selfRenderChessItem.currentChessdef,n=this.getChessCdInfo(s);n?t.selfRenderChessItem.setCd(n.cdCounter,n.cd):t.selfRenderChessItem.cleanCd()}}if(this.nextChessDefine){var r=this.getChessCdInfo(this.nextChessDefine);r?this.nextItemSlot.selfRenderChessItem.setCd(r.cdCounter,r.cd):this.nextItemSlot.selfRenderChessItem.cleanCd()}},o.addChessInCd=function(e){var t=this.getChessCdInfo(e),s=S.ins.get(e).qulityTag,n=v(s);null==t?this.chessInCd.push({cd:n,chessDefine:e,cdCounter:n}):(t.cd=n,t.cdCounter=n)},o.chessCdTick=function(e){for(var t=this.chessInCd.length-1;t>=0;t--){var s=this.chessInCd[t];s.cdCounter>0?s.cdCounter-=e:(this.chessInCd.removeAt(t),this.currentSelectIndex<0&&this.reselect())}},o.getChessCdInfo=function(e){var t=this.chessInCd.find((function(t){return t.chessDefine==e}));if(t)return t},o.getCurrentChessOnBar=function(){for(var e=[],t=0;t<this.chessitemSlotArr.length;t++){var s=this.chessitemSlotArr[t].getComponent(f);s.currentEmptyFlag?e.push(void 0):e.push(s.selfRenderChessItem.currentChessdef)}return e},o.reselect=function(){var e=this.calculateNewIndex();this.selectChessItem(e)},o.chessItemUsed=function(){var e=h(c().mark((function e(t,s){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.chessitemSlotArr[t])){e.next=17;break}if(0!=(r=n.getComponent(f)).currentEmptyFlag){e.next=16;break}if(null!=this.getChessCdInfo(r.selfRenderChessItem.currentChessdef)){e.next=13;break}return i=r.selfRenderChessItem.currentChessdef,e.next=9,m.ins.createChess(i,p.player,s);case 9:e.sent&&this.delChessItem(t),e.next=14;break;case 13:console.warn("卡槽cd中");case 14:e.next=17;break;case 16:console.warn("卡槽是空的");case 17:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}(),o.onSlotClick=function(e,t){var s=e.target,n=this.chessitemSlotArr.findIndex((function(e){return e.uuid==s.uuid})),r=this.chessitemSlotArr[n].getComponent(f),i=r.currentEmptyFlag;0==i&&r.selfRenderChessItem.currentChessdef,0==i&&this.selectChessItem(n)},o.calculateNewIndex=function(){for(var e=this.chessitemSlotArr.length-1;e>=0;){var t=this.chessitemSlotArr[e].getComponent(f);if(0==t.currentEmptyFlag)if(null==this.getChessCdInfo(t.selfRenderChessItem.currentChessdef))return e;e--}return-1},o.addChessItem=function(e,t){this.chessitemSlotArr[t].getComponent(f).setItem(e,!1)},o.randomNextChess=function(){var e=this.getCurrentChessOnBar(),t=g.playerCarryChessArr.filter((function(t){return!e.find((function(e){return e==t}))}));if(t.length>0)return t[d.randArrayIndex(t)]},o.delChessItem=function(e){var t=this.chessitemSlotArr[e].getComponent(f);t.setEmpty(),this.addChessInCd(t.selfRenderChessItem.currentChessdef),this.nextChessDefine?(this.addChessItem(this.nextChessDefine,e),this.setNextChess()):this.addChessItem(t.selfRenderChessItem.currentChessdef,e),this.reselect()},o.setNextChess=function(){this.nextChessDefine=this.randomNextChess(),this.nextChessDefine?this.nextItemSlot.setItem(this.nextChessDefine,!0):this.nextItemSlot.setEmpty()},o.cleanSelect=function(){for(var e=0;e<this.chessitemSlotArr.length;e++){this.chessitemSlotArr[e].getComponent(f).selectItem(!1)}},o.selectChessItem=function(e){(this.cleanSelect(),e<0||e>=this.chessitemSlotArr.length)?this.currentSelectIndex=-1:(this.chessitemSlotArr[e].getComponent(f).selectItem(!0),this.currentSelectIndex=e)},i(t,[{key:"chessitemSlotArr",get:function(){return this.chessitemSlotRoot?this.chessitemSlotRoot.children:[]}}]),t}(C)).prototype,"chessitemSlotRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(R.prototype,"nextItemSlot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=R))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui_hp_bar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cuteProgressbar.ts","./chessstatus.ts"],(function(s){var t,r,e,i,o,n,c,a,u;return{setters:[function(s){t=s.applyDecoratedDescriptor,r=s.inheritsLoose,e=s.initializerDefineProperty,i=s.assertThisInitialized},function(s){o=s.cclegacy,n=s._decorator,c=s.Component},function(s){a=s.cuteProgressbar},function(s){u=s.chessstatus}],execute:function(){var h,p,l,f,g;o._RF.push({},"cfec1nivBRB6bFcFzxRT3BA","ui_hp_bar",void 0);var b=n.ccclass,v=n.property;s("ui_hp_bar",(h=b("ui_hp_bar"),p=v(a),h((g=t((f=function(s){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=s.call.apply(s,[this].concat(o))||this).currentUIhp=void 0,t.currentUIhpMax=void 0,t.chessStatus=void 0,e(t,"progress",g,i(t)),t}r(t,s);var o=t.prototype;return o.onLoad=function(){this.chessStatus=this.getComponent(u),this.chessStatus||console.warn("uihpbar组件的同节点上 没有 chessstatus 组件"),this.progress&&this.progress.setProgressImm(1)},o.start=function(){},o.update=function(s){if(this.chessStatus){var t=this.chessStatus.resource.hpcurrent,r=this.chessStatus.allProperty.hp,e=t/r;t==this.currentUIhp&&r==this.currentUIhpMax||(this.progress&&(this.progress.setProgressEff(e),this.progress.setLable(t+"/"+r)),this.currentUIhp=t,this.currentUIhpMax=r)}},t}(c)).prototype,"progress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=f))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/ui_open_pack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts","./bboard.ts","./gameClientEvent.ts","./gameRuntimeData.ts","./gameStorageData.ts"],(function(t){var n,o,e,a,i,c,r,u,s,l,p;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.director,i=t.Component},function(t){c=t.toolFunc},function(t){r=t.bboard},function(t){u=t.gameClientEvent},function(t){s=t.gameRuntimeData},function(t){l=t.gameStorageData,p=t.dataStorageKey}],execute:function(){var d;o._RF.push({},"61177BnpiBE5IMY9DxdE4hC","ui_open_pack",void 0);var f=e.ccclass;e.property,t("ui_open_pack",f("ui_open_pack")(d=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.start=function(){},e.update=function(t){},e.onOpenClick=function(){if(l.Ins.numGet(p.pack)>0){s.deltaPack(-1),a.emit(u.eve_localDataRefresh);for(var t=c.RandomInt(1,10),n=c.RandomInt(1,15),o=0;o<t;o++)r.ins.addCollectionItem(this.node.worldPosition,1e3,"gold");for(var e=0;e<n;e++)r.ins.addCollectionItem(this.node.worldPosition,100,"diamond")}else console.log("背包不足")},o}(i))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/uimng.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bboard.ts","./chessstatus.ts","./chessInitTable.ts"],(function(e){var t,n,r,i,o,s,c,a,u,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Node,a=e.v2,u=e.Component},function(e){l=e.bboard},function(e){p=e.teamType},function(e){f=e.chessDefined}],execute:function(){var d,h,g,b,y;o._RF.push({},"051dfC5mWdKIrTvfiA8Lhj+","uimng",void 0);var m=s.ccclass,v=s.property;e("uimng",(d=m("uimng"),h=v(c),d((y=t((b=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"debugN",y,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},o.onBtnDebug=function(e){e.target;l.ins.createChess(f.神塔,p.holyTower,a(0,0)),l.ins.createChess(f.蝙蝠01,p.npc,a(3,2))},t}(u)).prototype,"debugN",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/uitranArea.ts",["./rollupPluginModLoBabelHelpers.js","cc","./toolFunc.ts"],(function(r){var n,t,o,e,a,i,c,u,s,l;return{setters:[function(r){n=r.applyDecoratedDescriptor,t=r.inheritsLoose,o=r.initializerDefineProperty,e=r.assertThisInitialized},function(r){a=r.cclegacy,i=r._decorator,c=r.UITransform,u=r.v2,s=r.Component},function(r){l=r.toolFunc}],execute:function(){var p,d,f,h,y;a._RF.push({},"75c9bcykP5KpKza8BiQxhoa","uitranArea",void 0);var v=i.ccclass,m=i.property;r("uitranArea",(p=v("uitranArea"),d=m(c),p((y=n((h=function(r){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=r.call.apply(r,[this].concat(a))||this,o(n,"trans",y,e(n)),n}t(n,r);var a=n.prototype;return a.start=function(){},a.update=function(r){},a.areaCenterRandom=function(){var r=u(),n=this.trans;if(!n)return l.vec3To2(this.node.worldPosition);var t=n.width,o=n.height,e=n.anchorX,a=n.anchorY,i=u(n.node.worldPosition.x,n.node.worldPosition.y);i.x+=(.5-e)*t,i.y+=(.5-a)*o;var c=l.mapnumb(l.RandomND(),-2,2,-t/2,t/2),s=l.mapnumb(l.RandomND(),-2,2,-o/2,o/2);return r.x=c+i.x,r.y=s+i.y,r},n}(s)).prototype,"trans",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc"],(function(a){var r,n,t,e;return{setters:[function(a){r=a.cclegacy,n=a.Vec3,t=a.math,e=a.Quat}],execute:function(){function o(a,r){if(a.lengthSqr()>r*r){var t=new n;return n.normalize(t,a),t.multiplyScalar(r),t}return a}function i(a,r){var e=t.toRadian(a);return new n(r*Math.cos(e),r*Math.sin(e),0)}a({calcPunchData:function(a,r,e,i,c){t.clamp01(c);var u=r.length(),l=Math.round(i*e);l<2&&(l=2);for(var f=u/l,s=[],v=0,d=0;d<l;d++){var m=e*((d+1)/l);v+=m,s[d]=m}var g=e/v;s=s.map((function(a){return a*g}));for(var h=[],p=0;p<l;p++){if(p<l-1)if(0===p)h[p]=n.add(new n,a,r);else if(p%2!=0){var x=o(r,u*c);x.negative(),h[p]=x.add(a)}else{var y=o(r,u);h[p]=y.add(a)}else h[p]=a;u-=f}return{tos:h,durations:s}},calcShakeData:function(a,r,c,u,l,f,s,v){var d=s?c.length():c.x,m=Math.floor(u*r);m<2&&(m=2);for(var g=d/m,h=[],p=0,x=0;x<m;x++){var y=(x+1)/m,R=v?r*y:r/m;p+=R,h[x]=R}var z=r/p;h=h.map((function(a){return a*z}));for(var M=t.randomRange(0,360),S=[],w=0;w<m;w++)if(w<m-1){var Q=new e;if(w>0&&(M=M-180+t.randomRange(-l,l)),s){var A=i(M,d);n.transformQuat(A,A,Q),A.x=o(A,c.x).x,A.y=o(A,c.y).y,A.z=o(A,c.z).z,A.normalize().multiplyScalar(d),S[w]=A.add(a),v&&(d-=g),c=o(c,d)}else{if(f)S[w]=i(M,d).add(a);else{e.fromAxisAngle(Q,n.UP,t.randomRange(-l,l));var D=i(M,d);n.transformQuat(D,D,Q),S[w]=D.add(a)}v&&(d-=g)}}else S[w]=a;return{tos:S,durations:h}},clampLength:o,vec3FromAngle:i}),r._RF.push({},"c427cVKhMtD6bQgnjxsaj+g","Util",void 0),r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});